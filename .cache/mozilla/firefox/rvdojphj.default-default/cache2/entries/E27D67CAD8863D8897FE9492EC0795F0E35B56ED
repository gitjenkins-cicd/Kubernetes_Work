(function(root,factory){if(typeof define==="function"&&define.amd){define(["d3"],function(d3){return root.Rickshaw=factory(d3)})}else if(typeof exports==="object"){module.exports=factory(require("d3"))}else{root.Rickshaw=factory(d3)}})(this,function(d3){var Rickshaw={namespace:function(namespace,obj){var parts=namespace.split(".");var parent=Rickshaw;for(var i=1,length=parts.length;i<length;i++){var currentPart=parts[i];parent[currentPart]=parent[currentPart]||{};parent=parent[currentPart]}return parent},keys:function(obj){var keys=[];for(var key in obj)keys.push(key);return keys},extend:function(destination,source){for(var property in source){destination[property]=source[property]}return destination},clone:function(obj){return JSON.parse(JSON.stringify(obj))}};(function(globalContext){var _toString=Object.prototype.toString,NULL_TYPE="Null",UNDEFINED_TYPE="Undefined",BOOLEAN_TYPE="Boolean",NUMBER_TYPE="Number",STRING_TYPE="String",OBJECT_TYPE="Object",FUNCTION_CLASS="[object Function]";function isFunction(object){return _toString.call(object)===FUNCTION_CLASS}function extend(destination,source){for(var property in source)if(source.hasOwnProperty(property))destination[property]=source[property];return destination}function keys(object){if(Type(object)!==OBJECT_TYPE){throw new TypeError}var results=[];for(var property in object){if(object.hasOwnProperty(property)){results.push(property)}}return results}function Type(o){switch(o){case null:return NULL_TYPE;case void 0:return UNDEFINED_TYPE}var type=typeof o;switch(type){case"boolean":return BOOLEAN_TYPE;case"number":return NUMBER_TYPE;case"string":return STRING_TYPE}return OBJECT_TYPE}function isUndefined(object){return typeof object==="undefined"}var slice=Array.prototype.slice;function argumentNames(fn){var names=fn.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return names.length==1&&!names[0]?[]:names}function wrap(fn,wrapper){var __method=fn;return function(){var a=update([bind(__method,this)],arguments);return wrapper.apply(this,a)}}function update(array,args){var arrayLength=array.length,length=args.length;while(length--)array[arrayLength+length]=args[length];return array}function merge(array,args){array=slice.call(array,0);return update(array,args)}function bind(fn,context){if(arguments.length<2&&isUndefined(arguments[0]))return this;var __method=fn,args=slice.call(arguments,2);return function(){var a=merge(args,arguments);return __method.apply(context,a)}}var emptyFunction=function(){};var Class=function(){var IS_DONTENUM_BUGGY=function(){for(var p in{toString:1}){if(p==="toString")return false}return true}();function subclass(){}function create(){var parent=null,properties=[].slice.apply(arguments);if(isFunction(properties[0]))parent=properties.shift();function klass(){this.initialize.apply(this,arguments)}extend(klass,Class.Methods);klass.superclass=parent;klass.subclasses=[];if(parent){subclass.prototype=parent.prototype;klass.prototype=new subclass;try{parent.subclasses.push(klass)}catch(e){}}for(var i=0,length=properties.length;i<length;i++)klass.addMethods(properties[i]);if(!klass.prototype.initialize)klass.prototype.initialize=emptyFunction;klass.prototype.constructor=klass;return klass}function addMethods(source){var ancestor=this.superclass&&this.superclass.prototype,properties=keys(source);if(IS_DONTENUM_BUGGY){if(source.toString!=Object.prototype.toString)properties.push("toString");if(source.valueOf!=Object.prototype.valueOf)properties.push("valueOf")}for(var i=0,length=properties.length;i<length;i++){var property=properties[i],value=source[property];if(ancestor&&isFunction(value)&&argumentNames(value)[0]=="$super"){var method=value;value=wrap(function(m){return function(){return ancestor[m].apply(this,arguments)}}(property),method);value.valueOf=bind(method.valueOf,method);value.toString=bind(method.toString,method)}this.prototype[property]=value}return this}return{create:create,Methods:{addMethods:addMethods}}}();if(globalContext.exports){globalContext.exports.Class=Class}else{globalContext.Class=Class}})(Rickshaw);Rickshaw.namespace("Rickshaw.Compat.ClassList");Rickshaw.Compat.ClassList=function(){if(typeof document!=="undefined"&&!("classList"in document.createElement("a"))){(function(view){"use strict";var classListProp="classList",protoProp="prototype",elemCtrProto=(view.HTMLElement||view.Element)[protoProp],objCtr=Object,strTrim=String[protoProp].trim||function(){return this.replace(/^\s+|\s+$/g,"")},arrIndexOf=Array[protoProp].indexOf||function(item){var i=0,len=this.length;for(;i<len;i++){if(i in this&&this[i]===item){return i}}return-1},DOMEx=function(type,message){this.name=type;this.code=DOMException[type];this.message=message},checkTokenAndGetIndex=function(classList,token){if(token===""){throw new DOMEx("SYNTAX_ERR","An invalid or illegal string was specified")}if(/\s/.test(token)){throw new DOMEx("INVALID_CHARACTER_ERR","String contains an invalid character")}return arrIndexOf.call(classList,token)},ClassList=function(elem){var trimmedClasses=strTrim.call(elem.className),classes=trimmedClasses?trimmedClasses.split(/\s+/):[],i=0,len=classes.length;for(;i<len;i++){this.push(classes[i])}this._updateClassName=function(){elem.className=this.toString()}},classListProto=ClassList[protoProp]=[],classListGetter=function(){return new ClassList(this)};DOMEx[protoProp]=Error[protoProp];classListProto.item=function(i){return this[i]||null};classListProto.contains=function(token){token+="";return checkTokenAndGetIndex(this,token)!==-1};classListProto.add=function(token){token+="";if(checkTokenAndGetIndex(this,token)===-1){this.push(token);this._updateClassName()}};classListProto.remove=function(token){token+="";var index=checkTokenAndGetIndex(this,token);if(index!==-1){this.splice(index,1);this._updateClassName()}};classListProto.toggle=function(token){token+="";if(checkTokenAndGetIndex(this,token)===-1){this.add(token)}else{this.remove(token)}};classListProto.toString=function(){return this.join(" ")};if(objCtr.defineProperty){var classListPropDesc={get:classListGetter,enumerable:true,configurable:true};try{objCtr.defineProperty(elemCtrProto,classListProp,classListPropDesc)}catch(ex){if(ex.number===-2146823252){classListPropDesc.enumerable=false;objCtr.defineProperty(elemCtrProto,classListProp,classListPropDesc)}}}else if(objCtr[protoProp].__defineGetter__){elemCtrProto.__defineGetter__(classListProp,classListGetter)}})(window)}};if(typeof RICKSHAW_NO_COMPAT!=="undefined"&&!RICKSHAW_NO_COMPAT||typeof RICKSHAW_NO_COMPAT==="undefined"){new Rickshaw.Compat.ClassList}Rickshaw.namespace("Rickshaw.Graph");Rickshaw.Graph=function(args){var self=this;this.initialize=function(args){if(!args.element)throw"Rickshaw.Graph needs a reference to an element";if(args.element.nodeType!==1)throw"Rickshaw.Graph element was defined but not an HTML element";this.element=args.element;this.series=args.series;this.window={};this.updateCallbacks=[];this.configureCallbacks=[];this.defaults={interpolation:"cardinal",offset:"zero",min:undefined,max:undefined,preserve:false,xScale:undefined,yScale:undefined,stack:true};this._loadRenderers();this.configure(args);this.validateSeries(args.series);this.series.active=function(){return self.series.filter(function(s){return!s.disabled})};this.setSize({width:args.width,height:args.height});this.element.classList.add("rickshaw_graph");this.vis=d3.select(this.element).append("svg:svg").attr("width",this.width).attr("height",this.height);this.discoverRange()};this._loadRenderers=function(){for(var name in Rickshaw.Graph.Renderer){if(!name||!Rickshaw.Graph.Renderer.hasOwnProperty(name))continue;var r=Rickshaw.Graph.Renderer[name];if(!r||!r.prototype||!r.prototype.render)continue;self.registerRenderer(new r({graph:self}))}};this.validateSeries=function(series){if(!Array.isArray(series)&&!(series instanceof Rickshaw.Series)){var seriesSignature=Object.prototype.toString.apply(series);throw"series is not an array: "+seriesSignature}var pointsCount;series.forEach(function(s){if(!(s instanceof Object)){throw"series element is not an object: "+s}if(!s.data){throw"series has no data: "+JSON.stringify(s)}if(!Array.isArray(s.data)){throw"series data is not an array: "+JSON.stringify(s.data)}if(s.data.length>0){var x=s.data[0].x;var y=s.data[0].y;if(typeof x!="number"||typeof y!="number"&&y!==null){throw"x and y properties of points should be numbers instead of "+typeof x+" and "+typeof y}}if(s.data.length>=3){if(s.data[2].x<s.data[1].x||s.data[1].x<s.data[0].x||s.data[s.data.length-1].x<s.data[0].x){throw"series data needs to be sorted on x values for series name: "+s.name}}},this)};this.dataDomain=function(){var data=this.series.map(function(s){return s.data});var min=d3.min(data.map(function(d){return d[0].x}));var max=d3.max(data.map(function(d){return d[d.length-1].x}));return[min,max]};this.discoverRange=function(){var domain=this.renderer.domain();this.x=(this.xScale||d3.scale.linear()).copy().domain(domain.x).range([0,this.width]);this.y=(this.yScale||d3.scale.linear()).copy().domain(domain.y).range([this.height,0]);this.x.magnitude=d3.scale.linear().domain([domain.x[0]-domain.x[0],domain.x[1]-domain.x[0]]).range([0,this.width]);this.y.magnitude=d3.scale.linear().domain([domain.y[0]-domain.y[0],domain.y[1]-domain.y[0]]).range([0,this.height])};this.render=function(){var stackedData=this.stackData();this.discoverRange();this.renderer.render();this.updateCallbacks.forEach(function(callback){callback()})};this.update=this.render;this.stackData=function(){var data=this.series.active().map(function(d){return d.data}).map(function(d){return d.filter(function(d){return this._slice(d)},this)},this);var preserve=this.preserve;if(!preserve){this.series.forEach(function(series){if(series.scale){preserve=true}})}data=preserve?Rickshaw.clone(data):data;this.series.active().forEach(function(series,index){if(series.scale){var seriesData=data[index];if(seriesData){seriesData.forEach(function(d){d.y=series.scale(d.y)})}}});this.stackData.hooks.data.forEach(function(entry){data=entry.f.apply(self,[data])});var stackedData;if(!this.renderer.unstack){this._validateStackable();var layout=d3.layout.stack();layout.offset(self.offset);stackedData=layout(data)}stackedData=stackedData||data;if(this.renderer.unstack){stackedData.forEach(function(seriesData){seriesData.forEach(function(d){d.y0=d.y0===undefined?0:d.y0})})}this.stackData.hooks.after.forEach(function(entry){stackedData=entry.f.apply(self,[data])});var i=0;this.series.forEach(function(series){if(series.disabled)return;series.stack=stackedData[i++]});this.stackedData=stackedData;return stackedData};this._validateStackable=function(){var series=this.series;var pointsCount;series.forEach(function(s){pointsCount=pointsCount||s.data.length;if(pointsCount&&s.data.length!=pointsCount){throw"stacked series cannot have differing numbers of points: "+pointsCount+" vs "+s.data.length+"; see Rickshaw.Series.fill()"}},this)};this.stackData.hooks={data:[],after:[]};this._slice=function(d){if(this.window.xMin||this.window.xMax){var isInRange=true;if(this.window.xMin&&d.x<this.window.xMin)isInRange=false;if(this.window.xMax&&d.x>this.window.xMax)isInRange=false;return isInRange}return true};this.onUpdate=function(callback){this.updateCallbacks.push(callback)};this.onConfigure=function(callback){this.configureCallbacks.push(callback)};this.registerRenderer=function(renderer){this._renderers=this._renderers||{};this._renderers[renderer.name]=renderer};this.configure=function(args){this.config=this.config||{};if(args.width||args.height){this.setSize(args)}Rickshaw.keys(this.defaults).forEach(function(k){this.config[k]=k in args?args[k]:k in this?this[k]:this.defaults[k]},this);Rickshaw.keys(this.config).forEach(function(k){this[k]=this.config[k]},this);if("stack"in args)args.unstack=!args.stack;var renderer=args.renderer||this.renderer&&this.renderer.name||"stack";this.setRenderer(renderer,args);this.configureCallbacks.forEach(function(callback){callback(args)})};this.setRenderer=function(r,args){if(typeof r=="function"){this.renderer=new r({graph:self});this.registerRenderer(this.renderer)}else{if(!this._renderers[r]){throw"couldn't find renderer "+r}this.renderer=this._renderers[r]}if(typeof args=="object"){this.renderer.configure(args)}};this.setSize=function(args){args=args||{};if(typeof window!==undefined){var style=window.getComputedStyle(this.element,null);var elementWidth=parseInt(style.getPropertyValue("width"),10);var elementHeight=parseInt(style.getPropertyValue("height"),10)}this.width=args.width||elementWidth||400;this.height=args.height||elementHeight||250;this.vis&&this.vis.attr("width",this.width).attr("height",this.height)};this.initialize(args)};Rickshaw.namespace("Rickshaw.Fixtures.Color");Rickshaw.Fixtures.Color=function(){this.schemes={};this.schemes.spectrum14=["#ecb796","#dc8f70","#b2a470","#92875a","#716c49","#d2ed82","#bbe468","#a1d05d","#e7cbe6","#d8aad6","#a888c2","#9dc2d3","#649eb9","#387aa3"].reverse();this.schemes.spectrum2000=["#57306f","#514c76","#646583","#738394","#6b9c7d","#84b665","#a7ca50","#bfe746","#e2f528","#fff726","#ecdd00","#d4b11d","#de8800","#de4800","#c91515","#9a0000","#7b0429","#580839","#31082b"];this.schemes.spectrum2001=["#2f243f","#3c2c55","#4a3768","#565270","#6b6b7c","#72957f","#86ad6e","#a1bc5e","#b8d954","#d3e04e","#ccad2a","#cc8412","#c1521d","#ad3821","#8a1010","#681717","#531e1e","#3d1818","#320a1b"];this.schemes.classic9=["#423d4f","#4a6860","#848f39","#a2b73c","#ddcb53","#c5a32f","#7d5836","#963b20","#7c2626","#491d37","#2f254a"].reverse();this.schemes.httpStatus={503:"#ea5029",502:"#d23f14",500:"#bf3613",410:"#efacea",409:"#e291dc",403:"#f457e8",408:"#e121d2",401:"#b92dae",405:"#f47ceb",404:"#a82a9f",400:"#b263c6",301:"#6fa024",302:"#87c32b",307:"#a0d84c",304:"#28b55c",200:"#1a4f74",206:"#27839f",201:"#52adc9",202:"#7c979f",203:"#a5b8bd",204:"#c1cdd1"};this.schemes.colorwheel=["#b5b6a9","#858772","#785f43","#96557e","#4682b4","#65b9ac","#73c03a","#cb513a"].reverse();this.schemes.cool=["#5e9d2f","#73c03a","#4682b4","#7bc3b8","#a9884e","#c1b266","#a47493","#c09fb5"];this.schemes.munin=["#00cc00","#0066b3","#ff8000","#ffcc00","#330099","#990099","#ccff00","#ff0000","#808080","#008f00","#00487d","#b35a00","#b38f00","#6b006b","#8fb300","#b30000","#bebebe","#80ff80","#80c9ff","#ffc080","#ffe680","#aa80ff","#ee00cc","#ff8080","#666600","#ffbfff","#00ffcc","#cc6699","#999900"]};Rickshaw.namespace("Rickshaw.Fixtures.RandomData");Rickshaw.Fixtures.RandomData=function(timeInterval){var addData;timeInterval=timeInterval||1;var lastRandomValue=200;var timeBase=Math.floor((new Date).getTime()/1e3);this.addData=function(data){var randomValue=Math.random()*100+15+lastRandomValue;var index=data[0].length;var counter=1;data.forEach(function(series){var randomVariance=Math.random()*20;var v=randomValue/25+counter++ +(Math.cos(index*counter*11/960)+2)*15+(Math.cos(index/7)+2)*7+(Math.cos(index/17)+2)*1;series.push({x:index*timeInterval+timeBase,y:v+randomVariance})});lastRandomValue=randomValue*.85};this.removeData=function(data){data.forEach(function(series){series.shift()});timeBase+=timeInterval}};Rickshaw.namespace("Rickshaw.Fixtures.Time");Rickshaw.Fixtures.Time=function(){var self=this;this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];this.units=[{name:"decade",seconds:86400*365.25*10,formatter:function(d){return parseInt(d.getUTCFullYear()/10,10)*10}},{name:"year",seconds:86400*365.25,formatter:function(d){return d.getUTCFullYear()}},{name:"month",seconds:86400*30.5,formatter:function(d){return self.months[d.getUTCMonth()]}},{name:"week",seconds:86400*7,formatter:function(d){return self.formatDate(d)}},{name:"day",seconds:86400,formatter:function(d){return d.getUTCDate()}},{name:"6 hour",seconds:3600*6,formatter:function(d){return self.formatTime(d)}},{name:"hour",seconds:3600,formatter:function(d){return self.formatTime(d)}},{name:"15 minute",seconds:60*15,formatter:function(d){return self.formatTime(d)}},{name:"minute",seconds:60,formatter:function(d){return d.getUTCMinutes()}},{name:"15 second",seconds:15,formatter:function(d){return d.getUTCSeconds()+"s"}},{name:"second",seconds:1,formatter:function(d){return d.getUTCSeconds()+"s"}},{name:"decisecond",seconds:1/10,formatter:function(d){return d.getUTCMilliseconds()+"ms"}},{name:"centisecond",seconds:1/100,formatter:function(d){return d.getUTCMilliseconds()+"ms"}}];this.unit=function(unitName){return this.units.filter(function(unit){return unitName==unit.name}).shift()};this.formatDate=function(d){return d3.time.format("%b %e")(d)};this.formatTime=function(d){return d.toUTCString().match(/(\d+:\d+):/)[1]};this.ceil=function(time,unit){var date,floor,year;if(unit.name=="month"){date=new Date(time*1e3);floor=Date.UTC(date.getUTCFullYear(),date.getUTCMonth())/1e3;if(floor==time)return time;year=date.getUTCFullYear();var month=date.getUTCMonth();if(month==11){month=0;year=year+1}else{month+=1}return Date.UTC(year,month)/1e3}if(unit.name=="year"){date=new Date(time*1e3);floor=Date.UTC(date.getUTCFullYear(),0)/1e3;if(floor==time)return time;year=date.getUTCFullYear()+1;return Date.UTC(year,0)/1e3}return Math.ceil(time/unit.seconds)*unit.seconds}};Rickshaw.namespace("Rickshaw.Fixtures.Time.Local");Rickshaw.Fixtures.Time.Local=function(){var self=this;this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];this.units=[{name:"decade",seconds:86400*365.25*10,formatter:function(d){return parseInt(d.getFullYear()/10,10)*10}},{name:"year",seconds:86400*365.25,formatter:function(d){return d.getFullYear()}},{name:"month",seconds:86400*30.5,formatter:function(d){return self.months[d.getMonth()]}},{name:"week",seconds:86400*7,formatter:function(d){return self.formatDate(d)}},{name:"day",seconds:86400,formatter:function(d){return d.getDate()}},{name:"6 hour",seconds:3600*6,formatter:function(d){return self.formatTime(d)}},{name:"hour",seconds:3600,formatter:function(d){return self.formatTime(d)}},{name:"15 minute",seconds:60*15,formatter:function(d){return self.formatTime(d)}},{name:"minute",seconds:60,formatter:function(d){return d.getMinutes()}},{name:"15 second",seconds:15,formatter:function(d){return d.getSeconds()+"s"}},{name:"second",seconds:1,formatter:function(d){return d.getSeconds()+"s"}},{name:"decisecond",seconds:1/10,formatter:function(d){return d.getMilliseconds()+"ms"}},{name:"centisecond",seconds:1/100,formatter:function(d){return d.getMilliseconds()+"ms"}}];this.unit=function(unitName){return this.units.filter(function(unit){return unitName==unit.name}).shift()};this.formatDate=function(d){return d3.time.format("%b %e")(d)};this.formatTime=function(d){return d.toString().match(/(\d+:\d+):/)[1]};this.ceil=function(time,unit){var date,floor,year;if(unit.name=="day"){var nearFuture=new Date((time+unit.seconds-1)*1e3);var rounded=new Date(0);rounded.setMilliseconds(0);rounded.setSeconds(0);rounded.setMinutes(0);rounded.setHours(0);rounded.setDate(nearFuture.getDate());rounded.setMonth(nearFuture.getMonth());rounded.setFullYear(nearFuture.getFullYear());return rounded.getTime()/1e3}if(unit.name=="month"){date=new Date(time*1e3);floor=new Date(date.getFullYear(),date.getMonth()).getTime()/1e3;if(floor==time)return time;year=date.getFullYear();var month=date.getMonth();if(month==11){month=0;year=year+1}else{month+=1}return new Date(year,month).getTime()/1e3}if(unit.name=="year"){date=new Date(time*1e3);floor=new Date(date.getUTCFullYear(),0).getTime()/1e3;if(floor==time)return time;year=date.getFullYear()+1;return new Date(year,0).getTime()/1e3}return Math.ceil(time/unit.seconds)*unit.seconds}};Rickshaw.namespace("Rickshaw.Fixtures.Number");Rickshaw.Fixtures.Number.formatKMBT=function(y){var abs_y=Math.abs(y);if(abs_y>=1e12){return y/1e12+"T"}else if(abs_y>=1e9){return y/1e9+"B"}else if(abs_y>=1e6){return y/1e6+"M"}else if(abs_y>=1e3){return y/1e3+"K"}else if(abs_y<1&&y>0){return y.toFixed(2)}else if(abs_y===0){return""}else{return y}};Rickshaw.Fixtures.Number.formatBase1024KMGTP=function(y){var abs_y=Math.abs(y);if(abs_y>=0x4000000000000){return y/0x4000000000000+"P"}else if(abs_y>=1099511627776){return y/1099511627776+"T"}else if(abs_y>=1073741824){return y/1073741824+"G"}else if(abs_y>=1048576){return y/1048576+"M"}else if(abs_y>=1024){return y/1024+"K"}else if(abs_y<1&&y>0){return y.toFixed(2)}else if(abs_y===0){return""}else{return y}};Rickshaw.namespace("Rickshaw.Color.Palette");Rickshaw.Color.Palette=function(args){var color=new Rickshaw.Fixtures.Color;args=args||{};this.schemes={};this.scheme=color.schemes[args.scheme]||args.scheme||color.schemes.colorwheel;this.runningIndex=0;this.generatorIndex=0;if(args.interpolatedStopCount){var schemeCount=this.scheme.length-1;var i,j,scheme=[];for(i=0;i<schemeCount;i++){scheme.push(this.scheme[i]);var generator=d3.interpolateHsl(this.scheme[i],this.scheme[i+1]);for(j=1;j<args.interpolatedStopCount;j++){scheme.push(generator(1/args.interpolatedStopCount*j))}}scheme.push(this.scheme[this.scheme.length-1]);this.scheme=scheme}this.rotateCount=this.scheme.length;this.color=function(key){return this.scheme[key]||this.scheme[this.runningIndex++]||this.interpolateColor()||"#808080"};this.interpolateColor=function(){if(!Array.isArray(this.scheme))return;var color;if(this.generatorIndex==this.rotateCount*2-1){color=d3.interpolateHsl(this.scheme[this.generatorIndex],this.scheme[0])(.5);this.generatorIndex=0;this.rotateCount*=2}else{color=d3.interpolateHsl(this.scheme[this.generatorIndex],this.scheme[this.generatorIndex+1])(.5);this.generatorIndex++}this.scheme.push(color);return color}};Rickshaw.namespace("Rickshaw.Graph.Ajax");Rickshaw.Graph.Ajax=Rickshaw.Class.create({initialize:function(args){this.dataURL=args.dataURL;this.onData=args.onData||function(d){return d};this.onComplete=args.onComplete||function(){};this.onError=args.onError||function(){};this.args=args;this.request()},request:function(){jQuery.ajax({url:this.dataURL,dataType:"json",success:this.success.bind(this),error:this.error.bind(this)})},error:function(){console.log("error loading dataURL: "+this.dataURL);this.onError(this)},success:function(data,status){data=this.onData(data);this.args.series=this._splice({data:data,series:this.args.series});this.graph=this.graph||new Rickshaw.Graph(this.args);this.graph.render();this.onComplete(this)},_splice:function(args){var data=args.data;var series=args.series;if(!args.series)return data;series.forEach(function(s){var seriesKey=s.key||s.name;if(!seriesKey)throw"series needs a key or a name";data.forEach(function(d){var dataKey=d.key||d.name;if(!dataKey)throw"data needs a key or a name";if(seriesKey==dataKey){var properties=["color","name","data"];properties.forEach(function(p){if(d[p])s[p]=d[p]})}})});return series}});Rickshaw.namespace("Rickshaw.Graph.Annotate");Rickshaw.Graph.Annotate=function(args){var graph=this.graph=args.graph;this.elements={timeline:args.element};var self=this;this.data={};this.elements.timeline.classList.add("rickshaw_annotation_timeline");this.add=function(time,content,end_time){self.data[time]=self.data[time]||{boxes:[]};self.data[time].boxes.push({content:content,end:end_time})};this.update=function(){Rickshaw.keys(self.data).forEach(function(time){var annotation=self.data[time];var left=self.graph.x(time);if(left<0||left>self.graph.x.range()[1]){if(annotation.element){annotation.line.classList.add("offscreen");annotation.element.style.display="none"}annotation.boxes.forEach(function(box){if(box.rangeElement)box.rangeElement.classList.add("offscreen")});return}if(!annotation.element){var element=annotation.element=document.createElement("div");element.classList.add("annotation");this.elements.timeline.appendChild(element);element.addEventListener("click",function(e){element.classList.toggle("active");annotation.line.classList.toggle("active");annotation.boxes.forEach(function(box){if(box.rangeElement)box.rangeElement.classList.toggle("active")})},false)}annotation.element.style.left=left+"px";annotation.element.style.display="block";annotation.boxes.forEach(function(box){var element=box.element;if(!element){element=box.element=document.createElement("div");element.classList.add("content");element.innerHTML=box.content;annotation.element.appendChild(element);annotation.line=document.createElement("div");annotation.line.classList.add("annotation_line");self.graph.element.appendChild(annotation.line);if(box.end){box.rangeElement=document.createElement("div");box.rangeElement.classList.add("annotation_range");self.graph.element.appendChild(box.rangeElement)}}if(box.end){var annotationRangeStart=left;var annotationRangeEnd=Math.min(self.graph.x(box.end),self.graph.x.range()[1]);if(annotationRangeStart>annotationRangeEnd){annotationRangeEnd=left;annotationRangeStart=Math.max(self.graph.x(box.end),self.graph.x.range()[0])}var annotationRangeWidth=annotationRangeEnd-annotationRangeStart;box.rangeElement.style.left=annotationRangeStart+"px";box.rangeElement.style.width=annotationRangeWidth+"px";box.rangeElement.classList.remove("offscreen")}annotation.line.classList.remove("offscreen");annotation.line.style.left=left+"px"})},this)};this.graph.onUpdate(function(){self.update()})};Rickshaw.namespace("Rickshaw.Graph.Axis.Time");Rickshaw.Graph.Axis.Time=function(args){var self=this;this.graph=args.graph;this.elements=[];this.ticksTreatment=args.ticksTreatment||"plain";this.fixedTimeUnit=args.timeUnit;var time=args.timeFixture||new Rickshaw.Fixtures.Time;this.appropriateTimeUnit=function(){var unit;var units=time.units;var domain=this.graph.x.domain();var rangeSeconds=domain[1]-domain[0];units.forEach(function(u){if(Math.floor(rangeSeconds/u.seconds)>=2){unit=unit||u}});return unit||time.units[time.units.length-1]};this.tickOffsets=function(){var domain=this.graph.x.domain();var unit=this.fixedTimeUnit||this.appropriateTimeUnit();var count=Math.ceil((domain[1]-domain[0])/unit.seconds);var runningTick=domain[0];var offsets=[];for(var i=0;i<count;i++){var tickValue=time.ceil(runningTick,unit);runningTick=tickValue+unit.seconds/2;offsets.push({value:tickValue,unit:unit})}return offsets};this.render=function(){this.elements.forEach(function(e){e.parentNode.removeChild(e)});this.elements=[];var offsets=this.tickOffsets();offsets.forEach(function(o){if(self.graph.x(o.value)>self.graph.x.range()[1])return;var element=document.createElement("div");element.style.left=self.graph.x(o.value)+"px";element.classList.add("x_tick");element.classList.add(self.ticksTreatment);var title=document.createElement("div");title.classList.add("title");title.innerHTML=o.unit.formatter(new Date(o.value*1e3));element.appendChild(title);self.graph.element.appendChild(element);self.elements.push(element)})};this.graph.onUpdate(function(){self.render()})};Rickshaw.namespace("Rickshaw.Graph.Axis.X");Rickshaw.Graph.Axis.X=function(args){var self=this;var berthRate=.1;this.initialize=function(args){this.graph=args.graph;this.orientation=args.orientation||"top";this.pixelsPerTick=args.pixelsPerTick||75;if(args.ticks)this.staticTicks=args.ticks;if(args.tickValues)this.tickValues=args.tickValues;this.tickSize=args.tickSize||4;this.ticksTreatment=args.ticksTreatment||"plain";if(args.element){this.element=args.element;this._discoverSize(args.element,args);this.vis=d3.select(args.element).append("svg:svg").attr("height",this.height).attr("width",this.width).attr("class","rickshaw_graph x_axis_d3");this.element=this.vis[0][0];this.element.style.position="relative";this.setSize({width:args.width,height:args.height})}else{this.vis=this.graph.vis}this.graph.onUpdate(function(){self.render()})};this.setSize=function(args){args=args||{};if(!this.element)return;this._discoverSize(this.element.parentNode,args);this.vis.attr("height",this.height).attr("width",this.width*(1+berthRate));var berth=Math.floor(this.width*berthRate/2);this.element.style.left=-1*berth+"px"};this.render=function(){if(this._renderWidth!==undefined&&this.graph.width!==this._renderWidth)this.setSize({auto:true});var axis=d3.svg.axis().scale(this.graph.x).orient(this.orientation);axis.tickFormat(args.tickFormat||function(x){return x});if(this.tickValues)axis.tickValues(this.tickValues);this.ticks=this.staticTicks||Math.floor(this.graph.width/this.pixelsPerTick);var berth=Math.floor(this.width*berthRate/2)||0;var transform;if(this.orientation=="top"){var yOffset=this.height||this.graph.height;transform="translate("+berth+","+yOffset+")"}else{transform="translate("+berth+", 0)"}if(this.element){this.vis.selectAll("*").remove()}this.vis.append("svg:g").attr("class",["x_ticks_d3",this.ticksTreatment].join(" ")).attr("transform",transform).call(axis.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize));var gridSize=(this.orientation=="bottom"?1:-1)*this.graph.height;this.graph.vis.append("svg:g").attr("class","x_grid_d3").call(axis.ticks(this.ticks).tickSubdivide(0).tickSize(gridSize)).selectAll("text").each(function(){this.parentNode.setAttribute("data-x-value",this.textContent)});this._renderHeight=this.graph.height};this._discoverSize=function(element,args){if(typeof window!=="undefined"){var style=window.getComputedStyle(element,null);var elementHeight=parseInt(style.getPropertyValue("height"),10);if(!args.auto){var elementWidth=parseInt(style.getPropertyValue("width"),10)}}this.width=(args.width||elementWidth||this.graph.width)*(1+berthRate);this.height=args.height||elementHeight||40};this.initialize(args)};Rickshaw.namespace("Rickshaw.Graph.Axis.Y");Rickshaw.Graph.Axis.Y=Rickshaw.Class.create({initialize:function(args){this.graph=args.graph;this.orientation=args.orientation||"right";this.pixelsPerTick=args.pixelsPerTick||75;if(args.ticks)this.staticTicks=args.ticks;if(args.tickValues)this.tickValues=args.tickValues;this.tickSize=args.tickSize||4;this.ticksTreatment=args.ticksTreatment||"plain";this.tickFormat=args.tickFormat||function(y){return y};this.berthRate=.1;if(args.element){this.element=args.element;this.vis=d3.select(args.element).append("svg:svg").attr("class","rickshaw_graph y_axis");this.element=this.vis[0][0];this.element.style.position="relative";this.setSize({width:args.width,height:args.height})}else{this.vis=this.graph.vis}var self=this;this.graph.onUpdate(function(){self.render()})},setSize:function(args){args=args||{};if(!this.element)return;if(typeof window!=="undefined"){var style=window.getComputedStyle(this.element.parentNode,null);var elementWidth=parseInt(style.getPropertyValue("width"),10);if(!args.auto){var elementHeight=parseInt(style.getPropertyValue("height"),10)}}this.width=args.width||elementWidth||this.graph.width*this.berthRate;this.height=args.height||elementHeight||this.graph.height;this.vis.attr("width",this.width).attr("height",this.height*(1+this.berthRate));var berth=this.height*this.berthRate;if(this.orientation=="left"){this.element.style.top=-1*berth+"px"}},render:function(){if(this._renderHeight!==undefined&&this.graph.height!==this._renderHeight)this.setSize({auto:true});this.ticks=this.staticTicks||Math.floor(this.graph.height/this.pixelsPerTick);var axis=this._drawAxis(this.graph.y);this._drawGrid(axis);this._renderHeight=this.graph.height},_drawAxis:function(scale){var axis=d3.svg.axis().scale(scale).orient(this.orientation);axis.tickFormat(this.tickFormat);if(this.tickValues)axis.tickValues(this.tickValues);if(this.orientation=="left"){var berth=this.height*this.berthRate;var transform="translate("+this.width+", "+berth+")"}if(this.element){this.vis.selectAll("*").remove()}this.vis.append("svg:g").attr("class",["y_ticks",this.ticksTreatment].join(" ")).attr("transform",transform).call(axis.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize));return axis},_drawGrid:function(axis){var gridSize=(this.orientation=="right"?1:-1)*this.graph.width;this.graph.vis.append("svg:g").attr("class","y_grid").call(axis.ticks(this.ticks).tickSubdivide(0).tickSize(gridSize)).selectAll("text").each(function(){this.parentNode.setAttribute("data-y-value",this.textContent)
})}});Rickshaw.namespace("Rickshaw.Graph.Axis.Y.Scaled");Rickshaw.Graph.Axis.Y.Scaled=Rickshaw.Class.create(Rickshaw.Graph.Axis.Y,{initialize:function($super,args){if(typeof args.scale==="undefined"){throw new Error("Scaled requires scale")}this.scale=args.scale;if(typeof args.grid==="undefined"){this.grid=true}else{this.grid=args.grid}$super(args)},_drawAxis:function($super,scale){var domain=this.scale.domain();var renderDomain=this.graph.renderer.domain().y;var extents=[Math.min.apply(Math,domain),Math.max.apply(Math,domain)];var extentMap=d3.scale.linear().domain([0,1]).range(extents);var adjExtents=[extentMap(renderDomain[0]),extentMap(renderDomain[1])];var adjustment=d3.scale.linear().domain(extents).range(adjExtents);var adjustedScale=this.scale.copy().domain(domain.map(adjustment)).range(scale.range());return $super(adjustedScale)},_drawGrid:function($super,axis){if(this.grid){$super(axis)}}});Rickshaw.namespace("Rickshaw.Graph.Behavior.Series.Highlight");Rickshaw.Graph.Behavior.Series.Highlight=function(args){this.graph=args.graph;this.legend=args.legend;var self=this;var colorSafe={};var activeLine=null;var disabledColor=args.disabledColor||function(seriesColor){return d3.interpolateRgb(seriesColor,d3.rgb("#d8d8d8"))(.8).toString()};this.addHighlightEvents=function(l){l.element.addEventListener("mouseover",function(e){if(activeLine)return;else activeLine=l;self.legend.lines.forEach(function(line){if(l===line){if(self.graph.renderer.unstack&&(line.series.renderer?line.series.renderer.unstack:true)){var seriesIndex=self.graph.series.indexOf(line.series);line.originalIndex=seriesIndex;var series=self.graph.series.splice(seriesIndex,1)[0];self.graph.series.push(series)}return}colorSafe[line.series.name]=colorSafe[line.series.name]||line.series.color;line.series.color=disabledColor(line.series.color)});self.graph.update()},false);l.element.addEventListener("mouseout",function(e){if(!activeLine)return;else activeLine=null;self.legend.lines.forEach(function(line){if(l===line&&line.hasOwnProperty("originalIndex")){var series=self.graph.series.pop();self.graph.series.splice(line.originalIndex,0,series);delete line.originalIndex}if(colorSafe[line.series.name]){line.series.color=colorSafe[line.series.name]}});self.graph.update()},false)};if(this.legend){this.legend.lines.forEach(function(l){self.addHighlightEvents(l)})}};Rickshaw.namespace("Rickshaw.Graph.Behavior.Series.Order");Rickshaw.Graph.Behavior.Series.Order=function(args){this.graph=args.graph;this.legend=args.legend;var self=this;if(typeof window.jQuery=="undefined"){throw"couldn't find jQuery at window.jQuery"}if(typeof window.jQuery.ui=="undefined"){throw"couldn't find jQuery UI at window.jQuery.ui"}jQuery(function(){jQuery(self.legend.list).sortable({containment:"parent",tolerance:"pointer",update:function(event,ui){var series=[];jQuery(self.legend.list).find("li").each(function(index,item){if(!item.series)return;series.push(item.series)});for(var i=self.graph.series.length-1;i>=0;i--){self.graph.series[i]=series.shift()}self.graph.update()}});jQuery(self.legend.list).disableSelection()});this.graph.onUpdate(function(){var h=window.getComputedStyle(self.legend.element).height;self.legend.element.style.height=h})};Rickshaw.namespace("Rickshaw.Graph.Behavior.Series.Toggle");Rickshaw.Graph.Behavior.Series.Toggle=function(args){this.graph=args.graph;this.legend=args.legend;var self=this;this.addAnchor=function(line){var anchor=document.createElement("a");anchor.innerHTML="&#10004;";anchor.classList.add("action");line.element.insertBefore(anchor,line.element.firstChild);anchor.onclick=function(e){if(line.series.disabled){line.series.enable();line.element.classList.remove("disabled")}else{if(this.graph.series.filter(function(s){return!s.disabled}).length<=1)return;line.series.disable();line.element.classList.add("disabled")}self.graph.update()}.bind(this);var label=line.element.getElementsByTagName("span")[0];label.onclick=function(e){var disableAllOtherLines=line.series.disabled;if(!disableAllOtherLines){for(var i=0;i<self.legend.lines.length;i++){var l=self.legend.lines[i];if(line.series===l.series){}else if(l.series.disabled){}else{disableAllOtherLines=true;break}}}if(disableAllOtherLines){line.series.enable();line.element.classList.remove("disabled");self.legend.lines.forEach(function(l){if(line.series===l.series){}else{l.series.disable();l.element.classList.add("disabled")}})}else{self.legend.lines.forEach(function(l){l.series.enable();l.element.classList.remove("disabled")})}self.graph.update()}};if(this.legend){var $=jQuery;if(typeof $!="undefined"&&$(this.legend.list).sortable){$(this.legend.list).sortable({start:function(event,ui){ui.item.bind("no.onclick",function(event){event.preventDefault()})},stop:function(event,ui){setTimeout(function(){ui.item.unbind("no.onclick")},250)}})}this.legend.lines.forEach(function(l){self.addAnchor(l)})}this._addBehavior=function(){this.graph.series.forEach(function(s){s.disable=function(){if(self.graph.series.length<=1){throw"only one series left"}s.disabled=true};s.enable=function(){s.disabled=false}})};this._addBehavior();this.updateBehaviour=function(){this._addBehavior()}};Rickshaw.namespace("Rickshaw.Graph.HoverDetail");Rickshaw.Graph.HoverDetail=Rickshaw.Class.create({initialize:function(args){var graph=this.graph=args.graph;this.xFormatter=args.xFormatter||function(x){return new Date(x*1e3).toUTCString()};this.yFormatter=args.yFormatter||function(y){return y===null?y:y.toFixed(2)};var element=this.element=document.createElement("div");element.className="detail";this.visible=true;graph.element.appendChild(element);this.lastEvent=null;this._addListeners();this.onShow=args.onShow;this.onHide=args.onHide;this.onRender=args.onRender;this.formatter=args.formatter||this.formatter},formatter:function(series,x,y,formattedX,formattedY,d){return series.name+":&nbsp;"+formattedY},update:function(e){e=e||this.lastEvent;if(!e)return;this.lastEvent=e;if(!e.target.nodeName.match(/^(path|svg|rect|circle)$/))return;var graph=this.graph;var eventX=e.offsetX||e.layerX;var eventY=e.offsetY||e.layerY;var j=0;var points=[];var nearestPoint;this.graph.series.active().forEach(function(series){var data=this.graph.stackedData[j++];if(!data.length)return;var domainX=graph.x.invert(eventX);var domainIndexScale=d3.scale.linear().domain([data[0].x,data.slice(-1)[0].x]).range([0,data.length-1]);var approximateIndex=Math.round(domainIndexScale(domainX));if(approximateIndex==data.length-1)approximateIndex--;var dataIndex=Math.min(approximateIndex||0,data.length-1);for(var i=approximateIndex;i<data.length-1;){if(!data[i]||!data[i+1])break;if(data[i].x<=domainX&&data[i+1].x>domainX){dataIndex=Math.abs(domainX-data[i].x)<Math.abs(domainX-data[i+1].x)?i:i+1;break}if(data[i+1].x<=domainX){i++}else{i--}}if(dataIndex<0)dataIndex=0;var value=data[dataIndex];var distance=Math.sqrt(Math.pow(Math.abs(graph.x(value.x)-eventX),2)+Math.pow(Math.abs(graph.y(value.y+value.y0)-eventY),2));var xFormatter=series.xFormatter||this.xFormatter;var yFormatter=series.yFormatter||this.yFormatter;var point={formattedXValue:xFormatter(value.x),formattedYValue:yFormatter(series.scale?series.scale.invert(value.y):value.y),series:series,value:value,distance:distance,order:j,name:series.name};if(!nearestPoint||distance<nearestPoint.distance){nearestPoint=point}points.push(point)},this);if(!nearestPoint)return;nearestPoint.active=true;var domainX=nearestPoint.value.x;var formattedXValue=nearestPoint.formattedXValue;this.element.innerHTML="";this.element.style.left=graph.x(domainX)+"px";this.visible&&this.render({points:points,detail:points,mouseX:eventX,mouseY:eventY,formattedXValue:formattedXValue,domainX:domainX})},hide:function(){this.visible=false;this.element.classList.add("inactive");if(typeof this.onHide=="function"){this.onHide()}},show:function(){this.visible=true;this.element.classList.remove("inactive");if(typeof this.onShow=="function"){this.onShow()}},render:function(args){var graph=this.graph;var points=args.points;var point=points.filter(function(p){return p.active}).shift();if(point.value.y===null)return;var formattedXValue=point.formattedXValue;var formattedYValue=point.formattedYValue;this.element.innerHTML="";this.element.style.left=graph.x(point.value.x)+"px";var xLabel=document.createElement("div");xLabel.className="x_label";xLabel.innerHTML=formattedXValue;this.element.appendChild(xLabel);var item=document.createElement("div");item.className="item";var series=point.series;var actualY=series.scale?series.scale.invert(point.value.y):point.value.y;item.innerHTML=this.formatter(series,point.value.x,actualY,formattedXValue,formattedYValue,point);item.style.top=this.graph.y(point.value.y0+point.value.y)+"px";this.element.appendChild(item);var dot=document.createElement("div");dot.className="dot";dot.style.top=item.style.top;dot.style.borderColor=series.color;this.element.appendChild(dot);if(point.active){item.classList.add("active");dot.classList.add("active")}var alignables=[xLabel,item];alignables.forEach(function(el){el.classList.add("left")});this.show();var leftAlignError=this._calcLayoutError(alignables);if(leftAlignError>0){alignables.forEach(function(el){el.classList.remove("left");el.classList.add("right")});var rightAlignError=this._calcLayoutError(alignables);if(rightAlignError>leftAlignError){alignables.forEach(function(el){el.classList.remove("right");el.classList.add("left")})}}if(typeof this.onRender=="function"){this.onRender(args)}},_calcLayoutError:function(alignables){var parentRect=this.element.parentNode.getBoundingClientRect();var error=0;var alignRight=alignables.forEach(function(el){var rect=el.getBoundingClientRect();if(!rect.width){return}if(rect.right>parentRect.right){error+=rect.right-parentRect.right}if(rect.left<parentRect.left){error+=parentRect.left-rect.left}});return error},_addListeners:function(){this.graph.element.addEventListener("mousemove",function(e){this.visible=true;this.update(e)}.bind(this),false);this.graph.onUpdate(function(){this.update()}.bind(this));this.graph.element.addEventListener("mouseout",function(e){if(e.relatedTarget&&!(e.relatedTarget.compareDocumentPosition(this.graph.element)&Node.DOCUMENT_POSITION_CONTAINS)){this.hide()}}.bind(this),false)}});Rickshaw.namespace("Rickshaw.Graph.JSONP");Rickshaw.Graph.JSONP=Rickshaw.Class.create(Rickshaw.Graph.Ajax,{request:function(){jQuery.ajax({url:this.dataURL,dataType:"jsonp",success:this.success.bind(this),error:this.error.bind(this)})}});Rickshaw.namespace("Rickshaw.Graph.Legend");Rickshaw.Graph.Legend=Rickshaw.Class.create({className:"rickshaw_legend",initialize:function(args){this.element=args.element;this.graph=args.graph;this.naturalOrder=args.naturalOrder;this.element.classList.add(this.className);this.list=document.createElement("ul");this.element.appendChild(this.list);this.render();this.graph.onUpdate(function(){})},render:function(){var self=this;while(this.list.firstChild){this.list.removeChild(this.list.firstChild)}this.lines=[];var series=this.graph.series.map(function(s){return s});if(!this.naturalOrder){series=series.reverse()}series.forEach(function(s){self.addLine(s)})},addLine:function(series){var line=document.createElement("li");line.className="line";if(series.disabled){line.className+=" disabled"}if(series.className){d3.select(line).classed(series.className,true)}var swatch=document.createElement("div");swatch.className="swatch";swatch.style.backgroundColor=series.color;line.appendChild(swatch);var label=document.createElement("span");label.className="label";label.innerHTML=series.name;line.appendChild(label);this.list.appendChild(line);line.series=series;if(series.noLegend){line.style.display="none"}var _line={element:line,series:series};if(this.shelving){this.shelving.addAnchor(_line);this.shelving.updateBehaviour()}if(this.highlighter){this.highlighter.addHighlightEvents(_line)}this.lines.push(_line);return line}});Rickshaw.namespace("Rickshaw.Graph.RangeSlider");Rickshaw.Graph.RangeSlider=Rickshaw.Class.create({initialize:function(args){var element=this.element=args.element;var graph=this.graph=args.graph;this.slideCallbacks=[];this.build();graph.onUpdate(function(){this.update()}.bind(this))},build:function(){var element=this.element;var graph=this.graph;var $=jQuery;var domain=graph.dataDomain();var self=this;$(function(){$(element).slider({range:true,min:domain[0],max:domain[1],values:[domain[0],domain[1]],slide:function(event,ui){if(ui.values[1]<=ui.values[0])return;graph.window.xMin=ui.values[0];graph.window.xMax=ui.values[1];graph.update();var domain=graph.dataDomain();if(domain[0]==ui.values[0]){graph.window.xMin=undefined}if(domain[1]==ui.values[1]){graph.window.xMax=undefined}self.slideCallbacks.forEach(function(callback){callback(graph,graph.window.xMin,graph.window.xMax)})}})});$(element)[0].style.width=graph.width+"px"},update:function(){var element=this.element;var graph=this.graph;var $=jQuery;var values=$(element).slider("option","values");var domain=graph.dataDomain();$(element).slider("option","min",domain[0]);$(element).slider("option","max",domain[1]);if(graph.window.xMin==null){values[0]=domain[0]}if(graph.window.xMax==null){values[1]=domain[1]}$(element).slider("option","values",values)},onSlide:function(callback){this.slideCallbacks.push(callback)}});Rickshaw.namespace("Rickshaw.Graph.RangeSlider.Preview");Rickshaw.Graph.RangeSlider.Preview=Rickshaw.Class.create({initialize:function(args){if(!args.element)throw"Rickshaw.Graph.RangeSlider.Preview needs a reference to an element";if(!args.graph&&!args.graphs)throw"Rickshaw.Graph.RangeSlider.Preview needs a reference to an graph or an array of graphs";this.element=args.element;this.element.style.position="relative";this.graphs=args.graph?[args.graph]:args.graphs;this.defaults={height:75,width:400,gripperColor:undefined,frameTopThickness:3,frameHandleThickness:10,frameColor:"#d4d4d4",frameOpacity:1,minimumFrameWidth:0,heightRatio:.2};this.heightRatio=args.heightRatio||this.defaults.heightRatio;this.defaults.gripperColor=d3.rgb(this.defaults.frameColor).darker().toString();this.configureCallbacks=[];this.slideCallbacks=[];this.previews=[];if(!args.width)this.widthFromGraph=true;if(!args.height)this.heightFromGraph=true;if(this.widthFromGraph||this.heightFromGraph){this.graphs[0].onConfigure(function(){this.configure(args);this.render()}.bind(this))}args.width=args.width||this.graphs[0].width||this.defaults.width;args.height=args.height||this.graphs[0].height*this.heightRatio||this.defaults.height;this.configure(args);this.render()},onSlide:function(callback){this.slideCallbacks.push(callback)},onConfigure:function(callback){this.configureCallbacks.push(callback)},configure:function(args){this.config=this.config||{};this.configureCallbacks.forEach(function(callback){callback(args)});Rickshaw.keys(this.defaults).forEach(function(k){this.config[k]=k in args?args[k]:k in this.config?this.config[k]:this.defaults[k]},this);if("width"in args||"height"in args){if(this.widthFromGraph){this.config.width=this.graphs[0].width}if(this.heightFromGraph){this.config.height=this.graphs[0].height*this.heightRatio;this.previewHeight=this.config.height}this.previews.forEach(function(preview){var height=this.previewHeight/this.graphs.length-this.config.frameTopThickness*2;var width=this.config.width-this.config.frameHandleThickness*2;preview.setSize({width:width,height:height});if(this.svg){var svgHeight=height+this.config.frameHandleThickness*2;var svgWidth=width+this.config.frameHandleThickness*2;this.svg.style("width",svgWidth+"px");this.svg.style("height",svgHeight+"px")}},this)}},render:function(){var self=this;this.svg=d3.select(this.element).selectAll("svg.rickshaw_range_slider_preview").data([null]);this.previewHeight=this.config.height-this.config.frameTopThickness*2;this.previewWidth=this.config.width-this.config.frameHandleThickness*2;this.currentFrame=[0,this.previewWidth];var buildGraph=function(parent,index){var graphArgs=Rickshaw.extend({},parent.config);var height=self.previewHeight/self.graphs.length;var renderer=parent.renderer.name;Rickshaw.extend(graphArgs,{element:this.appendChild(document.createElement("div")),height:height,width:self.previewWidth,series:parent.series,renderer:renderer});var graph=new Rickshaw.Graph(graphArgs);self.previews.push(graph);parent.onUpdate(function(){graph.render();self.render()});parent.onConfigure(function(args){delete args.height;args.width=args.width-self.config.frameHandleThickness*2;graph.configure(args);graph.render()});graph.render()};var graphContainer=d3.select(this.element).selectAll("div.rickshaw_range_slider_preview_container").data(this.graphs);var translateCommand="translate("+this.config.frameHandleThickness+"px, "+this.config.frameTopThickness+"px)";graphContainer.enter().append("div").classed("rickshaw_range_slider_preview_container",true).style("-webkit-transform",translateCommand).style("-moz-transform",translateCommand).style("-ms-transform",translateCommand).style("transform",translateCommand).each(buildGraph);graphContainer.exit().remove();var masterGraph=this.graphs[0];var domainScale=d3.scale.linear().domain([0,this.previewWidth]).range(masterGraph.dataDomain());var currentWindow=[masterGraph.window.xMin,masterGraph.window.xMax];this.currentFrame[0]=currentWindow[0]===undefined?0:Math.round(domainScale.invert(currentWindow[0]));if(this.currentFrame[0]<0)this.currentFrame[0]=0;this.currentFrame[1]=currentWindow[1]===undefined?this.previewWidth:domainScale.invert(currentWindow[1]);if(this.currentFrame[1]-this.currentFrame[0]<self.config.minimumFrameWidth){this.currentFrame[1]=(this.currentFrame[0]||0)+self.config.minimumFrameWidth}this.svg.enter().append("svg").classed("rickshaw_range_slider_preview",true).style("height",this.config.height+"px").style("width",this.config.width+"px").style("position","absolute").style("top",0);this._renderDimming();this._renderFrame();this._renderGrippers();this._renderHandles();this._renderMiddle();this._registerMouseEvents()},_renderDimming:function(){var element=this.svg.selectAll("path.dimming").data([null]);element.enter().append("path").attr("fill","white").attr("fill-opacity","0.7").attr("fill-rule","evenodd").classed("dimming",true);var path="";path+=" M "+this.config.frameHandleThickness+" "+this.config.frameTopThickness;path+=" h "+this.previewWidth;path+=" v "+this.previewHeight;path+=" h "+-this.previewWidth;path+=" z ";path+=" M "+Math.max(this.currentFrame[0],this.config.frameHandleThickness)+" "+this.config.frameTopThickness;path+=" H "+Math.min(this.currentFrame[1]+this.config.frameHandleThickness*2,this.previewWidth+this.config.frameHandleThickness);path+=" v "+this.previewHeight;path+=" H "+Math.max(this.currentFrame[0],this.config.frameHandleThickness);path+=" z";element.attr("d",path)},_renderFrame:function(){var element=this.svg.selectAll("path.frame").data([null]);element.enter().append("path").attr("stroke","white").attr("stroke-width","1px").attr("stroke-linejoin","round").attr("fill",this.config.frameColor).attr("fill-opacity",this.config.frameOpacity).attr("fill-rule","evenodd").classed("frame",true);var path="";path+=" M "+this.currentFrame[0]+" 0";path+=" H "+(this.currentFrame[1]+this.config.frameHandleThickness*2);path+=" V "+this.config.height;path+=" H "+this.currentFrame[0];path+=" z";path+=" M "+(this.currentFrame[0]+this.config.frameHandleThickness)+" "+this.config.frameTopThickness;path+=" H "+(this.currentFrame[1]+this.config.frameHandleThickness);path+=" v "+this.previewHeight;path+=" H "+(this.currentFrame[0]+this.config.frameHandleThickness);path+=" z";element.attr("d",path)},_renderGrippers:function(){var gripper=this.svg.selectAll("path.gripper").data([null]);gripper.enter().append("path").attr("stroke",this.config.gripperColor).classed("gripper",true);var path="";[.4,.6].forEach(function(spacing){path+=" M "+Math.round(this.currentFrame[0]+this.config.frameHandleThickness*spacing)+" "+Math.round(this.config.height*.3);path+=" V "+Math.round(this.config.height*.7);path+=" M "+Math.round(this.currentFrame[1]+this.config.frameHandleThickness*(1+spacing))+" "+Math.round(this.config.height*.3);path+=" V "+Math.round(this.config.height*.7)}.bind(this));gripper.attr("d",path)},_renderHandles:function(){var leftHandle=this.svg.selectAll("rect.left_handle").data([null]);leftHandle.enter().append("rect").attr("width",this.config.frameHandleThickness).style("cursor","ew-resize").style("fill-opacity","0").classed("left_handle",true);leftHandle.attr("x",this.currentFrame[0]).attr("height",this.config.height);var rightHandle=this.svg.selectAll("rect.right_handle").data([null]);rightHandle.enter().append("rect").attr("width",this.config.frameHandleThickness).style("cursor","ew-resize").style("fill-opacity","0").classed("right_handle",true);rightHandle.attr("x",this.currentFrame[1]+this.config.frameHandleThickness).attr("height",this.config.height)},_renderMiddle:function(){var middleHandle=this.svg.selectAll("rect.middle_handle").data([null]);middleHandle.enter().append("rect").style("cursor","move").style("fill-opacity","0").classed("middle_handle",true);middleHandle.attr("width",Math.max(0,this.currentFrame[1]-this.currentFrame[0])).attr("x",this.currentFrame[0]+this.config.frameHandleThickness).attr("height",this.config.height)},_registerMouseEvents:function(){var element=d3.select(this.element);var drag={target:null,start:null,stop:null,left:false,right:false,rigid:false};var self=this;function onMousemove(datum,index){drag.stop=self._getClientXFromEvent(d3.event,drag);var distanceTraveled=drag.stop-drag.start;var frameAfterDrag=self.frameBeforeDrag.slice(0);var minimumFrameWidth=self.config.minimumFrameWidth;if(drag.rigid){minimumFrameWidth=self.frameBeforeDrag[1]-self.frameBeforeDrag[0]}if(drag.left){frameAfterDrag[0]=Math.max(frameAfterDrag[0]+distanceTraveled,0)}if(drag.right){frameAfterDrag[1]=Math.min(frameAfterDrag[1]+distanceTraveled,self.previewWidth)}var currentFrameWidth=frameAfterDrag[1]-frameAfterDrag[0];if(currentFrameWidth<=minimumFrameWidth){if(drag.left){frameAfterDrag[0]=frameAfterDrag[1]-minimumFrameWidth}if(drag.right){frameAfterDrag[1]=frameAfterDrag[0]+minimumFrameWidth}if(frameAfterDrag[0]<=0){frameAfterDrag[1]-=frameAfterDrag[0];frameAfterDrag[0]=0}if(frameAfterDrag[1]>=self.previewWidth){frameAfterDrag[0]-=frameAfterDrag[1]-self.previewWidth;frameAfterDrag[1]=self.previewWidth}}self.graphs.forEach(function(graph){var domainScale=d3.scale.linear().interpolate(d3.interpolateNumber).domain([0,self.previewWidth]).range(graph.dataDomain());var windowAfterDrag=[domainScale(frameAfterDrag[0]),domainScale(frameAfterDrag[1])];self.slideCallbacks.forEach(function(callback){callback(graph,windowAfterDrag[0],windowAfterDrag[1])});if(frameAfterDrag[0]===0){windowAfterDrag[0]=undefined}if(frameAfterDrag[1]===self.previewWidth){windowAfterDrag[1]=undefined}graph.window.xMin=windowAfterDrag[0];graph.window.xMax=windowAfterDrag[1];graph.update()})}function onMousedown(){drag.target=d3.event.target;drag.start=self._getClientXFromEvent(d3.event,drag);self.frameBeforeDrag=self.currentFrame.slice();d3.event.preventDefault?d3.event.preventDefault():d3.event.returnValue=false;d3.select(document).on("mousemove.rickshaw_range_slider_preview",onMousemove);d3.select(document).on("mouseup.rickshaw_range_slider_preview",onMouseup);d3.select(document).on("touchmove.rickshaw_range_slider_preview",onMousemove);d3.select(document).on("touchend.rickshaw_range_slider_preview",onMouseup);d3.select(document).on("touchcancel.rickshaw_range_slider_preview",onMouseup)}function onMousedownLeftHandle(datum,index){drag.left=true;onMousedown()}function onMousedownRightHandle(datum,index){drag.right=true;onMousedown()}function onMousedownMiddleHandle(datum,index){drag.left=true;drag.right=true;drag.rigid=true;onMousedown()}function onMouseup(datum,index){d3.select(document).on("mousemove.rickshaw_range_slider_preview",null);d3.select(document).on("mouseup.rickshaw_range_slider_preview",null);d3.select(document).on("touchmove.rickshaw_range_slider_preview",null);d3.select(document).on("touchend.rickshaw_range_slider_preview",null);d3.select(document).on("touchcancel.rickshaw_range_slider_preview",null);delete self.frameBeforeDrag;drag.left=false;drag.right=false;drag.rigid=false}element.select("rect.left_handle").on("mousedown",onMousedownLeftHandle);element.select("rect.right_handle").on("mousedown",onMousedownRightHandle);element.select("rect.middle_handle").on("mousedown",onMousedownMiddleHandle);element.select("rect.left_handle").on("touchstart",onMousedownLeftHandle);element.select("rect.right_handle").on("touchstart",onMousedownRightHandle);element.select("rect.middle_handle").on("touchstart",onMousedownMiddleHandle)},_getClientXFromEvent:function(event,drag){switch(event.type){case"touchstart":case"touchmove":var touchList=event.changedTouches;var touch=null;for(var touchIndex=0;touchIndex<touchList.length;touchIndex++){if(touchList[touchIndex].target===drag.target){touch=touchList[touchIndex];break}}return touch!==null?touch.clientX:undefined;default:return event.clientX}}});Rickshaw.namespace("Rickshaw.Graph.Renderer");Rickshaw.Graph.Renderer=Rickshaw.Class.create({initialize:function(args){this.graph=args.graph;this.tension=args.tension||this.tension;this.configure(args)},seriesPathFactory:function(){},seriesStrokeFactory:function(){},defaults:function(){return{tension:.8,strokeWidth:2,unstack:true,padding:{top:.01,right:0,bottom:.01,left:0},stroke:false,fill:false}},domain:function(data){var stackedData=data||this.graph.stackedData||this.graph.stackData();var xMin=+Infinity;var xMax=-Infinity;var yMin=+Infinity;var yMax=-Infinity;stackedData.forEach(function(series){series.forEach(function(d){if(d.y==null)return;var y=d.y+d.y0;if(y<yMin)yMin=y;if(y>yMax)yMax=y});if(!series.length)return;if(series[0].x<xMin)xMin=series[0].x;if(series[series.length-1].x>xMax)xMax=series[series.length-1].x});xMin-=(xMax-xMin)*this.padding.left;xMax+=(xMax-xMin)*this.padding.right;yMin=this.graph.min==="auto"?yMin:this.graph.min||0;yMax=this.graph.max===undefined?yMax:this.graph.max;if(this.graph.min==="auto"||yMin<0){yMin-=(yMax-yMin)*this.padding.bottom}if(this.graph.max===undefined){yMax+=(yMax-yMin)*this.padding.top}return{x:[xMin,xMax],y:[yMin,yMax]}},render:function(args){args=args||{};var graph=this.graph;var series=args.series||graph.series;var vis=args.vis||graph.vis;vis.selectAll("*").remove();var data=series.filter(function(s){return!s.disabled}).map(function(s){return s.stack});var pathNodes=vis.selectAll("path.path").data(data).enter().append("svg:path").classed("path",true).attr("d",this.seriesPathFactory());if(this.stroke){var strokeNodes=vis.selectAll("path.stroke").data(data).enter().append("svg:path").classed("stroke",true).attr("d",this.seriesStrokeFactory())}var i=0;series.forEach(function(series){if(series.disabled)return;series.path=pathNodes[0][i];if(this.stroke)series.stroke=strokeNodes[0][i];this._styleSeries(series);i++},this)},_styleSeries:function(series){var fill=this.fill?series.color:"none";var stroke=this.stroke?series.color:"none";series.path.setAttribute("fill",fill);series.path.setAttribute("stroke",stroke);series.path.setAttribute("stroke-width",this.strokeWidth);if(series.className){d3.select(series.path).classed(series.className,true)}if(series.className&&this.stroke){d3.select(series.stroke).classed(series.className,true)}},configure:function(args){args=args||{};Rickshaw.keys(this.defaults()).forEach(function(key){if(!args.hasOwnProperty(key)){this[key]=this[key]||this.graph[key]||this.defaults()[key];return}if(typeof this.defaults()[key]=="object"){Rickshaw.keys(this.defaults()[key]).forEach(function(k){this[key][k]=args[key][k]!==undefined?args[key][k]:this[key][k]!==undefined?this[key][k]:this.defaults()[key][k]},this)}else{this[key]=args[key]!==undefined?args[key]:this[key]!==undefined?this[key]:this.graph[key]!==undefined?this.graph[key]:this.defaults()[key]}},this)},setStrokeWidth:function(strokeWidth){if(strokeWidth!==undefined){this.strokeWidth=strokeWidth}},setTension:function(tension){if(tension!==undefined){this.tension=tension}}});Rickshaw.namespace("Rickshaw.Graph.Renderer.Line");Rickshaw.Graph.Renderer.Line=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"line",defaults:function($super){return Rickshaw.extend($super(),{unstack:true,fill:false,stroke:true})},seriesPathFactory:function(){var graph=this.graph;var factory=d3.svg.line().x(function(d){return graph.x(d.x)}).y(function(d){return graph.y(d.y)}).interpolate(this.graph.interpolation).tension(this.tension);factory.defined&&factory.defined(function(d){return d.y!==null});return factory}});Rickshaw.namespace("Rickshaw.Graph.Renderer.Stack");Rickshaw.Graph.Renderer.Stack=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"stack",defaults:function($super){return Rickshaw.extend($super(),{fill:true,stroke:false,unstack:false})},seriesPathFactory:function(){var graph=this.graph;var factory=d3.svg.area().x(function(d){return graph.x(d.x)}).y0(function(d){return graph.y(d.y0)}).y1(function(d){return graph.y(d.y+d.y0)}).interpolate(this.graph.interpolation).tension(this.tension);factory.defined&&factory.defined(function(d){return d.y!==null});return factory}});Rickshaw.namespace("Rickshaw.Graph.Renderer.Bar");Rickshaw.Graph.Renderer.Bar=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"bar",defaults:function($super){var defaults=Rickshaw.extend($super(),{gapSize:.05,unstack:false});delete defaults.tension;return defaults},initialize:function($super,args){args=args||{};this.gapSize=args.gapSize||this.gapSize;$super(args)},domain:function($super){var domain=$super();var frequentInterval=this._frequentInterval(this.graph.stackedData.slice(-1).shift());domain.x[1]+=Number(frequentInterval.magnitude);return domain},barWidth:function(series){var frequentInterval=this._frequentInterval(series.stack);var barWidth=this.graph.x.magnitude(frequentInterval.magnitude)*(1-this.gapSize);return barWidth},render:function(args){args=args||{};var graph=this.graph;var series=args.series||graph.series;var vis=args.vis||graph.vis;vis.selectAll("*").remove();var barWidth=this.barWidth(series.active()[0]);var barXOffset=0;var activeSeriesCount=series.filter(function(s){return!s.disabled}).length;var seriesBarWidth=this.unstack?barWidth/activeSeriesCount:barWidth;var transform=function(d){var matrix=[1,0,0,d.y<0?-1:1,0,d.y<0?graph.y.magnitude(Math.abs(d.y))*2:0];return"matrix("+matrix.join(",")+")"};series.forEach(function(series){if(series.disabled)return;var barWidth=this.barWidth(series);var nodes=vis.selectAll("path").data(series.stack.filter(function(d){return d.y!==null})).enter().append("svg:rect").attr("x",function(d){return graph.x(d.x)+barXOffset}).attr("y",function(d){return graph.y(d.y0+Math.abs(d.y))*(d.y<0?-1:1)}).attr("width",seriesBarWidth).attr("height",function(d){return graph.y.magnitude(Math.abs(d.y))}).attr("transform",transform);Array.prototype.forEach.call(nodes[0],function(n){n.setAttribute("fill",series.color)});if(this.unstack)barXOffset+=seriesBarWidth},this)},_frequentInterval:function(data){var intervalCounts={};for(var i=0;i<data.length-1;i++){var interval=data[i+1].x-data[i].x;intervalCounts[interval]=intervalCounts[interval]||0;intervalCounts[interval]++}var frequentInterval={count:0,magnitude:1};Rickshaw.keys(intervalCounts).forEach(function(i){if(frequentInterval.count<intervalCounts[i]){frequentInterval={count:intervalCounts[i],magnitude:i}}});return frequentInterval}});Rickshaw.namespace("Rickshaw.Graph.Renderer.Area");Rickshaw.Graph.Renderer.Area=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"area",defaults:function($super){return Rickshaw.extend($super(),{unstack:false,fill:false,stroke:false})},seriesPathFactory:function(){var graph=this.graph;var factory=d3.svg.area().x(function(d){return graph.x(d.x)}).y0(function(d){return graph.y(d.y0)}).y1(function(d){return graph.y(d.y+d.y0)}).interpolate(graph.interpolation).tension(this.tension);
factory.defined&&factory.defined(function(d){return d.y!==null});return factory},seriesStrokeFactory:function(){var graph=this.graph;var factory=d3.svg.line().x(function(d){return graph.x(d.x)}).y(function(d){return graph.y(d.y+d.y0)}).interpolate(graph.interpolation).tension(this.tension);factory.defined&&factory.defined(function(d){return d.y!==null});return factory},render:function(args){args=args||{};var graph=this.graph;var series=args.series||graph.series;var vis=args.vis||graph.vis;vis.selectAll("*").remove();var method=this.unstack?"append":"insert";var data=series.filter(function(s){return!s.disabled}).map(function(s){return s.stack});var nodes=vis.selectAll("path").data(data).enter()[method]("svg:g","g");nodes.append("svg:path").attr("d",this.seriesPathFactory()).attr("class","area");if(this.stroke){nodes.append("svg:path").attr("d",this.seriesStrokeFactory()).attr("class","line")}var i=0;series.forEach(function(series){if(series.disabled)return;series.path=nodes[0][i++];this._styleSeries(series)},this)},_styleSeries:function(series){if(!series.path)return;d3.select(series.path).select(".area").attr("fill",series.color);if(this.stroke){d3.select(series.path).select(".line").attr("fill","none").attr("stroke",series.stroke||d3.interpolateRgb(series.color,"black")(.125)).attr("stroke-width",this.strokeWidth)}if(series.className){series.path.setAttribute("class",series.className)}}});Rickshaw.namespace("Rickshaw.Graph.Renderer.ScatterPlot");Rickshaw.Graph.Renderer.ScatterPlot=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"scatterplot",defaults:function($super){return Rickshaw.extend($super(),{unstack:true,fill:true,stroke:false,padding:{top:.01,right:.01,bottom:.01,left:.01},dotSize:4})},initialize:function($super,args){$super(args)},render:function(args){args=args||{};var graph=this.graph;var series=args.series||graph.series;var vis=args.vis||graph.vis;var dotSize=this.dotSize;vis.selectAll("*").remove();series.forEach(function(series){if(series.disabled)return;var nodes=vis.selectAll("path").data(series.stack.filter(function(d){return d.y!==null})).enter().append("svg:circle").attr("cx",function(d){return graph.x(d.x)}).attr("cy",function(d){return graph.y(d.y)}).attr("r",function(d){return"r"in d?d.r:dotSize});if(series.className){nodes.classed(series.className,true)}Array.prototype.forEach.call(nodes[0],function(n){n.setAttribute("fill",series.color)})},this)}});Rickshaw.namespace("Rickshaw.Graph.Renderer.Multi");Rickshaw.Graph.Renderer.Multi=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"multi",initialize:function($super,args){$super(args)},defaults:function($super){return Rickshaw.extend($super(),{unstack:true,fill:false,stroke:true})},configure:function($super,args){args=args||{};this.config=args;$super(args)},domain:function($super){this.graph.stackData();var domains=[];var groups=this._groups();this._stack(groups);groups.forEach(function(group){var data=group.series.filter(function(s){return!s.disabled}).map(function(s){return s.stack});if(!data.length)return;var domain=null;if(group.renderer&&group.renderer.domain){domain=group.renderer.domain(data)}else{domain=$super(data)}domains.push(domain)});var xMin=d3.min(domains.map(function(d){return d.x[0]}));var xMax=d3.max(domains.map(function(d){return d.x[1]}));var yMin=d3.min(domains.map(function(d){return d.y[0]}));var yMax=d3.max(domains.map(function(d){return d.y[1]}));return{x:[xMin,xMax],y:[yMin,yMax]}},_groups:function(){var graph=this.graph;var renderGroups={};graph.series.forEach(function(series){if(series.disabled)return;if(!renderGroups[series.renderer]){var ns="http://www.w3.org/2000/svg";var vis=document.createElementNS(ns,"g");graph.vis[0][0].appendChild(vis);var renderer=graph._renderers[series.renderer];var config={};var defaults=[this.defaults(),renderer.defaults(),this.config,this.graph];defaults.forEach(function(d){Rickshaw.extend(config,d)});renderer.configure(config);renderGroups[series.renderer]={renderer:renderer,series:[],vis:d3.select(vis)}}renderGroups[series.renderer].series.push(series)},this);var groups=[];Object.keys(renderGroups).forEach(function(key){var group=renderGroups[key];groups.push(group)});return groups},_stack:function(groups){groups.forEach(function(group){var series=group.series.filter(function(series){return!series.disabled});var data=series.map(function(series){return series.stack});if(!group.renderer.unstack){var layout=d3.layout.stack();var stackedData=Rickshaw.clone(layout(data));series.forEach(function(series,index){series._stack=Rickshaw.clone(stackedData[index])})}},this);return groups},render:function(){this.graph.series.forEach(function(series){if(!series.renderer){throw new Error("Each series needs a renderer for graph 'multi' renderer")}});this.graph.vis.selectAll("*").remove();var groups=this._groups();groups=this._stack(groups);groups.forEach(function(group){var series=group.series.filter(function(series){return!series.disabled});series.active=function(){return series};group.renderer.render({series:series,vis:group.vis});series.forEach(function(s){s.stack=s._stack||s.stack||s.data})})}});Rickshaw.namespace("Rickshaw.Graph.Renderer.LinePlot");Rickshaw.Graph.Renderer.LinePlot=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"lineplot",defaults:function($super){return Rickshaw.extend($super(),{unstack:true,fill:false,stroke:true,padding:{top:.01,right:.01,bottom:.01,left:.01},dotSize:3,strokeWidth:2})},seriesPathFactory:function(){var graph=this.graph;var factory=d3.svg.line().x(function(d){return graph.x(d.x)}).y(function(d){return graph.y(d.y)}).interpolate(this.graph.interpolation).tension(this.tension);factory.defined&&factory.defined(function(d){return d.y!==null});return factory},render:function(args){args=args||{};var graph=this.graph;var series=args.series||graph.series;var vis=args.vis||graph.vis;var dotSize=this.dotSize;vis.selectAll("*").remove();var data=series.filter(function(s){return!s.disabled}).map(function(s){return s.stack});var nodes=vis.selectAll("path").data(data).enter().append("svg:path").attr("d",this.seriesPathFactory());var i=0;series.forEach(function(series){if(series.disabled)return;series.path=nodes[0][i++];this._styleSeries(series)},this);series.forEach(function(series){if(series.disabled)return;var nodes=vis.selectAll("x").data(series.stack.filter(function(d){return d.y!==null})).enter().append("svg:circle").attr("cx",function(d){return graph.x(d.x)}).attr("cy",function(d){return graph.y(d.y)}).attr("r",function(d){return"r"in d?d.r:dotSize});Array.prototype.forEach.call(nodes[0],function(n){if(!n)return;n.setAttribute("data-color",series.color);n.setAttribute("fill","white");n.setAttribute("stroke",series.color);n.setAttribute("stroke-width",this.strokeWidth)}.bind(this))},this)}});Rickshaw.namespace("Rickshaw.Graph.Smoother");Rickshaw.Graph.Smoother=Rickshaw.Class.create({initialize:function(args){this.graph=args.graph;this.element=args.element;this.aggregationScale=1;this.build();this.graph.stackData.hooks.data.push({name:"smoother",orderPosition:50,f:this.transformer.bind(this)})},build:function(){var self=this;var $=jQuery;if(this.element){$(function(){$(self.element).slider({min:1,max:100,slide:function(event,ui){self.setScale(ui.value)}})})}},setScale:function(scale){if(scale<1){throw"scale out of range: "+scale}this.aggregationScale=scale;this.graph.update()},transformer:function(data){if(this.aggregationScale==1)return data;var aggregatedData=[];data.forEach(function(seriesData){var aggregatedSeriesData=[];while(seriesData.length){var avgX=0,avgY=0;var slice=seriesData.splice(0,this.aggregationScale);slice.forEach(function(d){avgX+=d.x/slice.length;avgY+=d.y/slice.length});aggregatedSeriesData.push({x:avgX,y:avgY})}aggregatedData.push(aggregatedSeriesData)}.bind(this));return aggregatedData}});Rickshaw.namespace("Rickshaw.Graph.Socketio");Rickshaw.Graph.Socketio=Rickshaw.Class.create(Rickshaw.Graph.Ajax,{request:function(){var socket=io.connect(this.dataURL);var self=this;socket.on("rickshaw",function(data){self.success(data)})}});Rickshaw.namespace("Rickshaw.Series");Rickshaw.Series=Rickshaw.Class.create(Array,{initialize:function(data,palette,options){options=options||{};this.palette=new Rickshaw.Color.Palette(palette);this.timeBase=typeof options.timeBase==="undefined"?Math.floor((new Date).getTime()/1e3):options.timeBase;var timeInterval=typeof options.timeInterval=="undefined"?1e3:options.timeInterval;this.setTimeInterval(timeInterval);if(data&&typeof data=="object"&&Array.isArray(data)){data.forEach(function(item){this.addItem(item)},this)}},addItem:function(item){if(typeof item.name==="undefined"){throw"addItem() needs a name"}item.color=item.color||this.palette.color(item.name);item.data=item.data||[];if(item.data.length===0&&this.length&&this.getIndex()>0){this[0].data.forEach(function(plot){item.data.push({x:plot.x,y:0})})}else if(item.data.length===0){item.data.push({x:this.timeBase-(this.timeInterval||0),y:0})}this.push(item);if(this.legend){this.legend.addLine(this.itemByName(item.name))}},addData:function(data,x){var index=this.getIndex();Rickshaw.keys(data).forEach(function(name){if(!this.itemByName(name)){this.addItem({name:name})}},this);this.forEach(function(item){item.data.push({x:x||(index*this.timeInterval||1)+this.timeBase,y:data[item.name]||0})},this)},getIndex:function(){return this[0]&&this[0].data&&this[0].data.length?this[0].data.length:0},itemByName:function(name){for(var i=0;i<this.length;i++){if(this[i].name==name)return this[i]}},setTimeInterval:function(iv){this.timeInterval=iv/1e3},setTimeBase:function(t){this.timeBase=t},dump:function(){var data={timeBase:this.timeBase,timeInterval:this.timeInterval,items:[]};this.forEach(function(item){var newItem={color:item.color,name:item.name,data:[]};item.data.forEach(function(plot){newItem.data.push({x:plot.x,y:plot.y})});data.items.push(newItem)});return data},load:function(data){if(data.timeInterval){this.timeInterval=data.timeInterval}if(data.timeBase){this.timeBase=data.timeBase}if(data.items){data.items.forEach(function(item){this.push(item);if(this.legend){this.legend.addLine(this.itemByName(item.name))}},this)}}});Rickshaw.Series.zeroFill=function(series){Rickshaw.Series.fill(series,0)};Rickshaw.Series.fill=function(series,fill){var x;var i=0;var data=series.map(function(s){return s.data});while(i<Math.max.apply(null,data.map(function(d){return d.length}))){x=Math.min.apply(null,data.filter(function(d){return d[i]}).map(function(d){return d[i].x}));data.forEach(function(d){if(!d[i]||d[i].x!=x){d.splice(i,0,{x:x,y:fill})}});i++}};Rickshaw.namespace("Rickshaw.Series.FixedDuration");Rickshaw.Series.FixedDuration=Rickshaw.Class.create(Rickshaw.Series,{initialize:function(data,palette,options){options=options||{};if(typeof options.timeInterval==="undefined"){throw new Error("FixedDuration series requires timeInterval")}if(typeof options.maxDataPoints==="undefined"){throw new Error("FixedDuration series requires maxDataPoints")}this.palette=new Rickshaw.Color.Palette(palette);this.timeBase=typeof options.timeBase==="undefined"?Math.floor((new Date).getTime()/1e3):options.timeBase;this.setTimeInterval(options.timeInterval);if(this[0]&&this[0].data&&this[0].data.length){this.currentSize=this[0].data.length;this.currentIndex=this[0].data.length}else{this.currentSize=0;this.currentIndex=0}this.maxDataPoints=options.maxDataPoints;if(data&&typeof data=="object"&&Array.isArray(data)){data.forEach(function(item){this.addItem(item)},this);this.currentSize+=1;this.currentIndex+=1}this.timeBase-=(this.maxDataPoints-this.currentSize)*this.timeInterval;if(typeof this.maxDataPoints!=="undefined"&&this.currentSize<this.maxDataPoints){for(var i=this.maxDataPoints-this.currentSize-1;i>1;i--){this.currentSize+=1;this.currentIndex+=1;this.forEach(function(item){item.data.unshift({x:((i-1)*this.timeInterval||1)+this.timeBase,y:0,i:i})},this)}}},addData:function($super,data,x){$super(data,x);this.currentSize+=1;this.currentIndex+=1;if(this.maxDataPoints!==undefined){while(this.currentSize>this.maxDataPoints){this.dropData()}}},dropData:function(){this.forEach(function(item){item.data.splice(0,1)});this.currentSize-=1},getIndex:function(){return this.currentIndex}});return Rickshaw});        20200321005938                          "*     "*   "* ( f u n c t i o n ( r o o t , f a c t o r y ) { i f ( t y p e o f   d e f i n e = = = " f u n c t i o n " & & d e f i n e . a m d ) { d e f i n e ( [ " d 3 " ] , f u n c t i o n ( d 3 ) { r e t u r n   r o o t . R i c k s h a w = f a c t o r y ( d 3 ) } ) } e l s e   i f ( t y p e o f   e x p o r t s = = = " o b j e c t " ) { m o d u l e . e x p o r t s = f a c t o r y ( r e q u i r e ( " d 3 " ) ) } e l s e { r o o t . R i c k s h a w = f a c t o r y ( d 3 ) } } ) ( t h i s , f u n c t i o n ( d 3 ) { v a r   R i c k s h a w = { n a m e s p a c e : f u n c t i o n ( n a m e s p a c e , o b j ) { v a r   p a r t s = n a m e s p a c e . s p l i t ( " . " ) ; v a r   p a r e n t = R i c k s h a w ; f o r ( v a r   i = 1 , l e n g t h = p a r t s . l e n g t h ; i < l e n g t h ; i + + ) { v a r   c u r r e n t P a r t = p a r t s [ i ] ; p a r e n t [ c u r r e n t P a r t ] = p a r e n t [ c u r r e n t P a r t ] | | { } ; p a r e n t = p a r e n t [ c u r r e n t P a r t ] } r e t u r n   p a r e n t } , k e y s : f u n c t i o n ( o b j ) { v a r   k e y s = [ ] ; f o r ( v a r   k e y   i n   o b j ) k e y s . p u s h ( k e y ) ; r e t u r n   k e y s } , e x t e n d : f u n c t i o n ( d e s t i n a t i o n , s o u r c e ) { f o r ( v a r   p r o p e r t y   i n   s o u r c e ) { d e s t i n a t i o n [ p r o p e r t y ] = s o u r c e [ p r o p e r t y ] } r e t u r n   d e s t i n a t i o n } , c l o n e : f u n c t i o n ( o b j ) { r e t u r n   J S O N . p a r s e ( J S O N . s t r i n g i f y ( o b j ) ) } } ; ( f u n c t i o n ( g l o b a l C o n t e x t ) { v a r   _ t o S t r i n g = O b j e c t . p r o t o t y p e . t o S t r i n g , N U L L _ T Y P E = " N u l l " , U N D E F I N E D _ T Y P E = " U n d e f i n e d " , B O O L E A N _ T Y P E = " B o o l e a n " , N U M B E R _ T Y P E = " N u m b e r " , S T R I N G _ T Y P E = " S t r i n g " , O B J E C T _ T Y P E = " O b j e c t " , F U N C T I O N _ C L A S S = " [ o b j e c t   F u n c t i o n ] " ; f u n c t i o n   i s F u n c t i o n ( o b j e c t ) { r e t u r n   _ t o S t r i n g . c a l l ( o b j e c t ) = = = F U N C T I O N _ C L A S S } f u n c t i o n   e x t e n d ( d e s t i n a t i o n , s o u r c e ) { f o r ( v a r   p r o p e r t y   i n   s o u r c e ) i f ( s o u r c e . h a s O w n P r o p e r t y ( p r o p e r t y ) ) d e s t i n a t i o n [ p r o p e r t y ] = s o u r c e [ p r o p e r t y ] ; r e t u r n   d e s t i n a t i o n } f u n c t i o n   k e y s ( o b j e c t ) { i f ( T y p e ( o b j e c t ) ! = = O B J E C T _ T Y P E ) { t h r o w   n e w   T y p e E r r o r } v a r   r e s u l t s = [ ] ; f o r ( v a r   p r o p e r t y   i n   o b j e c t ) { i f ( o b j e c t . h a s O w n P r o p e r t y ( p r o p e r t y ) ) { r e s u l t s . p u s h ( p r o p e r t y ) } } r e t u r n   r e s u l t s } f u n c t i o n   T y p e ( o ) { s w i t c h ( o ) { c a s e   n u l l : r e t u r n   N U L L _ T Y P E ; c a s e   v o i d   0 : r e t u r n   U N D E F I N E D _ T Y P E } v a r   t y p e = t y p e o f   o ; s w i t c h ( t y p e ) { c a s e " b o o l e a n " : r e t u r n   B O O L E A N _ T Y P E ; c a s e " n u m b e r " : r e t u r n   N U M B E R _ T Y P E ; c a s e " s t r i n g " : r e t u r n   S T R I N G _ T Y P E } r e t u r n   O B J E C T _ T Y P E } f u n c t i o n   i s U n d e f i n e d ( o b j e c t ) { r e t u r n   t y p e o f   o b j e c t = = = " u n d e f i n e d " } v a r   s l i c e = A r r a y . p r o t o t y p e . s l i c e ; f u n c t i o n   a r g u m e n t N a m e s ( f n ) { v a r   n a m e s = f n . t o S t r i n g ( ) . m a t c h ( / ^ [ \ s \ ( ] * f u n c t i o n [ ^ ( ] * \ ( ( [ ^ ) ] * ) \ ) / ) [ 1 ] . r e p l a c e ( / \ / \ / . * ? [ \ r \ n ] | \ / \ * ( ? : . | [ \ r \ n ] ) * ? \ * \ / / g , " " ) . r e p l a c e ( / \ s + / g , " " ) . s p l i t ( " , " ) ; r e t u r n   n a m e s . l e n g t h = = 1 & & ! n a m e s [ 0 ] ? [ ] : n a m e s } f u n c t i o n   w r a p ( f n , w r a p p e r ) { v a r   _ _ m e t h o d = f n ; r e t u r n   f u n c t i o n ( ) { v a r   a = u p d a t e ( [ b i n d ( _ _ m e t h o d , t h i s ) ] , a r g u m e n t s ) ; r e t u r n   w r a p p e r . a p p l y ( t h i s , a ) } } f u n c t i o n   u p d a t e ( a r r a y , a r g s ) { v a r   a r r a y L e n g t h = a r r a y . l e n g t h , l e n g t h = a r g s . l e n g t h ; w h i l e ( l e n g t h - - ) a r r a y [ a r r a y L e n g t h + l e n g t h ] = a r g s [ l e n g t h ] ; r e t u r n   a r r a y } f u n c t i o n   m e r g e ( a r r a y , a r g s ) { a r r a y = s l i c e . c a l l ( a r r a y , 0 ) ; r e t u r n   u p d a t e ( a r r a y , a r g s ) } f u n c t i o n   b i n d ( f n , c o n t e x t ) { i f ( a r g u m e n t s . l e n g t h < 2 & & i s U n d e f i n e d ( a r g u m e n t s [ 0 ] ) ) r e t u r n   t h i s ; v a r   _ _ m e t h o d = f n , a r g s = s l i c e . c a l l ( a r g u m e n t s , 2 ) ; r e t u r n   f u n c t i o n ( ) { v a r   a = m e r g e ( a r g s , a r g u m e n t s ) ; r e t u r n   _ _ m e t h o d . a p p l y ( c o n t e x t , a ) } } v a r   e m p t y F u n c t i o n = f u n c t i o n ( ) { } ; v a r   C l a s s = f u n c t i o n ( ) { v a r   I S _ D O N T E N U M _ B U G G Y = f u n c t i o n ( ) { f o r ( v a r   p   i n { t o S t r i n g : 1 } ) { i f ( p = = = " t o S t r i n g " ) r e t u r n   f a l s e } r e t u r n   t r u e } ( ) ; f u n c t i o n   s u b c l a s s ( ) { } f u n c t i o n   c r e a t e ( ) { v a r   p a r e n t = n u l l , p r o p e r t i e s = [ ] . s l i c e . a p p l y ( a r g u m e n t s ) ; i f ( i s F u n c t i o n ( p r o p e r t i e s [ 0 ] ) ) p a r e n t = p r o p e r t i e s . s h i f t ( ) ; f u n c t i o n   k l a s s ( ) { t h i s . i n i t i a l i z e . a p p l y ( t h i s , a r g u m e n t s ) } e x t e n d ( k l a s s , C l a s s . M e t h o d s ) ; k l a s s . s u p e r c l a s s = p a r e n t ; k l a s s . s u b c l a s s e s = [ ] ; i f ( p a r e n t ) { s u b c l a s s . p r o t o t y p e = p a r e n t . p r o t o t y p e ; k l a s s . p r o t o t y p e = n e w   s u b c l a s s ; t r y { p a r e n t . s u b c l a s s e s . p u s h ( k l a s s ) } c a t c h ( e ) { } } f o r ( v a r   i = 0 , l e n g t h = p r o p e r t i e s . l e n g t h ; i < l e n g t h ; i + + ) k l a s s . a d d M e t h o d s ( p r o p e r t i e s [ i ] ) ; i f ( ! k l a s s . p r o t o t y p e . i n i t i a l i z e ) k l a s s . p r o t o t y p e . i n i t i a l i z e = e m p t y F u n c t i o n ; k l a s s . p r o t o t y p e . c o n s t r u c t o r = k l a s s ; r e t u r n   k l a s s } f u n c t i o n   a d d M e t h o d s ( s o u r c e ) { v a r   a n c e s t o r = t h i s . s u p e r c l a s s & & t h i s . s u p e r c l a s s . p r o t o t y p e , p r o p e r t i e s = k e y s ( s o u r c e ) ; i f ( I S _ D O N T E N U M _ B U G G Y ) { i f ( s o u r c e . t o S t r i n g ! = O b j e c t . p r o t o t y p e . t o S t r i n g ) p r o p e r t i e s . p u s h ( " t o S t r i n g " ) ; i f ( s o u r c e . v a l u e O f ! = O b j e c t . p r o t o t y p e . v a l u e O f ) p r o p e r t i e s . p u s h ( " v a l u e O f " ) } f o r ( v a r   i = 0 , l e n g t h = p r o p e r t i e s . l e n g t h ; i < l e n g t h ; i + + ) { v a r   p r o p e r t y = p r o p e r t i e s [ i ] , v a l u e = s o u r c e [ p r o p e r t y ] ; i f ( a n c e s t o r & & i s F u n c t i o n ( v a l u e ) & & a r g u m e n t N a m e s ( v a l u e ) [ 0 ] = = " $ s u p e r " ) { v a r   m e t h o d = v a l u e ; v a l u e = w r a p ( f u n c t i o n ( m ) { r e t u r n   f u n c t i o n ( ) { r e t u r n   a n c e s t o r [ m ] . a p p l y ( t h i s , a r g u m e n t s ) } } ( p r o p e r t y ) , m e t h o d ) ; v a l u e . v a l u e O f = b i n d ( m e t h o d . v a l u e O f , m e t h o d ) ; v a l u e . t o S t r i n g = b i n d ( m e t h o d . t o S t r i n g , m e t h o d ) } t h i s . p r o t o t y p e [ p r o p e r t y ] = v a l u e } r e t u r n   t h i s } r e t u r n { c r e a t e : c r e a t e , M e t h o d s : { a d d M e t h o d s : a d d M e t h o d s } } } ( ) ; i f ( g l o b a l C o n t e x t . e x p o r t s ) { g l o b a l C o n t e x t . e x p o r t s . C l a s s = C l a s s } e l s e { g l o b a l C o n t e x t . C l a s s = C l a s s } } ) ( R i c k s h a w ) ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . C o m p a t . C l a s s L i s t " ) ; R i c k s h a w . C o m p a t . C l a s s L i s t = f u n c t i o n ( ) { i f ( t y p e o f   d o c u m e n t ! = = " u n d e f i n e d " & & ! ( " c l a s s L i s t " i n   d o c u m e n t . c r e a t e E l e m e n t ( " a " ) ) ) { ( f u n c t i o n ( v i e w ) { " u s e   s t r i c t " ; v a r   c l a s s L i s t P r o p = " c l a s s L i s t " , p r o t o P r o p = " p r o t o t y p e " , e l e m C t r P r o t o = ( v i e w . H T M L E l e m e n t | | v i e w . E l e m e n t ) [ p r o t o P r o p ] , o b j C t r = O b j e c t , s t r T r i m = S t r i n g [ p r o t o P r o p ] . t r i m | | f u n c t i o n ( ) { r e t u r n   t h i s . r e p l a c e ( / ^ \ s + | \ s + $ / g , " " ) } , a r r I n d e x O f = A r r a y [ p r o t o P r o p ] . i n d e x O f | | f u n c t i o n ( i t e m ) { v a r   i = 0 , l e n = t h i s . l e n g t h ; f o r ( ; i < l e n ; i + + ) { i f ( i   i n   t h i s & & t h i s [ i ] = = = i t e m ) { r e t u r n   i } } r e t u r n - 1 } , D O M E x = f u n c t i o n ( t y p e , m e s s a g e ) { t h i s . n a m e = t y p e ; t h i s . c o d e = D O M E x c e p t i o n [ t y p e ] ; t h i s . m e s s a g e = m e s s a g e } , c h e c k T o k e n A n d G e t I n d e x = f u n c t i o n ( c l a s s L i s t , t o k e n ) { i f ( t o k e n = = = " " ) { t h r o w   n e w   D O M E x ( " S Y N T A X _ E R R " , " A n   i n v a l i d   o r   i l l e g a l   s t r i n g   w a s   s p e c i f i e d " ) } i f ( / \ s / . t e s t ( t o k e n ) ) { t h r o w   n e w   D O M E x ( " I N V A L I D _ C H A R A C T E R _ E R R " , " S t r i n g   c o n t a i n s   a n   i n v a l i d   c h a r a c t e r " ) } r e t u r n   a r r I n d e x O f . c a l l ( c l a s s L i s t , t o k e n ) } , C l a s s L i s t = f u n c t i o n ( e l e m ) { v a r   t r i m m e d C l a s s e s = s t r T r i m . c a l l ( e l e m . c l a s s N a m e ) , c l a s s e s = t r i m m e d C l a s s e s ? t r i m m e d C l a s s e s . s p l i t ( / \ s + / ) : [ ] , i = 0 , l e n = c l a s s e s . l e n g t h ; f o r ( ; i < l e n ; i + + ) { t h i s . p u s h ( c l a s s e s [ i ] ) } t h i s . _ u p d a t e C l a s s N a m e = f u n c t i o n ( ) { e l e m . c l a s s N a m e = t h i s . t o S t r i n g ( ) } } , c l a s s L i s t P r o t o = C l a s s L i s t [ p r o t o P r o p ] = [ ] , c l a s s L i s t G e t t e r = f u n c t i o n ( ) { r e t u r n   n e w   C l a s s L i s t ( t h i s ) } ; D O M E x [ p r o t o P r o p ] = E r r o r [ p r o t o P r o p ] ; c l a s s L i s t P r o t o . i t e m = f u n c t i o n ( i ) { r e t u r n   t h i s [ i ] | | n u l l } ; c l a s s L i s t P r o t o . c o n t a i n s = f u n c t i o n ( t o k e n ) { t o k e n + = " " ; r e t u r n   c h e c k T o k e n A n d G e t I n d e x ( t h i s , t o k e n ) ! = = - 1 } ; c l a s s L i s t P r o t o . a d d = f u n c t i o n ( t o k e n ) { t o k e n + = " " ; i f ( c h e c k T o k e n A n d G e t I n d e x ( t h i s , t o k e n ) = = = - 1 ) { t h i s . p u s h ( t o k e n ) ; t h i s . _ u p d a t e C l a s s N a m e ( ) } } ; c l a s s L i s t P r o t o . r e m o v e = f u n c t i o n ( t o k e n ) { t o k e n + = " " ; v a r   i n d e x = c h e c k T o k e n A n d G e t I n d e x ( t h i s , t o k e n ) ; i f ( i n d e x ! = = - 1 ) { t h i s . s p l i c e ( i n d e x , 1 ) ; t h i s . _ u p d a t e C l a s s N a m e ( ) } } ; c l a s s L i s t P r o t o . t o g g l e = f u n c t i o n ( t o k e n ) { t o k e n + = " " ; i f ( c h e c k T o k e n A n d G e t I n d e x ( t h i s , t o k e n ) = = = - 1 ) { t h i s . a d d ( t o k e n ) } e l s e { t h i s . r e m o v e ( t o k e n ) } } ; c l a s s L i s t P r o t o . t o S t r i n g = f u n c t i o n ( ) { r e t u r n   t h i s . j o i n ( "   " ) } ; i f ( o b j C t r . d e f i n e P r o p e r t y ) { v a r   c l a s s L i s t P r o p D e s c = { g e t : c l a s s L i s t G e t t e r , e n u m e r a b l e : t r u e , c o n f i g u r a b l e : t r u e } ; t r y { o b j C t r . d e f i n e P r o p e r t y ( e l e m C t r P r o t o , c l a s s L i s t P r o p , c l a s s L i s t P r o p D e s c ) } c a t c h ( e x ) { i f ( e x . n u m b e r = = = - 2 1 4 6 8 2 3 2 5 2 ) { c l a s s L i s t P r o p D e s c . e n u m e r a b l e = f a l s e ; o b j C t r . d e f i n e P r o p e r t y ( e l e m C t r P r o t o , c l a s s L i s t P r o p , c l a s s L i s t P r o p D e s c ) } } } e l s e   i f ( o b j C t r [ p r o t o P r o p ] . _ _ d e f i n e G e t t e r _ _ ) { e l e m C t r P r o t o . _ _ d e f i n e G e t t e r _ _ ( c l a s s L i s t P r o p , c l a s s L i s t G e t t e r ) } } ) ( w i n d o w ) } } ; i f ( t y p e o f   R I C K S H A W _ N O _ C O M P A T ! = = " u n d e f i n e d " & & ! R I C K S H A W _ N O _ C O M P A T | | t y p e o f   R I C K S H A W _ N O _ C O M P A T = = = " u n d e f i n e d " ) { n e w   R i c k s h a w . C o m p a t . C l a s s L i s t } R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . G r a p h " ) ; R i c k s h a w . G r a p h = f u n c t i o n ( a r g s ) { v a r   s e l f = t h i s ; t h i s . i n i t i a l i z e = f u n c t i o n ( a r g s ) { i f ( ! a r g s . e l e m e n t ) t h r o w " R i c k s h a w . G r a p h   n e e d s   a   r e f e r e n c e   t o   a n   e l e m e n t " ; i f ( a r g s . e l e m e n t . n o d e T y p e ! = = 1 ) t h r o w " R i c k s h a w . G r a p h   e l e m e n t   w a s   d e f i n e d   b u t   n o t   a n   H T M L   e l e m e n t " ; t h i s . e l e m e n t = a r g s . e l e m e n t ; t h i s . s e r i e s = a r g s . s e r i e s ; t h i s . w i n d o w = { } ; t h i s . u p d a t e C a l l b a c k s = [ ] ; t h i s . c o n f i g u r e C a l l b a c k s = [ ] ; t h i s . d e f a u l t s = { i n t e r p o l a t i o n : " c a r d i n a l " , o f f s e t : " z e r o " , m i n : u n d e f i n e d , m a x : u n d e f i n e d , p r e s e r v e : f a l s e , x S c a l e : u n d e f i n e d , y S c a l e : u n d e f i n e d , s t a c k : t r u e } ; t h i s . _ l o a d R e n d e r e r s ( ) ; t h i s . c o n f i g u r e ( a r g s ) ; t h i s . v a l i d a t e S e r i e s ( a r g s . s e r i e s ) ; t h i s . s e r i e s . a c t i v e = f u n c t i o n ( ) { r e t u r n   s e l f . s e r i e s . f i l t e r ( f u n c t i o n ( s ) { r e t u r n ! s . d i s a b l e d } ) } ; t h i s . s e t S i z e ( { w i d t h : a r g s . w i d t h , h e i g h t : a r g s . h e i g h t } ) ; t h i s . e l e m e n t . c l a s s L i s t . a d d ( " r i c k s h a w _ g r a p h " ) ; t h i s . v i s = d 3 . s e l e c t ( t h i s . e l e m e n t ) . a p p e n d ( " s v g : s v g " ) . a t t r ( " w i d t h " , t h i s . w i d t h ) . a t t r ( " h e i g h t " , t h i s . h e i g h t ) ; t h i s . d i s c o v e r R a n g e ( ) } ; t h i s . _ l o a d R e n d e r e r s = f u n c t i o n ( ) { f o r ( v a r   n a m e   i n   R i c k s h a w . G r a p h . R e n d e r e r ) { i f ( ! n a m e | | ! R i c k s h a w . G r a p h . R e n d e r e r . h a s O w n P r o p e r t y ( n a m e ) ) c o n t i n u e ; v a r   r = R i c k s h a w . G r a p h . R e n d e r e r [ n a m e ] ; i f ( ! r | | ! r . p r o t o t y p e | | ! r . p r o t o t y p e . r e n d e r ) c o n t i n u e ; s e l f . r e g i s t e r R e n d e r e r ( n e w   r ( { g r a p h : s e l f } ) ) } } ; t h i s . v a l i d a t e S e r i e s = f u n c t i o n ( s e r i e s ) { i f ( ! A r r a y . i s A r r a y ( s e r i e s ) & & ! ( s e r i e s   i n s t a n c e o f   R i c k s h a w . S e r i e s ) ) { v a r   s e r i e s S i g n a t u r e = O b j e c t . p r o t o t y p e . t o S t r i n g . a p p l y ( s e r i e s ) ; t h r o w " s e r i e s   i s   n o t   a n   a r r a y :   " + s e r i e s S i g n a t u r e } v a r   p o i n t s C o u n t ; s e r i e s . f o r E a c h ( f u n c t i o n ( s ) { i f ( ! ( s   i n s t a n c e o f   O b j e c t ) ) { t h r o w " s e r i e s   e l e m e n t   i s   n o t   a n   o b j e c t :   " + s } i f ( ! s . d a t a ) { t h r o w " s e r i e s   h a s   n o   d a t a :   " + J S O N . s t r i n g i f y ( s ) } i f ( ! A r r a y . i s A r r a y ( s . d a t a ) ) { t h r o w " s e r i e s   d a t a   i s   n o t   a n   a r r a y :   " + J S O N . s t r i n g i f y ( s . d a t a ) } i f ( s . d a t a . l e n g t h > 0 ) { v a r   x = s . d a t a [ 0 ] . x ; v a r   y = s . d a t a [ 0 ] . y ; i f ( t y p e o f   x ! = " n u m b e r " | | t y p e o f   y ! = " n u m b e r " & & y ! = = n u l l ) { t h r o w " x   a n d   y   p r o p e r t i e s   o f   p o i n t s   s h o u l d   b e   n u m b e r s   i n s t e a d   o f   " + t y p e o f   x + "   a n d   " + t y p e o f   y } } i f ( s . d a t a . l e n g t h > = 3 ) { i f ( s . d a t a [ 2 ] . x < s . d a t a [ 1 ] . x | | s . d a t a [ 1 ] . x < s . d a t a [ 0 ] . x | | s . d a t a [ s . d a t a . l e n g t h - 1 ] . x < s . d a t a [ 0 ] . x ) { t h r o w " s e r i e s   d a t a   n e e d s   t o   b e   s o r t e d   o n   x   v a l u e s   f o r   s e r i e s   n a m e :   " + s . n a m e } } } , t h i s ) } ; t h i s . d a t a D o m a i n = f u n c t i o n ( ) { v a r   d a t a = t h i s . s e r i e s . m a p ( f u n c t i o n ( s ) { r e t u r n   s . d a t a } ) ; v a r   m i n = d 3 . m i n ( d a t a . m a p ( f u n c t i o n ( d ) { r e t u r n   d [ 0 ] . x } ) ) ; v a r   m a x = d 3 . m a x ( d a t a . m a p ( f u n c t i o n ( d ) { r e t u r n   d [ d . l e n g t h - 1 ] . x } ) ) ; r e t u r n [ m i n , m a x ] } ; t h i s . d i s c o v e r R a n g e = f u n c t i o n ( ) { v a r   d o m a i n = t h i s . r e n d e r e r . d o m a i n ( ) ; t h i s . x = ( t h i s . x S c a l e | | d 3 . s c a l e . l i n e a r ( ) ) . c o p y ( ) . d o m a i n ( d o m a i n . x ) . r a n g e ( [ 0 , t h i s . w i d t h ] ) ; t h i s . y = ( t h i s . y S c a l e | | d 3 . s c a l e . l i n e a r ( ) ) . c o p y ( ) . d o m a i n ( d o m a i n . y ) . r a n g e ( [ t h i s . h e i g h t , 0 ] ) ; t h i s . x . m a g n i t u d e = d 3 . s c a l e . l i n e a r ( ) . d o m a i n ( [ d o m a i n . x [ 0 ] - d o m a i n . x [ 0 ] , d o m a i n . x [ 1 ] - d o m a i n . x [ 0 ] ] ) . r a n g e ( [ 0 , t h i s . w i d t h ] ) ; t h i s . y . m a g n i t u d e = d 3 . s c a l e . l i n e a r ( ) . d o m a i n ( [ d o m a i n . y [ 0 ] - d o m a i n . y [ 0 ] , d o m a i n . y [ 1 ] - d o m a i n . y [ 0 ] ] ) . r a n g e ( [ 0 , t h i s . h e i g h t ] ) } ; t h i s . r e n d e r = f u n c t i o n ( ) { v a r   s t a c k e d D a t a = t h i s . s t a c k D a t a ( ) ; t h i s . d i s c o v e r R a n g e ( ) ; t h i s . r e n d e r e r . r e n d e r ( ) ; t h i s . u p d a t e C a l l b a c k s . f o r E a c h ( f u n c t i o n ( c a l l b a c k ) { c a l l b a c k ( ) } ) } ; t h i s . u p d a t e = t h i s . r e n d e r ; t h i s . s t a c k D a t a = f u n c t i o n ( ) { v a r   d a t a = t h i s . s e r i e s . a c t i v e ( ) . m a p ( f u n c t i o n ( d ) { r e t u r n   d . d a t a } ) . m a p ( f u n c t i o n ( d ) { r e t u r n   d . f i l t e r ( f u n c t i o n ( d ) { r e t u r n   t h i s . _ s l i c e ( d ) } , t h i s ) } , t h i s ) ; v a r   p r e s e r v e = t h i s . p r e s e r v e ; i f ( ! p r e s e r v e ) { t h i s . s e r i e s . f o r E a c h ( f u n c t i o n ( s e r i e s ) { i f ( s e r i e s . s c a l e ) { p r e s e r v e = t r u e } } ) } d a t a = p r e s e r v e ? R i c k s h a w . c l o n e ( d a t a ) : d a t a ; t h i s . s e r i e s . a c t i v e ( ) . f o r E a c h ( f u n c t i o n ( s e r i e s , i n d e x ) { i f ( s e r i e s . s c a l e ) { v a r   s e r i e s D a t a = d a t a [ i n d e x ] ; i f ( s e r i e s D a t a ) { s e r i e s D a t a . f o r E a c h ( f u n c t i o n ( d ) { d . y = s e r i e s . s c a l e ( d . y ) } ) } } } ) ; t h i s . s t a c k D a t a . h o o k s . d a t a . f o r E a c h ( f u n c t i o n ( e n t r y ) { d a t a = e n t r y . f . a p p l y ( s e l f , [ d a t a ] ) } ) ; v a r   s t a c k e d D a t a ; i f ( ! t h i s . r e n d e r e r . u n s t a c k ) { t h i s . _ v a l i d a t e S t a c k a b l e ( ) ; v a r   l a y o u t = d 3 . l a y o u t . s t a c k ( ) ; l a y o u t . o f f s e t ( s e l f . o f f s e t ) ; s t a c k e d D a t a = l a y o u t ( d a t a ) } s t a c k e d D a t a = s t a c k e d D a t a | | d a t a ; i f ( t h i s . r e n d e r e r . u n s t a c k ) { s t a c k e d D a t a . f o r E a c h ( f u n c t i o n ( s e r i e s D a t a ) { s e r i e s D a t a . f o r E a c h ( f u n c t i o n ( d ) { d . y 0 = d . y 0 = = = u n d e f i n e d ? 0 : d . y 0 } ) } ) } t h i s . s t a c k D a t a . h o o k s . a f t e r . f o r E a c h ( f u n c t i o n ( e n t r y ) { s t a c k e d D a t a = e n t r y . f . a p p l y ( s e l f , [ d a t a ] ) } ) ; v a r   i = 0 ; t h i s . s e r i e s . f o r E a c h ( f u n c t i o n ( s e r i e s ) { i f ( s e r i e s . d i s a b l e d ) r e t u r n ; s e r i e s . s t a c k = s t a c k e d D a t a [ i + + ] } ) ; t h i s . s t a c k e d D a t a = s t a c k e d D a t a ; r e t u r n   s t a c k e d D a t a } ; t h i s . _ v a l i d a t e S t a c k a b l e = f u n c t i o n ( ) { v a r   s e r i e s = t h i s . s e r i e s ; v a r   p o i n t s C o u n t ; s e r i e s . f o r E a c h ( f u n c t i o n ( s ) { p o i n t s C o u n t = p o i n t s C o u n t | | s . d a t a . l e n g t h ; i f ( p o i n t s C o u n t & & s . d a t a . l e n g t h ! = p o i n t s C o u n t ) { t h r o w " s t a c k e d   s e r i e s   c a n n o t   h a v e   d i f f e r i n g   n u m b e r s   o f   p o i n t s :   " + p o i n t s C o u n t + "   v s   " + s . d a t a . l e n g t h + " ;   s e e   R i c k s h a w . S e r i e s . f i l l ( ) " } } , t h i s ) } ; t h i s . s t a c k D a t a . h o o k s = { d a t a : [ ] , a f t e r : [ ] } ; t h i s . _ s l i c e = f u n c t i o n ( d ) { i f ( t h i s . w i n d o w . x M i n | | t h i s . w i n d o w . x M a x ) { v a r   i s I n R a n g e = t r u e ; i f ( t h i s . w i n d o w . x M i n & & d . x < t h i s . w i n d o w . x M i n ) i s I n R a n g e = f a l s e ; i f ( t h i s . w i n d o w . x M a x & & d . x > t h i s . w i n d o w . x M a x ) i s I n R a n g e = f a l s e ; r e t u r n   i s I n R a n g e } r e t u r n   t r u e } ; t h i s . o n U p d a t e = f u n c t i o n ( c a l l b a c k ) { t h i s . u p d a t e C a l l b a c k s . p u s h ( c a l l b a c k ) } ; t h i s . o n C o n f i g u r e = f u n c t i o n ( c a l l b a c k ) { t h i s . c o n f i g u r e C a l l b a c k s . p u s h ( c a l l b a c k ) } ; t h i s . r e g i s t e r R e n d e r e r = f u n c t i o n ( r e n d e r e r ) { t h i s . _ r e n d e r e r s = t h i s . _ r e n d e r e r s | | { } ; t h i s . _ r e n d e r e r s [ r e n d e r e r . n a m e ] = r e n d e r e r } ; t h i s . c o n f i g u r e = f u n c t i o n ( a r g s ) { t h i s . c o n f i g = t h i s . c o n f i g | | { } ; i f ( a r g s . w i d t h | | a r g s . h e i g h t ) { t h i s . s e t S i z e ( a r g s ) } R i c k s h a w . k e y s ( t h i s . d e f a u l t s ) . f o r E a c h ( f u n c t i o n ( k ) { t h i s . c o n f i g [ k ] = k   i n   a r g s ? a r g s [ k ] : k   i n   t h i s ? t h i s [ k ] : t h i s . d e f a u l t s [ k ] } , t h i s ) ; R i c k s h a w . k e y s ( t h i s . c o n f i g ) . f o r E a c h ( f u n c t i o n ( k ) { t h i s [ k ] = t h i s . c o n f i g [ k ] } , t h i s ) ; i f ( " s t a c k " i n   a r g s ) a r g s . u n s t a c k = ! a r g s . s t a c k ; v a r   r e n d e r e r = a r g s . r e n d e r e r | | t h i s . r e n d e r e r & & t h i s . r e n d e r e r . n a m e | | " s t a c k " ; t h i s . s e t R e n d e r e r ( r e n d e r e r , a r g s ) ; t h i s . c o n f i g u r e C a l l b a c k s . f o r E a c h ( f u n c t i o n ( c a l l b a c k ) { c a l l b a c k ( a r g s ) } ) } ; t h i s . s e t R e n d e r e r = f u n c t i o n ( r , a r g s ) { i f ( t y p e o f   r = = " f u n c t i o n " ) { t h i s . r e n d e r e r = n e w   r ( { g r a p h : s e l f } ) ; t h i s . r e g i s t e r R e n d e r e r ( t h i s . r e n d e r e r ) } e l s e { i f ( ! t h i s . _ r e n d e r e r s [ r ] ) { t h r o w " c o u l d n ' t   f i n d   r e n d e r e r   " + r } t h i s . r e n d e r e r = t h i s . _ r e n d e r e r s [ r ] } i f ( t y p e o f   a r g s = = " o b j e c t " ) { t h i s . r e n d e r e r . c o n f i g u r e ( a r g s ) } } ; t h i s . s e t S i z e = f u n c t i o n ( a r g s ) { a r g s = a r g s | | { } ; i f ( t y p e o f   w i n d o w ! = = u n d e f i n e d ) { v a r   s t y l e = w i n d o w . g e t C o m p u t e d S t y l e ( t h i s . e l e m e n t , n u l l ) ; v a r   e l e m e n t W i d t h = p a r s e I n t ( s t y l e . g e t P r o p e r t y V a l u e ( " w i d t h " ) , 1 0 ) ; v a r   e l e m e n t H e i g h t = p a r s e I n t ( s t y l e . g e t P r o p e r t y V a l u e ( " h e i g h t " ) , 1 0 ) } t h i s . w i d t h = a r g s . w i d t h | | e l e m e n t W i d t h | | 4 0 0 ; t h i s . h e i g h t = a r g s . h e i g h t | | e l e m e n t H e i g h t | | 2 5 0 ; t h i s . v i s & & t h i s . v i s . a t t r ( " w i d t h " , t h i s . w i d t h ) . a t t r ( " h e i g h t " , t h i s . h e i g h t ) } ; t h i s . i n i t i a l i z e ( a r g s ) } ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . F i x t u r e s . C o l o r " ) ; R i c k s h a w . F i x t u r e s . C o l o r = f u n c t i o n ( ) { t h i s . s c h e m e s = { } ; t h i s . s c h e m e s . s p e c t r u m 1 4 = [ " # e c b 7 9 6 " , " # d c 8 f 7 0 " , " # b 2 a 4 7 0 " , " # 9 2 8 7 5 a " , " # 7 1 6 c 4 9 " , " # d 2 e d 8 2 " , " # b b e 4 6 8 " , " # a 1 d 0 5 d " , " # e 7 c b e 6 " , " # d 8 a a d 6 " , " # a 8 8 8 c 2 " , " # 9 d c 2 d 3 " , " # 6 4 9 e b 9 " , " # 3 8 7 a a 3 " ] . r e v e r s e ( ) ; t h i s . s c h e m e s . s p e c t r u m 2 0 0 0 = [ " # 5 7 3 0 6 f " , " # 5 1 4 c 7 6 " , " # 6 4 6 5 8 3 " , " # 7 3 8 3 9 4 " , " # 6 b 9 c 7 d " , " # 8 4 b 6 6 5 " , " # a 7 c a 5 0 " , " # b f e 7 4 6 " , " # e 2 f 5 2 8 " , " # f f f 7 2 6 " , " # e c d d 0 0 " , " # d 4 b 1 1 d " , " # d e 8 8 0 0 " , " # d e 4 8 0 0 " , " # c 9 1 5 1 5 " , " # 9 a 0 0 0 0 " , " # 7 b 0 4 2 9 " , " # 5 8 0 8 3 9 " , " # 3 1 0 8 2 b " ] ; t h i s . s c h e m e s . s p e c t r u m 2 0 0 1 = [ " # 2 f 2 4 3 f " , " # 3 c 2 c 5 5 " , " # 4 a 3 7 6 8 " , " # 5 6 5 2 7 0 " , " # 6 b 6 b 7 c " , " # 7 2 9 5 7 f " , " # 8 6 a d 6 e " , " # a 1 b c 5 e " , " # b 8 d 9 5 4 " , " # d 3 e 0 4 e " , " # c c a d 2 a " , " # c c 8 4 1 2 " , " # c 1 5 2 1 d " , " # a d 3 8 2 1 " , " # 8 a 1 0 1 0 " , " # 6 8 1 7 1 7 " , " # 5 3 1 e 1 e " , " # 3 d 1 8 1 8 " , " # 3 2 0 a 1 b " ] ; t h i s . s c h e m e s . c l a s s i c 9 = [ " # 4 2 3 d 4 f " , " # 4 a 6 8 6 0 " , " # 8 4 8 f 3 9 " , " # a 2 b 7 3 c " , " # d d c b 5 3 " , " # c 5 a 3 2 f " , " # 7 d 5 8 3 6 " , " # 9 6 3 b 2 0 " , " # 7 c 2 6 2 6 " , " # 4 9 1 d 3 7 " , " # 2 f 2 5 4 a " ] . r e v e r s e ( ) ; t h i s . s c h e m e s . h t t p S t a t u s = { 5 0 3 : " # e a 5 0 2 9 " , 5 0 2 : " # d 2 3 f 1 4 " , 5 0 0 : " # b f 3 6 1 3 " , 4 1 0 : " # e f a c e a " , 4 0 9 : " # e 2 9 1 d c " , 4 0 3 : " # f 4 5 7 e 8 " , 4 0 8 : " # e 1 2 1 d 2 " , 4 0 1 : " # b 9 2 d a e " , 4 0 5 : " # f 4 7 c e b " , 4 0 4 : " # a 8 2 a 9 f " , 4 0 0 : " # b 2 6 3 c 6 " , 3 0 1 : " # 6 f a 0 2 4 " , 3 0 2 : " # 8 7 c 3 2 b " , 3 0 7 : " # a 0 d 8 4 c " , 3 0 4 : " # 2 8 b 5 5 c " , 2 0 0 : " # 1 a 4 f 7 4 " , 2 0 6 : " # 2 7 8 3 9 f " , 2 0 1 : " # 5 2 a d c 9 " , 2 0 2 : " # 7 c 9 7 9 f " , 2 0 3 : " # a 5 b 8 b d " , 2 0 4 : " # c 1 c d d 1 " } ; t h i s . s c h e m e s . c o l o r w h e e l = [ " # b 5 b 6 a 9 " , " # 8 5 8 7 7 2 " , " # 7 8 5 f 4 3 " , " # 9 6 5 5 7 e " , " # 4 6 8 2 b 4 " , " # 6 5 b 9 a c " , " # 7 3 c 0 3 a " , " # c b 5 1 3 a " ] . r e v e r s e ( ) ; t h i s . s c h e m e s . c o o l = [ " # 5 e 9 d 2 f " , " # 7 3 c 0 3 a " , " # 4 6 8 2 b 4 " , " # 7 b c 3 b 8 " , " # a 9 8 8 4 e " , " # c 1 b 2 6 6 " , " # a 4 7 4 9 3 " , " # c 0 9 f b 5 " ] ; t h i s . s c h e m e s . m u n i n = [ " # 0 0 c c 0 0 " , " # 0 0 6 6 b 3 " , " # f f 8 0 0 0 " , " # f f c c 0 0 " , " # 3 3 0 0 9 9 " , " # 9 9 0 0 9 9 " , " # c c f f 0 0 " , " # f f 0 0 0 0 " , " # 8 0 8 0 8 0 " , " # 0 0 8 f 0 0 " , " # 0 0 4 8 7 d " , " # b 3 5 a 0 0 " , " # b 3 8 f 0 0 " , " # 6 b 0 0 6 b " , " # 8 f b 3 0 0 " , " # b 3 0 0 0 0 " , " # b e b e b e " , " # 8 0 f f 8 0 " , " # 8 0 c 9 f f " , " # f f c 0 8 0 " , " # f f e 6 8 0 " , " # a a 8 0 f f " , " # e e 0 0 c c " , " # f f 8 0 8 0 " , " # 6 6 6 6 0 0 " , " # f f b f f f " , " # 0 0 f f c c " , " # c c 6 6 9 9 " , " # 9 9 9 9 0 0 " ] } ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . F i x t u r e s . R a n d o m D a t a " ) ; R i c k s h a w . F i x t u r e s . R a n d o m D a t a = f u n c t i o n ( t i m e I n t e r v a l ) { v a r   a d d D a t a ; t i m e I n t e r v a l = t i m e I n t e r v a l | | 1 ; v a r   l a s t R a n d o m V a l u e = 2 0 0 ; v a r   t i m e B a s e = M a t h . f l o o r ( ( n e w   D a t e ) . g e t T i m e ( ) / 1 e 3 ) ; t h i s . a d d D a t a = f u n c t i o n ( d a t a ) { v a r   r a n d o m V a l u e = M a t h . r a n d o m ( ) * 1 0 0 + 1 5 + l a s t R a n d o m V a l u e ; v a r   i n d e x = d a t a [ 0 ] . l e n g t h ; v a r   c o u n t e r = 1 ; d a t a . f o r E a c h ( f u n c t i o n ( s e r i e s ) { v a r   r a n d o m V a r i a n c e = M a t h . r a n d o m ( ) * 2 0 ; v a r   v = r a n d o m V a l u e / 2 5 + c o u n t e r + +   + ( M a t h . c o s ( i n d e x * c o u n t e r * 1 1 / 9 6 0 ) + 2 ) * 1 5 + ( M a t h . c o s ( i n d e x / 7 ) + 2 ) * 7 + ( M a t h . c o s ( i n d e x / 1 7 ) + 2 ) * 1 ; s e r i e s . p u s h ( { x : i n d e x * t i m e I n t e r v a l + t i m e B a s e , y : v + r a n d o m V a r i a n c e } ) } ) ; l a s t R a n d o m V a l u e = r a n d o m V a l u e * . 8 5 } ; t h i s . r e m o v e D a t a = f u n c t i o n ( d a t a ) { d a t a . f o r E a c h ( f u n c t i o n ( s e r i e s ) { s e r i e s . s h i f t ( ) } ) ; t i m e B a s e + = t i m e I n t e r v a l } } ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . F i x t u r e s . T i m e " ) ; R i c k s h a w . F i x t u r e s . T i m e = f u n c t i o n ( ) { v a r   s e l f = t h i s ; t h i s . m o n t h s = [ " J a n " , " F e b " , " M a r " , " A p r " , " M a y " , " J u n " , " J u l " , " A u g " , " S e p " , " O c t " , " N o v " , " D e c " ] ; t h i s . u n i t s = [ { n a m e : " d e c a d e " , s e c o n d s : 8 6 4 0 0 * 3 6 5 . 2 5 * 1 0 , f o r m a t t e r : f u n c t i o n ( d ) { r e t u r n   p a r s e I n t ( d . g e t U T C F u l l Y e a r ( ) / 1 0 , 1 0 ) * 1 0 } } , { n a m e : " y e a r " , s e c o n d s : 8 6 4 0 0 * 3 6 5 . 2 5 , f o r m a t t e r : f u n c t i o n ( d ) { r e t u r n   d . g e t U T C F u l l Y e a r ( ) } } , { n a m e : " m o n t h " , s e c o n d s : 8 6 4 0 0 * 3 0 . 5 , f o r m a t t e r : f u n c t i o n ( d ) { r e t u r n   s e l f . m o n t h s [ d . g e t U T C M o n t h ( ) ] } } , { n a m e : " w e e k " , s e c o n d s : 8 6 4 0 0 * 7 , f o r m a t t e r : f u n c t i o n ( d ) { r e t u r n   s e l f . f o r m a t D a t e ( d ) } } , { n a m e : " d a y " , s e c o n d s : 8 6 4 0 0 , f o r m a t t e r : f u n c t i o n ( d ) { r e t u r n   d . g e t U T C D a t e ( ) } } , { n a m e : " 6   h o u r " , s e c o n d s : 3 6 0 0 * 6 , f o r m a t t e r : f u n c t i o n ( d ) { r e t u r n   s e l f . f o r m a t T i m e ( d ) } } , { n a m e : " h o u r " , s e c o n d s : 3 6 0 0 , f o r m a t t e r : f u n c t i o n ( d ) { r e t u r n   s e l f . f o r m a t T i m e ( d ) } } , { n a m e : " 1 5   m i n u t e " , s e c o n d s : 6 0 * 1 5 , f o r m a t t e r : f u n c t i o n ( d ) { r e t u r n   s e l f . f o r m a t T i m e ( d ) } } , { n a m e : " m i n u t e " , s e c o n d s : 6 0 , f o r m a t t e r : f u n c t i o n ( d ) { r e t u r n   d . g e t U T C M i n u t e s ( ) } } , { n a m e : " 1 5   s e c o n d " , s e c o n d s : 1 5 , f o r m a t t e r : f u n c t i o n ( d ) { r e t u r n   d . g e t U T C S e c o n d s ( ) + " s " } } , { n a m e : " s e c o n d " , s e c o n d s : 1 , f o r m a t t e r : f u n c t i o n ( d ) { r e t u r n   d . g e t U T C S e c o n d s ( ) + " s " } } , { n a m e : " d e c i s e c o n d " , s e c o n d s : 1 / 1 0 , f o r m a t t e r : f u n c t i o n ( d ) { r e t u r n   d . g e t U T C M i l l i s e c o n d s ( ) + " m s " } } , { n a m e : " c e n t i s e c o n d " , s e c o n d s : 1 / 1 0 0 , f o r m a t t e r : f u n c t i o n ( d ) { r e t u r n   d . g e t U T C M i l l i s e c o n d s ( ) + " m s " } } ] ; t h i s . u n i t = f u n c t i o n ( u n i t N a m e ) { r e t u r n   t h i s . u n i t s . f i l t e r ( f u n c t i o n ( u n i t ) { r e t u r n   u n i t N a m e = = u n i t . n a m e } ) . s h i f t ( ) } ; t h i s . f o r m a t D a t e = f u n c t i o n ( d ) { r e t u r n   d 3 . t i m e . f o r m a t ( " % b   % e " ) ( d ) } ; t h i s . f o r m a t T i m e = f u n c t i o n ( d ) { r e t u r n   d . t o U T C S t r i n g ( ) . m a t c h ( / ( \ d + : \ d + ) : / ) [ 1 ] } ; t h i s . c e i l = f u n c t i o n ( t i m e , u n i t ) { v a r   d a t e , f l o o r , y e a r ; i f ( u n i t . n a m e = = " m o n t h " ) { d a t e = n e w   D a t e ( t i m e * 1 e 3 ) ; f l o o r = D a t e . U T C ( d a t e . g e t U T C F u l l Y e a r ( ) , d a t e . g e t U T C M o n t h ( ) ) / 1 e 3 ; i f ( f l o o r = = t i m e ) r e t u r n   t i m e ; y e a r = d a t e . g e t U T C F u l l Y e a r ( ) ; v a r   m o n t h = d a t e . g e t U T C M o n t h ( ) ; i f ( m o n t h = = 1 1 ) { m o n t h = 0 ; y e a r = y e a r + 1 } e l s e { m o n t h + = 1 } r e t u r n   D a t e . U T C ( y e a r , m o n t h ) / 1 e 3 } i f ( u n i t . n a m e = = " y e a r " ) { d a t e = n e w   D a t e ( t i m e * 1 e 3 ) ; f l o o r = D a t e . U T C ( d a t e . g e t U T C F u l l Y e a r ( ) , 0 ) / 1 e 3 ; i f ( f l o o r = = t i m e ) r e t u r n   t i m e ; y e a r = d a t e . g e t U T C F u l l Y e a r ( ) + 1 ; r e t u r n   D a t e . U T C ( y e a r , 0 ) / 1 e 3 } r e t u r n   M a t h . c e i l ( t i m e / u n i t . s e c o n d s ) * u n i t . s e c o n d s } } ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . F i x t u r e s . T i m e . L o c a l " ) ; R i c k s h a w . F i x t u r e s . T i m e . L o c a l = f u n c t i o n ( ) { v a r   s e l f = t h i s ; t h i s . m o n t h s = [ " J a n " , " F e b " , " M a r " , " A p r " , " M a y " , " J u n " , " J u l " , " A u g " , " S e p " , " O c t " , " N o v " , " D e c " ] ; t h i s . u n i t s = [ { n a m e : " d e c a d e " , s e c o n d s : 8 6 4 0 0 * 3 6 5 . 2 5 * 1 0 , f o r m a t t e r : f u n c t i o n ( d ) { r e t u r n   p a r s e I n t ( d . g e t F u l l Y e a r ( ) / 1 0 , 1 0 ) * 1 0 } } , { n a m e : " y e a r " , s e c o n d s : 8 6 4 0 0 * 3 6 5 . 2 5 , f o r m a t t e r : f u n c t i o n ( d ) { r e t u r n   d . g e t F u l l Y e a r ( ) } } , { n a m e : " m o n t h " , s e c o n d s : 8 6 4 0 0 * 3 0 . 5 , f o r m a t t e r : f u n c t i o n ( d ) { r e t u r n   s e l f . m o n t h s [ d . g e t M o n t h ( ) ] } } , { n a m e : " w e e k " , s e c o n d s : 8 6 4 0 0 * 7 , f o r m a t t e r : f u n c t i o n ( d ) { r e t u r n   s e l f . f o r m a t D a t e ( d ) } } , { n a m e : " d a y " , s e c o n d s : 8 6 4 0 0 , f o r m a t t e r : f u n c t i o n ( d ) { r e t u r n   d . g e t D a t e ( ) } } , { n a m e : " 6   h o u r " , s e c o n d s : 3 6 0 0 * 6 , f o r m a t t e r : f u n c t i o n ( d ) { r e t u r n   s e l f . f o r m a t T i m e ( d ) } } , { n a m e : " h o u r " , s e c o n d s : 3 6 0 0 , f o r m a t t e r : f u n c t i o n ( d ) { r e t u r n   s e l f . f o r m a t T i m e ( d ) } } , { n a m e : " 1 5   m i n u t e " , s e c o n d s : 6 0 * 1 5 , f o r m a t t e r : f u n c t i o n ( d ) { r e t u r n   s e l f . f o r m a t T i m e ( d ) } } , { n a m e : " m i n u t e " , s e c o n d s : 6 0 , f o r m a t t e r : f u n c t i o n ( d ) { r e t u r n   d . g e t M i n u t e s ( ) } } , { n a m e : " 1 5   s e c o n d " , s e c o n d s : 1 5 , f o r m a t t e r : f u n c t i o n ( d ) { r e t u r n   d . g e t S e c o n d s ( ) + " s " } } , { n a m e : " s e c o n d " , s e c o n d s : 1 , f o r m a t t e r : f u n c t i o n ( d ) { r e t u r n   d . g e t S e c o n d s ( ) + " s " } } , { n a m e : " d e c i s e c o n d " , s e c o n d s : 1 / 1 0 , f o r m a t t e r : f u n c t i o n ( d ) { r e t u r n   d . g e t M i l l i s e c o n d s ( ) + " m s " } } , { n a m e : " c e n t i s e c o n d " , s e c o n d s : 1 / 1 0 0 , f o r m a t t e r : f u n c t i o n ( d ) { r e t u r n   d . g e t M i l l i s e c o n d s ( ) + " m s " } } ] ; t h i s . u n i t = f u n c t i o n ( u n i t N a m e ) { r e t u r n   t h i s . u n i t s . f i l t e r ( f u n c t i o n ( u n i t ) { r e t u r n   u n i t N a m e = = u n i t . n a m e } ) . s h i f t ( ) } ; t h i s . f o r m a t D a t e = f u n c t i o n ( d ) { r e t u r n   d 3 . t i m e . f o r m a t ( " % b   % e " ) ( d ) } ; t h i s . f o r m a t T i m e = f u n c t i o n ( d ) { r e t u r n   d . t o S t r i n g ( ) . m a t c h ( / ( \ d + : \ d + ) : / ) [ 1 ] } ; t h i s . c e i l = f u n c t i o n ( t i m e , u n i t ) { v a r   d a t e , f l o o r , y e a r ; i f ( u n i t . n a m e = = " d a y " ) { v a r   n e a r F u t u r e = n e w   D a t e ( ( t i m e + u n i t . s e c o n d s - 1 ) * 1 e 3 ) ; v a r   r o u n d e d = n e w   D a t e ( 0 ) ; r o u n d e d . s e t M i l l i s e c o n d s ( 0 ) ; r o u n d e d . s e t S e c o n d s ( 0 ) ; r o u n d e d . s e t M i n u t e s ( 0 ) ; r o u n d e d . s e t H o u r s ( 0 ) ; r o u n d e d . s e t D a t e ( n e a r F u t u r e . g e t D a t e ( ) ) ; r o u n d e d . s e t M o n t h ( n e a r F u t u r e . g e t M o n t h ( ) ) ; r o u n d e d . s e t F u l l Y e a r ( n e a r F u t u r e . g e t F u l l Y e a r ( ) ) ; r e t u r n   r o u n d e d . g e t T i m e ( ) / 1 e 3 } i f ( u n i t . n a m e = = " m o n t h " ) { d a t e = n e w   D a t e ( t i m e * 1 e 3 ) ; f l o o r = n e w   D a t e ( d a t e . g e t F u l l Y e a r ( ) , d a t e . g e t M o n t h ( ) ) . g e t T i m e ( ) / 1 e 3 ; i f ( f l o o r = = t i m e ) r e t u r n   t i m e ; y e a r = d a t e . g e t F u l l Y e a r ( ) ; v a r   m o n t h = d a t e . g e t M o n t h ( ) ; i f ( m o n t h = = 1 1 ) { m o n t h = 0 ; y e a r = y e a r + 1 } e l s e { m o n t h + = 1 } r e t u r n   n e w   D a t e ( y e a r , m o n t h ) . g e t T i m e ( ) / 1 e 3 } i f ( u n i t . n a m e = = " y e a r " ) { d a t e = n e w   D a t e ( t i m e * 1 e 3 ) ; f l o o r = n e w   D a t e ( d a t e . g e t U T C F u l l Y e a r ( ) , 0 ) . g e t T i m e ( ) / 1 e 3 ; i f ( f l o o r = = t i m e ) r e t u r n   t i m e ; y e a r = d a t e . g e t F u l l Y e a r ( ) + 1 ; r e t u r n   n e w   D a t e ( y e a r , 0 ) . g e t T i m e ( ) / 1 e 3 } r e t u r n   M a t h . c e i l ( t i m e / u n i t . s e c o n d s ) * u n i t . s e c o n d s } } ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . F i x t u r e s . N u m b e r " ) ; R i c k s h a w . F i x t u r e s . N u m b e r . f o r m a t K M B T = f u n c t i o n ( y ) { v a r   a b s _ y = M a t h . a b s ( y ) ; i f ( a b s _ y > = 1 e 1 2 ) { r e t u r n   y / 1 e 1 2 + " T " } e l s e   i f ( a b s _ y > = 1 e 9 ) { r e t u r n   y / 1 e 9 + " B " } e l s e   i f ( a b s _ y > = 1 e 6 ) { r e t u r n   y / 1 e 6 + " M " } e l s e   i f ( a b s _ y > = 1 e 3 ) { r e t u r n   y / 1 e 3 + " K " } e l s e   i f ( a b s _ y < 1 & & y > 0 ) { r e t u r n   y . t o F i x e d ( 2 ) } e l s e   i f ( a b s _ y = = = 0 ) { r e t u r n " " } e l s e { r e t u r n   y } } ; R i c k s h a w . F i x t u r e s . N u m b e r . f o r m a t B a s e 1 0 2 4 K M G T P = f u n c t i o n ( y ) { v a r   a b s _ y = M a t h . a b s ( y ) ; i f ( a b s _ y > = 0 x 4 0 0 0 0 0 0 0 0 0 0 0 0 ) { r e t u r n   y / 0 x 4 0 0 0 0 0 0 0 0 0 0 0 0 + " P " } e l s e   i f ( a b s _ y > = 1 0 9 9 5 1 1 6 2 7 7 7 6 ) { r e t u r n   y / 1 0 9 9 5 1 1 6 2 7 7 7 6 + " T " } e l s e   i f ( a b s _ y > = 1 0 7 3 7 4 1 8 2 4 ) { r e t u r n   y / 1 0 7 3 7 4 1 8 2 4 + " G " } e l s e   i f ( a b s _ y > = 1 0 4 8 5 7 6 ) { r e t u r n   y / 1 0 4 8 5 7 6 + " M " } e l s e   i f ( a b s _ y > = 1 0 2 4 ) { r e t u r n   y / 1 0 2 4 + " K " } e l s e   i f ( a b s _ y < 1 & & y > 0 ) { r e t u r n   y . t o F i x e d ( 2 ) } e l s e   i f ( a b s _ y = = = 0 ) { r e t u r n " " } e l s e { r e t u r n   y } } ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . C o l o r . P a l e t t e " ) ; R i c k s h a w . C o l o r . P a l e t t e = f u n c t i o n ( a r g s ) { v a r   c o l o r = n e w   R i c k s h a w . F i x t u r e s . C o l o r ; a r g s = a r g s | | { } ; t h i s . s c h e m e s = { } ; t h i s . s c h e m e = c o l o r . s c h e m e s [ a r g s . s c h e m e ] | | a r g s . s c h e m e | | c o l o r . s c h e m e s . c o l o r w h e e l ; t h i s . r u n n i n g I n d e x = 0 ; t h i s . g e n e r a t o r I n d e x = 0 ; i f ( a r g s . i n t e r p o l a t e d S t o p C o u n t ) { v a r   s c h e m e C o u n t = t h i s . s c h e m e . l e n g t h - 1 ; v a r   i , j , s c h e m e = [ ] ; f o r ( i = 0 ; i < s c h e m e C o u n t ; i + + ) { s c h e m e . p u s h ( t h i s . s c h e m e [ i ] ) ; v a r   g e n e r a t o r = d 3 . i n t e r p o l a t e H s l ( t h i s . s c h e m e [ i ] , t h i s . s c h e m e [ i + 1 ] ) ; f o r ( j = 1 ; j < a r g s . i n t e r p o l a t e d S t o p C o u n t ; j + + ) { s c h e m e . p u s h ( g e n e r a t o r ( 1 / a r g s . i n t e r p o l a t e d S t o p C o u n t * j ) ) } } s c h e m e . p u s h ( t h i s . s c h e m e [ t h i s . s c h e m e . l e n g t h - 1 ] ) ; t h i s . s c h e m e = s c h e m e } t h i s . r o t a t e C o u n t = t h i s . s c h e m e . l e n g t h ; t h i s . c o l o r = f u n c t i o n ( k e y ) { r e t u r n   t h i s . s c h e m e [ k e y ] | | t h i s . s c h e m e [ t h i s . r u n n i n g I n d e x + + ] | | t h i s . i n t e r p o l a t e C o l o r ( ) | | " # 8 0 8 0 8 0 " } ; t h i s . i n t e r p o l a t e C o l o r = f u n c t i o n ( ) { i f ( ! A r r a y . i s A r r a y ( t h i s . s c h e m e ) ) r e t u r n ; v a r   c o l o r ; i f ( t h i s . g e n e r a t o r I n d e x = = t h i s . r o t a t e C o u n t * 2 - 1 ) { c o l o r = d 3 . i n t e r p o l a t e H s l ( t h i s . s c h e m e [ t h i s . g e n e r a t o r I n d e x ] , t h i s . s c h e m e [ 0 ] ) ( . 5 ) ; t h i s . g e n e r a t o r I n d e x = 0 ; t h i s . r o t a t e C o u n t * = 2 } e l s e { c o l o r = d 3 . i n t e r p o l a t e H s l ( t h i s . s c h e m e [ t h i s . g e n e r a t o r I n d e x ] , t h i s . s c h e m e [ t h i s . g e n e r a t o r I n d e x + 1 ] ) ( . 5 ) ; t h i s . g e n e r a t o r I n d e x + + } t h i s . s c h e m e . p u s h ( c o l o r ) ; r e t u r n   c o l o r } } ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . G r a p h . A j a x " ) ; R i c k s h a w . G r a p h . A j a x = R i c k s h a w . C l a s s . c r e a t e ( { i n i t i a l i z e : f u n c t i o n ( a r g s ) { t h i s . d a t a U R L = a r g s . d a t a U R L ; t h i s . o n D a t a = a r g s . o n D a t a | | f u n c t i o n ( d ) { r e t u r n   d } ; t h i s . o n C o m p l e t e = a r g s . o n C o m p l e t e | | f u n c t i o n ( ) { } ; t h i s . o n E r r o r = a r g s . o n E r r o r | | f u n c t i o n ( ) { } ; t h i s . a r g s = a r g s ; t h i s . r e q u e s t ( ) } , r e q u e s t : f u n c t i o n ( ) { j Q u e r y . a j a x ( { u r l : t h i s . d a t a U R L , d a t a T y p e : " j s o n " , s u c c e s s : t h i s . s u c c e s s . b i n d ( t h i s ) , e r r o r : t h i s . e r r o r . b i n d ( t h i s ) } ) } , e r r o r : f u n c t i o n ( ) { c o n s o l e . l o g ( " e r r o r   l o a d i n g   d a t a U R L :   " + t h i s . d a t a U R L ) ; t h i s . o n E r r o r ( t h i s ) } , s u c c e s s : f u n c t i o n ( d a t a , s t a t u s ) { d a t a = t h i s . o n D a t a ( d a t a ) ; t h i s . a r g s . s e r i e s = t h i s . _ s p l i c e ( { d a t a : d a t a , s e r i e s : t h i s . a r g s . s e r i e s } ) ; t h i s . g r a p h = t h i s . g r a p h | | n e w   R i c k s h a w . G r a p h ( t h i s . a r g s ) ; t h i s . g r a p h . r e n d e r ( ) ; t h i s . o n C o m p l e t e ( t h i s ) } , _ s p l i c e : f u n c t i o n ( a r g s ) { v a r   d a t a = a r g s . d a t a ; v a r   s e r i e s = a r g s . s e r i e s ; i f ( ! a r g s . s e r i e s ) r e t u r n   d a t a ; s e r i e s . f o r E a c h ( f u n c t i o n ( s ) { v a r   s e r i e s K e y = s . k e y | | s . n a m e ; i f ( ! s e r i e s K e y ) t h r o w " s e r i e s   n e e d s   a   k e y   o r   a   n a m e " ; d a t a . f o r E a c h ( f u n c t i o n ( d ) { v a r   d a t a K e y = d . k e y | | d . n a m e ; i f ( ! d a t a K e y ) t h r o w " d a t a   n e e d s   a   k e y   o r   a   n a m e " ; i f ( s e r i e s K e y = = d a t a K e y ) { v a r   p r o p e r t i e s = [ " c o l o r " , " n a m e " , " d a t a " ] ; p r o p e r t i e s . f o r E a c h ( f u n c t i o n ( p ) { i f ( d [ p ] ) s [ p ] = d [ p ] } ) } } ) } ) ; r e t u r n   s e r i e s } } ) ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . G r a p h . A n n o t a t e " ) ; R i c k s h a w . G r a p h . A n n o t a t e = f u n c t i o n ( a r g s ) { v a r   g r a p h = t h i s . g r a p h = a r g s . g r a p h ; t h i s . e l e m e n t s = { t i m e l i n e : a r g s . e l e m e n t } ; v a r   s e l f = t h i s ; t h i s . d a t a = { } ; t h i s . e l e m e n t s . t i m e l i n e . c l a s s L i s t . a d d ( " r i c k s h a w _ a n n o t a t i o n _ t i m e l i n e " ) ; t h i s . a d d = f u n c t i o n ( t i m e , c o n t e n t , e n d _ t i m e ) { s e l f . d a t a [ t i m e ] = s e l f . d a t a [ t i m e ] | | { b o x e s : [ ] } ; s e l f . d a t a [ t i m e ] . b o x e s . p u s h ( { c o n t e n t : c o n t e n t , e n d : e n d _ t i m e } ) } ; t h i s . u p d a t e = f u n c t i o n ( ) { R i c k s h a w . k e y s ( s e l f . d a t a ) . f o r E a c h ( f u n c t i o n ( t i m e ) { v a r   a n n o t a t i o n = s e l f . d a t a [ t i m e ] ; v a r   l e f t = s e l f . g r a p h . x ( t i m e ) ; i f ( l e f t < 0 | | l e f t > s e l f . g r a p h . x . r a n g e ( ) [ 1 ] ) { i f ( a n n o t a t i o n . e l e m e n t ) { a n n o t a t i o n . l i n e . c l a s s L i s t . a d d ( " o f f s c r e e n " ) ; a n n o t a t i o n . e l e m e n t . s t y l e . d i s p l a y = " n o n e " } a n n o t a t i o n . b o x e s . f o r E a c h ( f u n c t i o n ( b o x ) { i f ( b o x . r a n g e E l e m e n t ) b o x . r a n g e E l e m e n t . c l a s s L i s t . a d d ( " o f f s c r e e n " ) } ) ; r e t u r n } i f ( ! a n n o t a t i o n . e l e m e n t ) { v a r   e l e m e n t = a n n o t a t i o n . e l e m e n t = d o c u m e n t . c r e a t e E l e m e n t ( " d i v " ) ; e l e m e n t . c l a s s L i s t . a d d ( " a n n o t a t i o n " ) ; t h i s . e l e m e n t s . t i m e l i n e . a p p e n d C h i l d ( e l e m e n t ) ; e l e m e n t . a d d E v e n t L i s t e n e r ( " c l i c k " , f u n c t i o n ( e ) { e l e m e n t . c l a s s L i s t . t o g g l e ( " a c t i v e " ) ; a n n o t a t i o n . l i n e . c l a s s L i s t . t o g g l e ( " a c t i v e " ) ; a n n o t a t i o n . b o x e s . f o r E a c h ( f u n c t i o n ( b o x ) { i f ( b o x . r a n g e E l e m e n t ) b o x . r a n g e E l e m e n t . c l a s s L i s t . t o g g l e ( " a c t i v e " ) } ) } , f a l s e ) } a n n o t a t i o n . e l e m e n t . s t y l e . l e f t = l e f t + " p x " ; a n n o t a t i o n . e l e m e n t . s t y l e . d i s p l a y = " b l o c k " ; a n n o t a t i o n . b o x e s . f o r E a c h ( f u n c t i o n ( b o x ) { v a r   e l e m e n t = b o x . e l e m e n t ; i f ( ! e l e m e n t ) { e l e m e n t = b o x . e l e m e n t = d o c u m e n t . c r e a t e E l e m e n t ( " d i v " ) ; e l e m e n t . c l a s s L i s t . a d d ( " c o n t e n t " ) ; e l e m e n t . i n n e r H T M L = b o x . c o n t e n t ; a n n o t a t i o n . e l e m e n t . a p p e n d C h i l d ( e l e m e n t ) ; a n n o t a t i o n . l i n e = d o c u m e n t . c r e a t e E l e m e n t ( " d i v " ) ; a n n o t a t i o n . l i n e . c l a s s L i s t . a d d ( " a n n o t a t i o n _ l i n e " ) ; s e l f . g r a p h . e l e m e n t . a p p e n d C h i l d ( a n n o t a t i o n . l i n e ) ; i f ( b o x . e n d ) { b o x . r a n g e E l e m e n t = d o c u m e n t . c r e a t e E l e m e n t ( " d i v " ) ; b o x . r a n g e E l e m e n t . c l a s s L i s t . a d d ( " a n n o t a t i o n _ r a n g e " ) ; s e l f . g r a p h . e l e m e n t . a p p e n d C h i l d ( b o x . r a n g e E l e m e n t ) } } i f ( b o x . e n d ) { v a r   a n n o t a t i o n R a n g e S t a r t = l e f t ; v a r   a n n o t a t i o n R a n g e E n d = M a t h . m i n ( s e l f . g r a p h . x ( b o x . e n d ) , s e l f . g r a p h . x . r a n g e ( ) [ 1 ] ) ; i f ( a n n o t a t i o n R a n g e S t a r t > a n n o t a t i o n R a n g e E n d ) { a n n o t a t i o n R a n g e E n d = l e f t ; a n n o t a t i o n R a n g e S t a r t = M a t h . m a x ( s e l f . g r a p h . x ( b o x . e n d ) , s e l f . g r a p h . x . r a n g e ( ) [ 0 ] ) } v a r   a n n o t a t i o n R a n g e W i d t h = a n n o t a t i o n R a n g e E n d - a n n o t a t i o n R a n g e S t a r t ; b o x . r a n g e E l e m e n t . s t y l e . l e f t = a n n o t a t i o n R a n g e S t a r t + " p x " ; b o x . r a n g e E l e m e n t . s t y l e . w i d t h = a n n o t a t i o n R a n g e W i d t h + " p x " ; b o x . r a n g e E l e m e n t . c l a s s L i s t . r e m o v e ( " o f f s c r e e n " ) } a n n o t a t i o n . l i n e . c l a s s L i s t . r e m o v e ( " o f f s c r e e n " ) ; a n n o t a t i o n . l i n e . s t y l e . l e f t = l e f t + " p x " } ) } , t h i s ) } ; t h i s . g r a p h . o n U p d a t e ( f u n c t i o n ( ) { s e l f . u p d a t e ( ) } ) } ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . G r a p h . A x i s . T i m e " ) ; R i c k s h a w . G r a p h . A x i s . T i m e = f u n c t i o n ( a r g s ) { v a r   s e l f = t h i s ; t h i s . g r a p h = a r g s . g r a p h ; t h i s . e l e m e n t s = [ ] ; t h i s . t i c k s T r e a t m e n t = a r g s . t i c k s T r e a t m e n t | | " p l a i n " ; t h i s . f i x e d T i m e U n i t = a r g s . t i m e U n i t ; v a r   t i m e = a r g s . t i m e F i x t u r e | | n e w   R i c k s h a w . F i x t u r e s . T i m e ; t h i s . a p p r o p r i a t e T i m e U n i t = f u n c t i o n ( ) { v a r   u n i t ; v a r   u n i t s = t i m e . u n i t s ; v a r   d o m a i n = t h i s . g r a p h . x . d o m a i n ( ) ; v a r   r a n g e S e c o n d s = d o m a i n [ 1 ] - d o m a i n [ 0 ] ; u n i t s . f o r E a c h ( f u n c t i o n ( u ) { i f ( M a t h . f l o o r ( r a n g e S e c o n d s / u . s e c o n d s ) > = 2 ) { u n i t = u n i t | | u } } ) ; r e t u r n   u n i t | | t i m e . u n i t s [ t i m e . u n i t s . l e n g t h - 1 ] } ; t h i s . t i c k O f f s e t s = f u n c t i o n ( ) { v a r   d o m a i n = t h i s . g r a p h . x . d o m a i n ( ) ; v a r   u n i t = t h i s . f i x e d T i m e U n i t | | t h i s . a p p r o p r i a t e T i m e U n i t ( ) ; v a r   c o u n t = M a t h . c e i l ( ( d o m a i n [ 1 ] - d o m a i n [ 0 ] ) / u n i t . s e c o n d s ) ; v a r   r u n n i n g T i c k = d o m a i n [ 0 ] ; v a r   o f f s e t s = [ ] ; f o r ( v a r   i = 0 ; i < c o u n t ; i + + ) { v a r   t i c k V a l u e = t i m e . c e i l ( r u n n i n g T i c k , u n i t ) ; r u n n i n g T i c k = t i c k V a l u e + u n i t . s e c o n d s / 2 ; o f f s e t s . p u s h ( { v a l u e : t i c k V a l u e , u n i t : u n i t } ) } r e t u r n   o f f s e t s } ; t h i s . r e n d e r = f u n c t i o n ( ) { t h i s . e l e m e n t s . f o r E a c h ( f u n c t i o n ( e ) { e . p a r e n t N o d e . r e m o v e C h i l d ( e ) } ) ; t h i s . e l e m e n t s = [ ] ; v a r   o f f s e t s = t h i s . t i c k O f f s e t s ( ) ; o f f s e t s . f o r E a c h ( f u n c t i o n ( o ) { i f ( s e l f . g r a p h . x ( o . v a l u e ) > s e l f . g r a p h . x . r a n g e ( ) [ 1 ] ) r e t u r n ; v a r   e l e m e n t = d o c u m e n t . c r e a t e E l e m e n t ( " d i v " ) ; e l e m e n t . s t y l e . l e f t = s e l f . g r a p h . x ( o . v a l u e ) + " p x " ; e l e m e n t . c l a s s L i s t . a d d ( " x _ t i c k " ) ; e l e m e n t . c l a s s L i s t . a d d ( s e l f . t i c k s T r e a t m e n t ) ; v a r   t i t l e = d o c u m e n t . c r e a t e E l e m e n t ( " d i v " ) ; t i t l e . c l a s s L i s t . a d d ( " t i t l e " ) ; t i t l e . i n n e r H T M L = o . u n i t . f o r m a t t e r ( n e w   D a t e ( o . v a l u e * 1 e 3 ) ) ; e l e m e n t . a p p e n d C h i l d ( t i t l e ) ; s e l f . g r a p h . e l e m e n t . a p p e n d C h i l d ( e l e m e n t ) ; s e l f . e l e m e n t s . p u s h ( e l e m e n t ) } ) } ; t h i s . g r a p h . o n U p d a t e ( f u n c t i o n ( ) { s e l f . r e n d e r ( ) } ) } ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . G r a p h . A x i s . X " ) ; R i c k s h a w . G r a p h . A x i s . X = f u n c t i o n ( a r g s ) { v a r   s e l f = t h i s ; v a r   b e r t h R a t e = . 1 ; t h i s . i n i t i a l i z e = f u n c t i o n ( a r g s ) { t h i s . g r a p h = a r g s . g r a p h ; t h i s . o r i e n t a t i o n = a r g s . o r i e n t a t i o n | | " t o p " ; t h i s . p i x e l s P e r T i c k = a r g s . p i x e l s P e r T i c k | | 7 5 ; i f ( a r g s . t i c k s ) t h i s . s t a t i c T i c k s = a r g s . t i c k s ; i f ( a r g s . t i c k V a l u e s ) t h i s . t i c k V a l u e s = a r g s . t i c k V a l u e s ; t h i s . t i c k S i z e = a r g s . t i c k S i z e | | 4 ; t h i s . t i c k s T r e a t m e n t = a r g s . t i c k s T r e a t m e n t | | " p l a i n " ; i f ( a r g s . e l e m e n t ) { t h i s . e l e m e n t = a r g s . e l e m e n t ; t h i s . _ d i s c o v e r S i z e ( a r g s . e l e m e n t , a r g s ) ; t h i s . v i s = d 3 . s e l e c t ( a r g s . e l e m e n t ) . a p p e n d ( " s v g : s v g " ) . a t t r ( " h e i g h t " , t h i s . h e i g h t ) . a t t r ( " w i d t h " , t h i s . w i d t h ) . a t t r ( " c l a s s " , " r i c k s h a w _ g r a p h   x _ a x i s _ d 3 " ) ; t h i s . e l e m e n t = t h i s . v i s [ 0 ] [ 0 ] ; t h i s . e l e m e n t . s t y l e . p o s i t i o n = " r e l a t i v e " ; t h i s . s e t S i z e ( { w i d t h : a r g s . w i d t h , h e i g h t : a r g s . h e i g h t } ) } e l s e { t h i s . v i s = t h i s . g r a p h . v i s } t h i s . g r a p h . o n U p d a t e ( f u n c t i o n ( ) { s e l f . r e n d e r ( ) } ) } ; t h i s . s e t S i z e = f u n c t i o n ( a r g s ) { a r g s = a r g s | | { } ; i f ( ! t h i s . e l e m e n t ) r e t u r n ; t h i s . _ d i s c o v e r S i z e ( t h i s . e l e m e n t . p a r e n t N o d e , a r g s ) ; t h i s . v i s . a t t r ( " h e i g h t " , t h i s . h e i g h t ) . a t t r ( " w i d t h " , t h i s . w i d t h * ( 1 + b e r t h R a t e ) ) ; v a r   b e r t h = M a t h . f l o o r ( t h i s . w i d t h * b e r t h R a t e / 2 ) ; t h i s . e l e m e n t . s t y l e . l e f t = - 1 * b e r t h + " p x " } ; t h i s . r e n d e r = f u n c t i o n ( ) { i f ( t h i s . _ r e n d e r W i d t h ! = = u n d e f i n e d & & t h i s . g r a p h . w i d t h ! = = t h i s . _ r e n d e r W i d t h ) t h i s . s e t S i z e ( { a u t o : t r u e } ) ; v a r   a x i s = d 3 . s v g . a x i s ( ) . s c a l e ( t h i s . g r a p h . x ) . o r i e n t ( t h i s . o r i e n t a t i o n ) ; a x i s . t i c k F o r m a t ( a r g s . t i c k F o r m a t | | f u n c t i o n ( x ) { r e t u r n   x } ) ; i f ( t h i s . t i c k V a l u e s ) a x i s . t i c k V a l u e s ( t h i s . t i c k V a l u e s ) ; t h i s . t i c k s = t h i s . s t a t i c T i c k s | | M a t h . f l o o r ( t h i s . g r a p h . w i d t h / t h i s . p i x e l s P e r T i c k ) ; v a r   b e r t h = M a t h . f l o o r ( t h i s . w i d t h * b e r t h R a t e / 2 ) | | 0 ; v a r   t r a n s f o r m ; i f ( t h i s . o r i e n t a t i o n = = " t o p " ) { v a r   y O f f s e t = t h i s . h e i g h t | | t h i s . g r a p h . h e i g h t ; t r a n s f o r m = " t r a n s l a t e ( " + b e r t h + " , " + y O f f s e t + " ) " } e l s e { t r a n s f o r m = " t r a n s l a t e ( " + b e r t h + " ,   0 ) " } i f ( t h i s . e l e m e n t ) { t h i s . v i s . s e l e c t A l l ( " * " ) . r e m o v e ( ) } t h i s . v i s . a p p e n d ( " s v g : g " ) . a t t r ( " c l a s s " , [ " x _ t i c k s _ d 3 " , t h i s . t i c k s T r e a t m e n t ] . j o i n ( "   " ) ) . a t t r ( " t r a n s f o r m " , t r a n s f o r m ) . c a l l ( a x i s . t i c k s ( t h i s . t i c k s ) . t i c k S u b d i v i d e ( 0 ) . t i c k S i z e ( t h i s . t i c k S i z e ) ) ; v a r   g r i d S i z e = ( t h i s . o r i e n t a t i o n = = " b o t t o m " ? 1 : - 1 ) * t h i s . g r a p h . h e i g h t ; t h i s . g r a p h . v i s . a p p e n d ( " s v g : g " ) . a t t r ( " c l a s s " , " x _ g r i d _ d 3 " ) . c a l l ( a x i s . t i c k s ( t h i s . t i c k s ) . t i c k S u b d i v i d e ( 0 ) . t i c k S i z e ( g r i d S i z e ) ) . s e l e c t A l l ( " t e x t " ) . e a c h ( f u n c t i o n ( ) { t h i s . p a r e n t N o d e . s e t A t t r i b u t e ( " d a t a - x - v a l u e " , t h i s . t e x t C o n t e n t ) } ) ; t h i s . _ r e n d e r H e i g h t = t h i s . g r a p h . h e i g h t } ; t h i s . _ d i s c o v e r S i z e = f u n c t i o n ( e l e m e n t , a r g s ) { i f ( t y p e o f   w i n d o w ! = = " u n d e f i n e d " ) { v a r   s t y l e = w i n d o w . g e t C o m p u t e d S t y l e ( e l e m e n t , n u l l ) ; v a r   e l e m e n t H e i g h t = p a r s e I n t ( s t y l e . g e t P r o p e r t y V a l u e ( " h e i g h t " ) , 1 0 ) ; i f ( ! a r g s . a u t o ) { v a r   e l e m e n t W i d t h = p a r s e I n t ( s t y l e . g e t P r o p e r t y V a l u e ( " w i d t h " ) , 1 0 ) } } t h i s . w i d t h = ( a r g s . w i d t h | | e l e m e n t W i d t h | | t h i s . g r a p h . w i d t h ) * ( 1 + b e r t h R a t e ) ; t h i s . h e i g h t = a r g s . h e i g h t | | e l e m e n t H e i g h t | | 4 0 } ; t h i s . i n i t i a l i z e ( a r g s ) } ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . G r a p h . A x i s . Y " ) ; R i c k s h a w . G r a p h . A x i s . Y = R i c k s h a w . C l a s s . c r e a t e ( { i n i t i a l i z e : f u n c t i o n ( a r g s ) { t h i s . g r a p h = a r g s . g r a p h ; t h i s . o r i e n t a t i o n = a r g s . o r i e n t a t i o n | | " r i g h t " ; t h i s . p i x e l s P e r T i c k = a r g s . p i x e l s P e r T i c k | | 7 5 ; i f ( a r g s . t i c k s ) t h i s . s t a t i c T i c k s = a r g s . t i c k s ; i f ( a r g s . t i c k V a l u e s ) t h i s . t i c k V a l u e s = a r g s . t i c k V a l u e s ; t h i s . t i c k S i z e = a r g s . t i c k S i z e | | 4 ; t h i s . t i c k s T r e a t m e n t = a r g s . t i c k s T r e a t m e n t | | " p l a i n " ; t h i s . t i c k F o r m a t = a r g s . t i c k F o r m a t | | f u n c t i o n ( y ) { r e t u r n   y } ; t h i s . b e r t h R a t e = . 1 ; i f ( a r g s . e l e m e n t ) { t h i s . e l e m e n t = a r g s . e l e m e n t ; t h i s . v i s = d 3 . s e l e c t ( a r g s . e l e m e n t ) . a p p e n d ( " s v g : s v g " ) . a t t r ( " c l a s s " , " r i c k s h a w _ g r a p h   y _ a x i s " ) ; t h i s . e l e m e n t = t h i s . v i s [ 0 ] [ 0 ] ; t h i s . e l e m e n t . s t y l e . p o s i t i o n = " r e l a t i v e " ; t h i s . s e t S i z e ( { w i d t h : a r g s . w i d t h , h e i g h t : a r g s . h e i g h t } ) } e l s e { t h i s . v i s = t h i s . g r a p h . v i s } v a r   s e l f = t h i s ; t h i s . g r a p h . o n U p d a t e ( f u n c t i o n ( ) { s e l f . r e n d e r ( ) } ) } , s e t S i z e : f u n c t i o n ( a r g s ) { a r g s = a r g s | | { } ; i f ( ! t h i s . e l e m e n t ) r e t u r n ; i f ( t y p e o f   w i n d o w ! = = " u n d e f i n e d " ) { v a r   s t y l e = w i n d o w . g e t C o m p u t e d S t y l e ( t h i s . e l e m e n t . p a r e n t N o d e , n u l l ) ; v a r   e l e m e n t W i d t h = p a r s e I n t ( s t y l e . g e t P r o p e r t y V a l u e ( " w i d t h " ) , 1 0 ) ; i f ( ! a r g s . a u t o ) { v a r   e l e m e n t H e i g h t = p a r s e I n t ( s t y l e . g e t P r o p e r t y V a l u e ( " h e i g h t " ) , 1 0 ) } } t h i s . w i d t h = a r g s . w i d t h | | e l e m e n t W i d t h | | t h i s . g r a p h . w i d t h * t h i s . b e r t h R a t e ; t h i s . h e i g h t = a r g s . h e i g h t | | e l e m e n t H e i g h t | | t h i s . g r a p h . h e i g h t ; t h i s . v i s . a t t r ( " w i d t h " , t h i s . w i d t h ) . a t t r ( " h e i g h t " , t h i s . h e i g h t * ( 1 + t h i s . b e r t h R a t e ) ) ; v a r   b e r t h = t h i s . h e i g h t * t h i s . b e r t h R a t e ; i f ( t h i s . o r i e n t a t i o n = = " l e f t " ) { t h i s . e l e m e n t . s t y l e . t o p = - 1 * b e r t h + " p x " } } , r e n d e r : f u n c t i o n ( ) { i f ( t h i s . _ r e n d e r H e i g h t ! = = u n d e f i n e d & & t h i s . g r a p h . h e i g h t ! = = t h i s . _ r e n d e r H e i g h t ) t h i s . s e t S i z e ( { a u t o : t r u e } ) ; t h i s . t i c k s = t h i s . s t a t i c T i c k s | | M a t h . f l o o r ( t h i s . g r a p h . h e i g h t / t h i s . p i x e l s P e r T i c k ) ; v a r   a x i s = t h i s . _ d r a w A x i s ( t h i s . g r a p h . y ) ; t h i s . _ d r a w G r i d ( a x i s ) ; t h i s . _ r e n d e r H e i g h t = t h i s . g r a p h . h e i g h t } , _ d r a w A x i s : f u n c t i o n ( s c a l e ) { v a r   a x i s = d 3 . s v g . a x i s ( ) . s c a l e ( s c a l e ) . o r i e n t ( t h i s . o r i e n t a t i o n ) ; a x i s . t i c k F o r m a t ( t h i s . t i c k F o r m a t ) ; i f ( t h i s . t i c k V a l u e s ) a x i s . t i c k V a l u e s ( t h i s . t i c k V a l u e s ) ; i f ( t h i s . o r i e n t a t i o n = = " l e f t " ) { v a r   b e r t h = t h i s . h e i g h t * t h i s . b e r t h R a t e ; v a r   t r a n s f o r m = " t r a n s l a t e ( " + t h i s . w i d t h + " ,   " + b e r t h + " ) " } i f ( t h i s . e l e m e n t ) { t h i s . v i s . s e l e c t A l l ( " * " ) . r e m o v e ( ) } t h i s . v i s . a p p e n d ( " s v g : g " ) . a t t r ( " c l a s s " , [ " y _ t i c k s " , t h i s . t i c k s T r e a t m e n t ] . j o i n ( "   " ) ) . a t t r ( " t r a n s f o r m " , t r a n s f o r m ) . c a l l ( a x i s . t i c k s ( t h i s . t i c k s ) . t i c k S u b d i v i d e ( 0 ) . t i c k S i z e ( t h i s . t i c k S i z e ) ) ; r e t u r n   a x i s } , _ d r a w G r i d : f u n c t i o n ( a x i s ) { v a r   g r i d S i z e = ( t h i s . o r i e n t a t i o n = = " r i g h t " ? 1 : - 1 ) * t h i s . g r a p h . w i d t h ; t h i s . g r a p h . v i s . a p p e n d ( " s v g : g " ) . a t t r ( " c l a s s " , " y _ g r i d " ) . c a l l ( a x i s . t i c k s ( t h i s . t i c k s ) . t i c k S u b d i v i d e ( 0 ) . t i c k S i z e ( g r i d S i z e ) ) . s e l e c t A l l ( " t e x t " ) . e a c h ( f u n c t i o n ( ) { t h i s . p a r e n t N o d e . s e t A t t r i b u t e ( " d a t a - y - v a l u e " , t h i s . t e x t C o n t e n t ) 
 } ) } } ) ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . G r a p h . A x i s . Y . S c a l e d " ) ; R i c k s h a w . G r a p h . A x i s . Y . S c a l e d = R i c k s h a w . C l a s s . c r e a t e ( R i c k s h a w . G r a p h . A x i s . Y , { i n i t i a l i z e : f u n c t i o n ( $ s u p e r , a r g s ) { i f ( t y p e o f   a r g s . s c a l e = = = " u n d e f i n e d " ) { t h r o w   n e w   E r r o r ( " S c a l e d   r e q u i r e s   s c a l e " ) } t h i s . s c a l e = a r g s . s c a l e ; i f ( t y p e o f   a r g s . g r i d = = = " u n d e f i n e d " ) { t h i s . g r i d = t r u e } e l s e { t h i s . g r i d = a r g s . g r i d } $ s u p e r ( a r g s ) } , _ d r a w A x i s : f u n c t i o n ( $ s u p e r , s c a l e ) { v a r   d o m a i n = t h i s . s c a l e . d o m a i n ( ) ; v a r   r e n d e r D o m a i n = t h i s . g r a p h . r e n d e r e r . d o m a i n ( ) . y ; v a r   e x t e n t s = [ M a t h . m i n . a p p l y ( M a t h , d o m a i n ) , M a t h . m a x . a p p l y ( M a t h , d o m a i n ) ] ; v a r   e x t e n t M a p = d 3 . s c a l e . l i n e a r ( ) . d o m a i n ( [ 0 , 1 ] ) . r a n g e ( e x t e n t s ) ; v a r   a d j E x t e n t s = [ e x t e n t M a p ( r e n d e r D o m a i n [ 0 ] ) , e x t e n t M a p ( r e n d e r D o m a i n [ 1 ] ) ] ; v a r   a d j u s t m e n t = d 3 . s c a l e . l i n e a r ( ) . d o m a i n ( e x t e n t s ) . r a n g e ( a d j E x t e n t s ) ; v a r   a d j u s t e d S c a l e = t h i s . s c a l e . c o p y ( ) . d o m a i n ( d o m a i n . m a p ( a d j u s t m e n t ) ) . r a n g e ( s c a l e . r a n g e ( ) ) ; r e t u r n   $ s u p e r ( a d j u s t e d S c a l e ) } , _ d r a w G r i d : f u n c t i o n ( $ s u p e r , a x i s ) { i f ( t h i s . g r i d ) { $ s u p e r ( a x i s ) } } } ) ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . G r a p h . B e h a v i o r . S e r i e s . H i g h l i g h t " ) ; R i c k s h a w . G r a p h . B e h a v i o r . S e r i e s . H i g h l i g h t = f u n c t i o n ( a r g s ) { t h i s . g r a p h = a r g s . g r a p h ; t h i s . l e g e n d = a r g s . l e g e n d ; v a r   s e l f = t h i s ; v a r   c o l o r S a f e = { } ; v a r   a c t i v e L i n e = n u l l ; v a r   d i s a b l e d C o l o r = a r g s . d i s a b l e d C o l o r | | f u n c t i o n ( s e r i e s C o l o r ) { r e t u r n   d 3 . i n t e r p o l a t e R g b ( s e r i e s C o l o r , d 3 . r g b ( " # d 8 d 8 d 8 " ) ) ( . 8 ) . t o S t r i n g ( ) } ; t h i s . a d d H i g h l i g h t E v e n t s = f u n c t i o n ( l ) { l . e l e m e n t . a d d E v e n t L i s t e n e r ( " m o u s e o v e r " , f u n c t i o n ( e ) { i f ( a c t i v e L i n e ) r e t u r n ; e l s e   a c t i v e L i n e = l ; s e l f . l e g e n d . l i n e s . f o r E a c h ( f u n c t i o n ( l i n e ) { i f ( l = = = l i n e ) { i f ( s e l f . g r a p h . r e n d e r e r . u n s t a c k & & ( l i n e . s e r i e s . r e n d e r e r ? l i n e . s e r i e s . r e n d e r e r . u n s t a c k : t r u e ) ) { v a r   s e r i e s I n d e x = s e l f . g r a p h . s e r i e s . i n d e x O f ( l i n e . s e r i e s ) ; l i n e . o r i g i n a l I n d e x = s e r i e s I n d e x ; v a r   s e r i e s = s e l f . g r a p h . s e r i e s . s p l i c e ( s e r i e s I n d e x , 1 ) [ 0 ] ; s e l f . g r a p h . s e r i e s . p u s h ( s e r i e s ) } r e t u r n } c o l o r S a f e [ l i n e . s e r i e s . n a m e ] = c o l o r S a f e [ l i n e . s e r i e s . n a m e ] | | l i n e . s e r i e s . c o l o r ; l i n e . s e r i e s . c o l o r = d i s a b l e d C o l o r ( l i n e . s e r i e s . c o l o r ) } ) ; s e l f . g r a p h . u p d a t e ( ) } , f a l s e ) ; l . e l e m e n t . a d d E v e n t L i s t e n e r ( " m o u s e o u t " , f u n c t i o n ( e ) { i f ( ! a c t i v e L i n e ) r e t u r n ; e l s e   a c t i v e L i n e = n u l l ; s e l f . l e g e n d . l i n e s . f o r E a c h ( f u n c t i o n ( l i n e ) { i f ( l = = = l i n e & & l i n e . h a s O w n P r o p e r t y ( " o r i g i n a l I n d e x " ) ) { v a r   s e r i e s = s e l f . g r a p h . s e r i e s . p o p ( ) ; s e l f . g r a p h . s e r i e s . s p l i c e ( l i n e . o r i g i n a l I n d e x , 0 , s e r i e s ) ; d e l e t e   l i n e . o r i g i n a l I n d e x } i f ( c o l o r S a f e [ l i n e . s e r i e s . n a m e ] ) { l i n e . s e r i e s . c o l o r = c o l o r S a f e [ l i n e . s e r i e s . n a m e ] } } ) ; s e l f . g r a p h . u p d a t e ( ) } , f a l s e ) } ; i f ( t h i s . l e g e n d ) { t h i s . l e g e n d . l i n e s . f o r E a c h ( f u n c t i o n ( l ) { s e l f . a d d H i g h l i g h t E v e n t s ( l ) } ) } } ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . G r a p h . B e h a v i o r . S e r i e s . O r d e r " ) ; R i c k s h a w . G r a p h . B e h a v i o r . S e r i e s . O r d e r = f u n c t i o n ( a r g s ) { t h i s . g r a p h = a r g s . g r a p h ; t h i s . l e g e n d = a r g s . l e g e n d ; v a r   s e l f = t h i s ; i f ( t y p e o f   w i n d o w . j Q u e r y = = " u n d e f i n e d " ) { t h r o w " c o u l d n ' t   f i n d   j Q u e r y   a t   w i n d o w . j Q u e r y " } i f ( t y p e o f   w i n d o w . j Q u e r y . u i = = " u n d e f i n e d " ) { t h r o w " c o u l d n ' t   f i n d   j Q u e r y   U I   a t   w i n d o w . j Q u e r y . u i " } j Q u e r y ( f u n c t i o n ( ) { j Q u e r y ( s e l f . l e g e n d . l i s t ) . s o r t a b l e ( { c o n t a i n m e n t : " p a r e n t " , t o l e r a n c e : " p o i n t e r " , u p d a t e : f u n c t i o n ( e v e n t , u i ) { v a r   s e r i e s = [ ] ; j Q u e r y ( s e l f . l e g e n d . l i s t ) . f i n d ( " l i " ) . e a c h ( f u n c t i o n ( i n d e x , i t e m ) { i f ( ! i t e m . s e r i e s ) r e t u r n ; s e r i e s . p u s h ( i t e m . s e r i e s ) } ) ; f o r ( v a r   i = s e l f . g r a p h . s e r i e s . l e n g t h - 1 ; i > = 0 ; i - - ) { s e l f . g r a p h . s e r i e s [ i ] = s e r i e s . s h i f t ( ) } s e l f . g r a p h . u p d a t e ( ) } } ) ; j Q u e r y ( s e l f . l e g e n d . l i s t ) . d i s a b l e S e l e c t i o n ( ) } ) ; t h i s . g r a p h . o n U p d a t e ( f u n c t i o n ( ) { v a r   h = w i n d o w . g e t C o m p u t e d S t y l e ( s e l f . l e g e n d . e l e m e n t ) . h e i g h t ; s e l f . l e g e n d . e l e m e n t . s t y l e . h e i g h t = h } ) } ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . G r a p h . B e h a v i o r . S e r i e s . T o g g l e " ) ; R i c k s h a w . G r a p h . B e h a v i o r . S e r i e s . T o g g l e = f u n c t i o n ( a r g s ) { t h i s . g r a p h = a r g s . g r a p h ; t h i s . l e g e n d = a r g s . l e g e n d ; v a r   s e l f = t h i s ; t h i s . a d d A n c h o r = f u n c t i o n ( l i n e ) { v a r   a n c h o r = d o c u m e n t . c r e a t e E l e m e n t ( " a " ) ; a n c h o r . i n n e r H T M L = " & # 1 0 0 0 4 ; " ; a n c h o r . c l a s s L i s t . a d d ( " a c t i o n " ) ; l i n e . e l e m e n t . i n s e r t B e f o r e ( a n c h o r , l i n e . e l e m e n t . f i r s t C h i l d ) ; a n c h o r . o n c l i c k = f u n c t i o n ( e ) { i f ( l i n e . s e r i e s . d i s a b l e d ) { l i n e . s e r i e s . e n a b l e ( ) ; l i n e . e l e m e n t . c l a s s L i s t . r e m o v e ( " d i s a b l e d " ) } e l s e { i f ( t h i s . g r a p h . s e r i e s . f i l t e r ( f u n c t i o n ( s ) { r e t u r n ! s . d i s a b l e d } ) . l e n g t h < = 1 ) r e t u r n ; l i n e . s e r i e s . d i s a b l e ( ) ; l i n e . e l e m e n t . c l a s s L i s t . a d d ( " d i s a b l e d " ) } s e l f . g r a p h . u p d a t e ( ) } . b i n d ( t h i s ) ; v a r   l a b e l = l i n e . e l e m e n t . g e t E l e m e n t s B y T a g N a m e ( " s p a n " ) [ 0 ] ; l a b e l . o n c l i c k = f u n c t i o n ( e ) { v a r   d i s a b l e A l l O t h e r L i n e s = l i n e . s e r i e s . d i s a b l e d ; i f ( ! d i s a b l e A l l O t h e r L i n e s ) { f o r ( v a r   i = 0 ; i < s e l f . l e g e n d . l i n e s . l e n g t h ; i + + ) { v a r   l = s e l f . l e g e n d . l i n e s [ i ] ; i f ( l i n e . s e r i e s = = = l . s e r i e s ) { } e l s e   i f ( l . s e r i e s . d i s a b l e d ) { } e l s e { d i s a b l e A l l O t h e r L i n e s = t r u e ; b r e a k } } } i f ( d i s a b l e A l l O t h e r L i n e s ) { l i n e . s e r i e s . e n a b l e ( ) ; l i n e . e l e m e n t . c l a s s L i s t . r e m o v e ( " d i s a b l e d " ) ; s e l f . l e g e n d . l i n e s . f o r E a c h ( f u n c t i o n ( l ) { i f ( l i n e . s e r i e s = = = l . s e r i e s ) { } e l s e { l . s e r i e s . d i s a b l e ( ) ; l . e l e m e n t . c l a s s L i s t . a d d ( " d i s a b l e d " ) } } ) } e l s e { s e l f . l e g e n d . l i n e s . f o r E a c h ( f u n c t i o n ( l ) { l . s e r i e s . e n a b l e ( ) ; l . e l e m e n t . c l a s s L i s t . r e m o v e ( " d i s a b l e d " ) } ) } s e l f . g r a p h . u p d a t e ( ) } } ; i f ( t h i s . l e g e n d ) { v a r   $ = j Q u e r y ; i f ( t y p e o f   $ ! = " u n d e f i n e d " & & $ ( t h i s . l e g e n d . l i s t ) . s o r t a b l e ) { $ ( t h i s . l e g e n d . l i s t ) . s o r t a b l e ( { s t a r t : f u n c t i o n ( e v e n t , u i ) { u i . i t e m . b i n d ( " n o . o n c l i c k " , f u n c t i o n ( e v e n t ) { e v e n t . p r e v e n t D e f a u l t ( ) } ) } , s t o p : f u n c t i o n ( e v e n t , u i ) { s e t T i m e o u t ( f u n c t i o n ( ) { u i . i t e m . u n b i n d ( " n o . o n c l i c k " ) } , 2 5 0 ) } } ) } t h i s . l e g e n d . l i n e s . f o r E a c h ( f u n c t i o n ( l ) { s e l f . a d d A n c h o r ( l ) } ) } t h i s . _ a d d B e h a v i o r = f u n c t i o n ( ) { t h i s . g r a p h . s e r i e s . f o r E a c h ( f u n c t i o n ( s ) { s . d i s a b l e = f u n c t i o n ( ) { i f ( s e l f . g r a p h . s e r i e s . l e n g t h < = 1 ) { t h r o w " o n l y   o n e   s e r i e s   l e f t " } s . d i s a b l e d = t r u e } ; s . e n a b l e = f u n c t i o n ( ) { s . d i s a b l e d = f a l s e } } ) } ; t h i s . _ a d d B e h a v i o r ( ) ; t h i s . u p d a t e B e h a v i o u r = f u n c t i o n ( ) { t h i s . _ a d d B e h a v i o r ( ) } } ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . G r a p h . H o v e r D e t a i l " ) ; R i c k s h a w . G r a p h . H o v e r D e t a i l = R i c k s h a w . C l a s s . c r e a t e ( { i n i t i a l i z e : f u n c t i o n ( a r g s ) { v a r   g r a p h = t h i s . g r a p h = a r g s . g r a p h ; t h i s . x F o r m a t t e r = a r g s . x F o r m a t t e r | | f u n c t i o n ( x ) { r e t u r n   n e w   D a t e ( x * 1 e 3 ) . t o U T C S t r i n g ( ) } ; t h i s . y F o r m a t t e r = a r g s . y F o r m a t t e r | | f u n c t i o n ( y ) { r e t u r n   y = = = n u l l ? y : y . t o F i x e d ( 2 ) } ; v a r   e l e m e n t = t h i s . e l e m e n t = d o c u m e n t . c r e a t e E l e m e n t ( " d i v " ) ; e l e m e n t . c l a s s N a m e = " d e t a i l " ; t h i s . v i s i b l e = t r u e ; g r a p h . e l e m e n t . a p p e n d C h i l d ( e l e m e n t ) ; t h i s . l a s t E v e n t = n u l l ; t h i s . _ a d d L i s t e n e r s ( ) ; t h i s . o n S h o w = a r g s . o n S h o w ; t h i s . o n H i d e = a r g s . o n H i d e ; t h i s . o n R e n d e r = a r g s . o n R e n d e r ; t h i s . f o r m a t t e r = a r g s . f o r m a t t e r | | t h i s . f o r m a t t e r } , f o r m a t t e r : f u n c t i o n ( s e r i e s , x , y , f o r m a t t e d X , f o r m a t t e d Y , d ) { r e t u r n   s e r i e s . n a m e + " : & n b s p ; " + f o r m a t t e d Y } , u p d a t e : f u n c t i o n ( e ) { e = e | | t h i s . l a s t E v e n t ; i f ( ! e ) r e t u r n ; t h i s . l a s t E v e n t = e ; i f ( ! e . t a r g e t . n o d e N a m e . m a t c h ( / ^ ( p a t h | s v g | r e c t | c i r c l e ) $ / ) ) r e t u r n ; v a r   g r a p h = t h i s . g r a p h ; v a r   e v e n t X = e . o f f s e t X | | e . l a y e r X ; v a r   e v e n t Y = e . o f f s e t Y | | e . l a y e r Y ; v a r   j = 0 ; v a r   p o i n t s = [ ] ; v a r   n e a r e s t P o i n t ; t h i s . g r a p h . s e r i e s . a c t i v e ( ) . f o r E a c h ( f u n c t i o n ( s e r i e s ) { v a r   d a t a = t h i s . g r a p h . s t a c k e d D a t a [ j + + ] ; i f ( ! d a t a . l e n g t h ) r e t u r n ; v a r   d o m a i n X = g r a p h . x . i n v e r t ( e v e n t X ) ; v a r   d o m a i n I n d e x S c a l e = d 3 . s c a l e . l i n e a r ( ) . d o m a i n ( [ d a t a [ 0 ] . x , d a t a . s l i c e ( - 1 ) [ 0 ] . x ] ) . r a n g e ( [ 0 , d a t a . l e n g t h - 1 ] ) ; v a r   a p p r o x i m a t e I n d e x = M a t h . r o u n d ( d o m a i n I n d e x S c a l e ( d o m a i n X ) ) ; i f ( a p p r o x i m a t e I n d e x = = d a t a . l e n g t h - 1 ) a p p r o x i m a t e I n d e x - - ; v a r   d a t a I n d e x = M a t h . m i n ( a p p r o x i m a t e I n d e x | | 0 , d a t a . l e n g t h - 1 ) ; f o r ( v a r   i = a p p r o x i m a t e I n d e x ; i < d a t a . l e n g t h - 1 ; ) { i f ( ! d a t a [ i ] | | ! d a t a [ i + 1 ] ) b r e a k ; i f ( d a t a [ i ] . x < = d o m a i n X & & d a t a [ i + 1 ] . x > d o m a i n X ) { d a t a I n d e x = M a t h . a b s ( d o m a i n X - d a t a [ i ] . x ) < M a t h . a b s ( d o m a i n X - d a t a [ i + 1 ] . x ) ? i : i + 1 ; b r e a k } i f ( d a t a [ i + 1 ] . x < = d o m a i n X ) { i + + } e l s e { i - - } } i f ( d a t a I n d e x < 0 ) d a t a I n d e x = 0 ; v a r   v a l u e = d a t a [ d a t a I n d e x ] ; v a r   d i s t a n c e = M a t h . s q r t ( M a t h . p o w ( M a t h . a b s ( g r a p h . x ( v a l u e . x ) - e v e n t X ) , 2 ) + M a t h . p o w ( M a t h . a b s ( g r a p h . y ( v a l u e . y + v a l u e . y 0 ) - e v e n t Y ) , 2 ) ) ; v a r   x F o r m a t t e r = s e r i e s . x F o r m a t t e r | | t h i s . x F o r m a t t e r ; v a r   y F o r m a t t e r = s e r i e s . y F o r m a t t e r | | t h i s . y F o r m a t t e r ; v a r   p o i n t = { f o r m a t t e d X V a l u e : x F o r m a t t e r ( v a l u e . x ) , f o r m a t t e d Y V a l u e : y F o r m a t t e r ( s e r i e s . s c a l e ? s e r i e s . s c a l e . i n v e r t ( v a l u e . y ) : v a l u e . y ) , s e r i e s : s e r i e s , v a l u e : v a l u e , d i s t a n c e : d i s t a n c e , o r d e r : j , n a m e : s e r i e s . n a m e } ; i f ( ! n e a r e s t P o i n t | | d i s t a n c e < n e a r e s t P o i n t . d i s t a n c e ) { n e a r e s t P o i n t = p o i n t } p o i n t s . p u s h ( p o i n t ) } , t h i s ) ; i f ( ! n e a r e s t P o i n t ) r e t u r n ; n e a r e s t P o i n t . a c t i v e = t r u e ; v a r   d o m a i n X = n e a r e s t P o i n t . v a l u e . x ; v a r   f o r m a t t e d X V a l u e = n e a r e s t P o i n t . f o r m a t t e d X V a l u e ; t h i s . e l e m e n t . i n n e r H T M L = " " ; t h i s . e l e m e n t . s t y l e . l e f t = g r a p h . x ( d o m a i n X ) + " p x " ; t h i s . v i s i b l e & & t h i s . r e n d e r ( { p o i n t s : p o i n t s , d e t a i l : p o i n t s , m o u s e X : e v e n t X , m o u s e Y : e v e n t Y , f o r m a t t e d X V a l u e : f o r m a t t e d X V a l u e , d o m a i n X : d o m a i n X } ) } , h i d e : f u n c t i o n ( ) { t h i s . v i s i b l e = f a l s e ; t h i s . e l e m e n t . c l a s s L i s t . a d d ( " i n a c t i v e " ) ; i f ( t y p e o f   t h i s . o n H i d e = = " f u n c t i o n " ) { t h i s . o n H i d e ( ) } } , s h o w : f u n c t i o n ( ) { t h i s . v i s i b l e = t r u e ; t h i s . e l e m e n t . c l a s s L i s t . r e m o v e ( " i n a c t i v e " ) ; i f ( t y p e o f   t h i s . o n S h o w = = " f u n c t i o n " ) { t h i s . o n S h o w ( ) } } , r e n d e r : f u n c t i o n ( a r g s ) { v a r   g r a p h = t h i s . g r a p h ; v a r   p o i n t s = a r g s . p o i n t s ; v a r   p o i n t = p o i n t s . f i l t e r ( f u n c t i o n ( p ) { r e t u r n   p . a c t i v e } ) . s h i f t ( ) ; i f ( p o i n t . v a l u e . y = = = n u l l ) r e t u r n ; v a r   f o r m a t t e d X V a l u e = p o i n t . f o r m a t t e d X V a l u e ; v a r   f o r m a t t e d Y V a l u e = p o i n t . f o r m a t t e d Y V a l u e ; t h i s . e l e m e n t . i n n e r H T M L = " " ; t h i s . e l e m e n t . s t y l e . l e f t = g r a p h . x ( p o i n t . v a l u e . x ) + " p x " ; v a r   x L a b e l = d o c u m e n t . c r e a t e E l e m e n t ( " d i v " ) ; x L a b e l . c l a s s N a m e = " x _ l a b e l " ; x L a b e l . i n n e r H T M L = f o r m a t t e d X V a l u e ; t h i s . e l e m e n t . a p p e n d C h i l d ( x L a b e l ) ; v a r   i t e m = d o c u m e n t . c r e a t e E l e m e n t ( " d i v " ) ; i t e m . c l a s s N a m e = " i t e m " ; v a r   s e r i e s = p o i n t . s e r i e s ; v a r   a c t u a l Y = s e r i e s . s c a l e ? s e r i e s . s c a l e . i n v e r t ( p o i n t . v a l u e . y ) : p o i n t . v a l u e . y ; i t e m . i n n e r H T M L = t h i s . f o r m a t t e r ( s e r i e s , p o i n t . v a l u e . x , a c t u a l Y , f o r m a t t e d X V a l u e , f o r m a t t e d Y V a l u e , p o i n t ) ; i t e m . s t y l e . t o p = t h i s . g r a p h . y ( p o i n t . v a l u e . y 0 + p o i n t . v a l u e . y ) + " p x " ; t h i s . e l e m e n t . a p p e n d C h i l d ( i t e m ) ; v a r   d o t = d o c u m e n t . c r e a t e E l e m e n t ( " d i v " ) ; d o t . c l a s s N a m e = " d o t " ; d o t . s t y l e . t o p = i t e m . s t y l e . t o p ; d o t . s t y l e . b o r d e r C o l o r = s e r i e s . c o l o r ; t h i s . e l e m e n t . a p p e n d C h i l d ( d o t ) ; i f ( p o i n t . a c t i v e ) { i t e m . c l a s s L i s t . a d d ( " a c t i v e " ) ; d o t . c l a s s L i s t . a d d ( " a c t i v e " ) } v a r   a l i g n a b l e s = [ x L a b e l , i t e m ] ; a l i g n a b l e s . f o r E a c h ( f u n c t i o n ( e l ) { e l . c l a s s L i s t . a d d ( " l e f t " ) } ) ; t h i s . s h o w ( ) ; v a r   l e f t A l i g n E r r o r = t h i s . _ c a l c L a y o u t E r r o r ( a l i g n a b l e s ) ; i f ( l e f t A l i g n E r r o r > 0 ) { a l i g n a b l e s . f o r E a c h ( f u n c t i o n ( e l ) { e l . c l a s s L i s t . r e m o v e ( " l e f t " ) ; e l . c l a s s L i s t . a d d ( " r i g h t " ) } ) ; v a r   r i g h t A l i g n E r r o r = t h i s . _ c a l c L a y o u t E r r o r ( a l i g n a b l e s ) ; i f ( r i g h t A l i g n E r r o r > l e f t A l i g n E r r o r ) { a l i g n a b l e s . f o r E a c h ( f u n c t i o n ( e l ) { e l . c l a s s L i s t . r e m o v e ( " r i g h t " ) ; e l . c l a s s L i s t . a d d ( " l e f t " ) } ) } } i f ( t y p e o f   t h i s . o n R e n d e r = = " f u n c t i o n " ) { t h i s . o n R e n d e r ( a r g s ) } } , _ c a l c L a y o u t E r r o r : f u n c t i o n ( a l i g n a b l e s ) { v a r   p a r e n t R e c t = t h i s . e l e m e n t . p a r e n t N o d e . g e t B o u n d i n g C l i e n t R e c t ( ) ; v a r   e r r o r = 0 ; v a r   a l i g n R i g h t = a l i g n a b l e s . f o r E a c h ( f u n c t i o n ( e l ) { v a r   r e c t = e l . g e t B o u n d i n g C l i e n t R e c t ( ) ; i f ( ! r e c t . w i d t h ) { r e t u r n } i f ( r e c t . r i g h t > p a r e n t R e c t . r i g h t ) { e r r o r + = r e c t . r i g h t - p a r e n t R e c t . r i g h t } i f ( r e c t . l e f t < p a r e n t R e c t . l e f t ) { e r r o r + = p a r e n t R e c t . l e f t - r e c t . l e f t } } ) ; r e t u r n   e r r o r } , _ a d d L i s t e n e r s : f u n c t i o n ( ) { t h i s . g r a p h . e l e m e n t . a d d E v e n t L i s t e n e r ( " m o u s e m o v e " , f u n c t i o n ( e ) { t h i s . v i s i b l e = t r u e ; t h i s . u p d a t e ( e ) } . b i n d ( t h i s ) , f a l s e ) ; t h i s . g r a p h . o n U p d a t e ( f u n c t i o n ( ) { t h i s . u p d a t e ( ) } . b i n d ( t h i s ) ) ; t h i s . g r a p h . e l e m e n t . a d d E v e n t L i s t e n e r ( " m o u s e o u t " , f u n c t i o n ( e ) { i f ( e . r e l a t e d T a r g e t & & ! ( e . r e l a t e d T a r g e t . c o m p a r e D o c u m e n t P o s i t i o n ( t h i s . g r a p h . e l e m e n t ) & N o d e . D O C U M E N T _ P O S I T I O N _ C O N T A I N S ) ) { t h i s . h i d e ( ) } } . b i n d ( t h i s ) , f a l s e ) } } ) ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . G r a p h . J S O N P " ) ; R i c k s h a w . G r a p h . J S O N P = R i c k s h a w . C l a s s . c r e a t e ( R i c k s h a w . G r a p h . A j a x , { r e q u e s t : f u n c t i o n ( ) { j Q u e r y . a j a x ( { u r l : t h i s . d a t a U R L , d a t a T y p e : " j s o n p " , s u c c e s s : t h i s . s u c c e s s . b i n d ( t h i s ) , e r r o r : t h i s . e r r o r . b i n d ( t h i s ) } ) } } ) ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . G r a p h . L e g e n d " ) ; R i c k s h a w . G r a p h . L e g e n d = R i c k s h a w . C l a s s . c r e a t e ( { c l a s s N a m e : " r i c k s h a w _ l e g e n d " , i n i t i a l i z e : f u n c t i o n ( a r g s ) { t h i s . e l e m e n t = a r g s . e l e m e n t ; t h i s . g r a p h = a r g s . g r a p h ; t h i s . n a t u r a l O r d e r = a r g s . n a t u r a l O r d e r ; t h i s . e l e m e n t . c l a s s L i s t . a d d ( t h i s . c l a s s N a m e ) ; t h i s . l i s t = d o c u m e n t . c r e a t e E l e m e n t ( " u l " ) ; t h i s . e l e m e n t . a p p e n d C h i l d ( t h i s . l i s t ) ; t h i s . r e n d e r ( ) ; t h i s . g r a p h . o n U p d a t e ( f u n c t i o n ( ) { } ) } , r e n d e r : f u n c t i o n ( ) { v a r   s e l f = t h i s ; w h i l e ( t h i s . l i s t . f i r s t C h i l d ) { t h i s . l i s t . r e m o v e C h i l d ( t h i s . l i s t . f i r s t C h i l d ) } t h i s . l i n e s = [ ] ; v a r   s e r i e s = t h i s . g r a p h . s e r i e s . m a p ( f u n c t i o n ( s ) { r e t u r n   s } ) ; i f ( ! t h i s . n a t u r a l O r d e r ) { s e r i e s = s e r i e s . r e v e r s e ( ) } s e r i e s . f o r E a c h ( f u n c t i o n ( s ) { s e l f . a d d L i n e ( s ) } ) } , a d d L i n e : f u n c t i o n ( s e r i e s ) { v a r   l i n e = d o c u m e n t . c r e a t e E l e m e n t ( " l i " ) ; l i n e . c l a s s N a m e = " l i n e " ; i f ( s e r i e s . d i s a b l e d ) { l i n e . c l a s s N a m e + = "   d i s a b l e d " } i f ( s e r i e s . c l a s s N a m e ) { d 3 . s e l e c t ( l i n e ) . c l a s s e d ( s e r i e s . c l a s s N a m e , t r u e ) } v a r   s w a t c h = d o c u m e n t . c r e a t e E l e m e n t ( " d i v " ) ; s w a t c h . c l a s s N a m e = " s w a t c h " ; s w a t c h . s t y l e . b a c k g r o u n d C o l o r = s e r i e s . c o l o r ; l i n e . a p p e n d C h i l d ( s w a t c h ) ; v a r   l a b e l = d o c u m e n t . c r e a t e E l e m e n t ( " s p a n " ) ; l a b e l . c l a s s N a m e = " l a b e l " ; l a b e l . i n n e r H T M L = s e r i e s . n a m e ; l i n e . a p p e n d C h i l d ( l a b e l ) ; t h i s . l i s t . a p p e n d C h i l d ( l i n e ) ; l i n e . s e r i e s = s e r i e s ; i f ( s e r i e s . n o L e g e n d ) { l i n e . s t y l e . d i s p l a y = " n o n e " } v a r   _ l i n e = { e l e m e n t : l i n e , s e r i e s : s e r i e s } ; i f ( t h i s . s h e l v i n g ) { t h i s . s h e l v i n g . a d d A n c h o r ( _ l i n e ) ; t h i s . s h e l v i n g . u p d a t e B e h a v i o u r ( ) } i f ( t h i s . h i g h l i g h t e r ) { t h i s . h i g h l i g h t e r . a d d H i g h l i g h t E v e n t s ( _ l i n e ) } t h i s . l i n e s . p u s h ( _ l i n e ) ; r e t u r n   l i n e } } ) ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . G r a p h . R a n g e S l i d e r " ) ; R i c k s h a w . G r a p h . R a n g e S l i d e r = R i c k s h a w . C l a s s . c r e a t e ( { i n i t i a l i z e : f u n c t i o n ( a r g s ) { v a r   e l e m e n t = t h i s . e l e m e n t = a r g s . e l e m e n t ; v a r   g r a p h = t h i s . g r a p h = a r g s . g r a p h ; t h i s . s l i d e C a l l b a c k s = [ ] ; t h i s . b u i l d ( ) ; g r a p h . o n U p d a t e ( f u n c t i o n ( ) { t h i s . u p d a t e ( ) } . b i n d ( t h i s ) ) } , b u i l d : f u n c t i o n ( ) { v a r   e l e m e n t = t h i s . e l e m e n t ; v a r   g r a p h = t h i s . g r a p h ; v a r   $ = j Q u e r y ; v a r   d o m a i n = g r a p h . d a t a D o m a i n ( ) ; v a r   s e l f = t h i s ; $ ( f u n c t i o n ( ) { $ ( e l e m e n t ) . s l i d e r ( { r a n g e : t r u e , m i n : d o m a i n [ 0 ] , m a x : d o m a i n [ 1 ] , v a l u e s : [ d o m a i n [ 0 ] , d o m a i n [ 1 ] ] , s l i d e : f u n c t i o n ( e v e n t , u i ) { i f ( u i . v a l u e s [ 1 ] < = u i . v a l u e s [ 0 ] ) r e t u r n ; g r a p h . w i n d o w . x M i n = u i . v a l u e s [ 0 ] ; g r a p h . w i n d o w . x M a x = u i . v a l u e s [ 1 ] ; g r a p h . u p d a t e ( ) ; v a r   d o m a i n = g r a p h . d a t a D o m a i n ( ) ; i f ( d o m a i n [ 0 ] = = u i . v a l u e s [ 0 ] ) { g r a p h . w i n d o w . x M i n = u n d e f i n e d } i f ( d o m a i n [ 1 ] = = u i . v a l u e s [ 1 ] ) { g r a p h . w i n d o w . x M a x = u n d e f i n e d } s e l f . s l i d e C a l l b a c k s . f o r E a c h ( f u n c t i o n ( c a l l b a c k ) { c a l l b a c k ( g r a p h , g r a p h . w i n d o w . x M i n , g r a p h . w i n d o w . x M a x ) } ) } } ) } ) ; $ ( e l e m e n t ) [ 0 ] . s t y l e . w i d t h = g r a p h . w i d t h + " p x " } , u p d a t e : f u n c t i o n ( ) { v a r   e l e m e n t = t h i s . e l e m e n t ; v a r   g r a p h = t h i s . g r a p h ; v a r   $ = j Q u e r y ; v a r   v a l u e s = $ ( e l e m e n t ) . s l i d e r ( " o p t i o n " , " v a l u e s " ) ; v a r   d o m a i n = g r a p h . d a t a D o m a i n ( ) ; $ ( e l e m e n t ) . s l i d e r ( " o p t i o n " , " m i n " , d o m a i n [ 0 ] ) ; $ ( e l e m e n t ) . s l i d e r ( " o p t i o n " , " m a x " , d o m a i n [ 1 ] ) ; i f ( g r a p h . w i n d o w . x M i n = = n u l l ) { v a l u e s [ 0 ] = d o m a i n [ 0 ] } i f ( g r a p h . w i n d o w . x M a x = = n u l l ) { v a l u e s [ 1 ] = d o m a i n [ 1 ] } $ ( e l e m e n t ) . s l i d e r ( " o p t i o n " , " v a l u e s " , v a l u e s ) } , o n S l i d e : f u n c t i o n ( c a l l b a c k ) { t h i s . s l i d e C a l l b a c k s . p u s h ( c a l l b a c k ) } } ) ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . G r a p h . R a n g e S l i d e r . P r e v i e w " ) ; R i c k s h a w . G r a p h . R a n g e S l i d e r . P r e v i e w = R i c k s h a w . C l a s s . c r e a t e ( { i n i t i a l i z e : f u n c t i o n ( a r g s ) { i f ( ! a r g s . e l e m e n t ) t h r o w " R i c k s h a w . G r a p h . R a n g e S l i d e r . P r e v i e w   n e e d s   a   r e f e r e n c e   t o   a n   e l e m e n t " ; i f ( ! a r g s . g r a p h & & ! a r g s . g r a p h s ) t h r o w " R i c k s h a w . G r a p h . R a n g e S l i d e r . P r e v i e w   n e e d s   a   r e f e r e n c e   t o   a n   g r a p h   o r   a n   a r r a y   o f   g r a p h s " ; t h i s . e l e m e n t = a r g s . e l e m e n t ; t h i s . e l e m e n t . s t y l e . p o s i t i o n = " r e l a t i v e " ; t h i s . g r a p h s = a r g s . g r a p h ? [ a r g s . g r a p h ] : a r g s . g r a p h s ; t h i s . d e f a u l t s = { h e i g h t : 7 5 , w i d t h : 4 0 0 , g r i p p e r C o l o r : u n d e f i n e d , f r a m e T o p T h i c k n e s s : 3 , f r a m e H a n d l e T h i c k n e s s : 1 0 , f r a m e C o l o r : " # d 4 d 4 d 4 " , f r a m e O p a c i t y : 1 , m i n i m u m F r a m e W i d t h : 0 , h e i g h t R a t i o : . 2 } ; t h i s . h e i g h t R a t i o = a r g s . h e i g h t R a t i o | | t h i s . d e f a u l t s . h e i g h t R a t i o ; t h i s . d e f a u l t s . g r i p p e r C o l o r = d 3 . r g b ( t h i s . d e f a u l t s . f r a m e C o l o r ) . d a r k e r ( ) . t o S t r i n g ( ) ; t h i s . c o n f i g u r e C a l l b a c k s = [ ] ; t h i s . s l i d e C a l l b a c k s = [ ] ; t h i s . p r e v i e w s = [ ] ; i f ( ! a r g s . w i d t h ) t h i s . w i d t h F r o m G r a p h = t r u e ; i f ( ! a r g s . h e i g h t ) t h i s . h e i g h t F r o m G r a p h = t r u e ; i f ( t h i s . w i d t h F r o m G r a p h | | t h i s . h e i g h t F r o m G r a p h ) { t h i s . g r a p h s [ 0 ] . o n C o n f i g u r e ( f u n c t i o n ( ) { t h i s . c o n f i g u r e ( a r g s ) ; t h i s . r e n d e r ( ) } . b i n d ( t h i s ) ) } a r g s . w i d t h = a r g s . w i d t h | | t h i s . g r a p h s [ 0 ] . w i d t h | | t h i s . d e f a u l t s . w i d t h ; a r g s . h e i g h t = a r g s . h e i g h t | | t h i s . g r a p h s [ 0 ] . h e i g h t * t h i s . h e i g h t R a t i o | | t h i s . d e f a u l t s . h e i g h t ; t h i s . c o n f i g u r e ( a r g s ) ; t h i s . r e n d e r ( ) } , o n S l i d e : f u n c t i o n ( c a l l b a c k ) { t h i s . s l i d e C a l l b a c k s . p u s h ( c a l l b a c k ) } , o n C o n f i g u r e : f u n c t i o n ( c a l l b a c k ) { t h i s . c o n f i g u r e C a l l b a c k s . p u s h ( c a l l b a c k ) } , c o n f i g u r e : f u n c t i o n ( a r g s ) { t h i s . c o n f i g = t h i s . c o n f i g | | { } ; t h i s . c o n f i g u r e C a l l b a c k s . f o r E a c h ( f u n c t i o n ( c a l l b a c k ) { c a l l b a c k ( a r g s ) } ) ; R i c k s h a w . k e y s ( t h i s . d e f a u l t s ) . f o r E a c h ( f u n c t i o n ( k ) { t h i s . c o n f i g [ k ] = k   i n   a r g s ? a r g s [ k ] : k   i n   t h i s . c o n f i g ? t h i s . c o n f i g [ k ] : t h i s . d e f a u l t s [ k ] } , t h i s ) ; i f ( " w i d t h " i n   a r g s | | " h e i g h t " i n   a r g s ) { i f ( t h i s . w i d t h F r o m G r a p h ) { t h i s . c o n f i g . w i d t h = t h i s . g r a p h s [ 0 ] . w i d t h } i f ( t h i s . h e i g h t F r o m G r a p h ) { t h i s . c o n f i g . h e i g h t = t h i s . g r a p h s [ 0 ] . h e i g h t * t h i s . h e i g h t R a t i o ; t h i s . p r e v i e w H e i g h t = t h i s . c o n f i g . h e i g h t } t h i s . p r e v i e w s . f o r E a c h ( f u n c t i o n ( p r e v i e w ) { v a r   h e i g h t = t h i s . p r e v i e w H e i g h t / t h i s . g r a p h s . l e n g t h - t h i s . c o n f i g . f r a m e T o p T h i c k n e s s * 2 ; v a r   w i d t h = t h i s . c o n f i g . w i d t h - t h i s . c o n f i g . f r a m e H a n d l e T h i c k n e s s * 2 ; p r e v i e w . s e t S i z e ( { w i d t h : w i d t h , h e i g h t : h e i g h t } ) ; i f ( t h i s . s v g ) { v a r   s v g H e i g h t = h e i g h t + t h i s . c o n f i g . f r a m e H a n d l e T h i c k n e s s * 2 ; v a r   s v g W i d t h = w i d t h + t h i s . c o n f i g . f r a m e H a n d l e T h i c k n e s s * 2 ; t h i s . s v g . s t y l e ( " w i d t h " , s v g W i d t h + " p x " ) ; t h i s . s v g . s t y l e ( " h e i g h t " , s v g H e i g h t + " p x " ) } } , t h i s ) } } , r e n d e r : f u n c t i o n ( ) { v a r   s e l f = t h i s ; t h i s . s v g = d 3 . s e l e c t ( t h i s . e l e m e n t ) . s e l e c t A l l ( " s v g . r i c k s h a w _ r a n g e _ s l i d e r _ p r e v i e w " ) . d a t a ( [ n u l l ] ) ; t h i s . p r e v i e w H e i g h t = t h i s . c o n f i g . h e i g h t - t h i s . c o n f i g . f r a m e T o p T h i c k n e s s * 2 ; t h i s . p r e v i e w W i d t h = t h i s . c o n f i g . w i d t h - t h i s . c o n f i g . f r a m e H a n d l e T h i c k n e s s * 2 ; t h i s . c u r r e n t F r a m e = [ 0 , t h i s . p r e v i e w W i d t h ] ; v a r   b u i l d G r a p h = f u n c t i o n ( p a r e n t , i n d e x ) { v a r   g r a p h A r g s = R i c k s h a w . e x t e n d ( { } , p a r e n t . c o n f i g ) ; v a r   h e i g h t = s e l f . p r e v i e w H e i g h t / s e l f . g r a p h s . l e n g t h ; v a r   r e n d e r e r = p a r e n t . r e n d e r e r . n a m e ; R i c k s h a w . e x t e n d ( g r a p h A r g s , { e l e m e n t : t h i s . a p p e n d C h i l d ( d o c u m e n t . c r e a t e E l e m e n t ( " d i v " ) ) , h e i g h t : h e i g h t , w i d t h : s e l f . p r e v i e w W i d t h , s e r i e s : p a r e n t . s e r i e s , r e n d e r e r : r e n d e r e r } ) ; v a r   g r a p h = n e w   R i c k s h a w . G r a p h ( g r a p h A r g s ) ; s e l f . p r e v i e w s . p u s h ( g r a p h ) ; p a r e n t . o n U p d a t e ( f u n c t i o n ( ) { g r a p h . r e n d e r ( ) ; s e l f . r e n d e r ( ) } ) ; p a r e n t . o n C o n f i g u r e ( f u n c t i o n ( a r g s ) { d e l e t e   a r g s . h e i g h t ; a r g s . w i d t h = a r g s . w i d t h - s e l f . c o n f i g . f r a m e H a n d l e T h i c k n e s s * 2 ; g r a p h . c o n f i g u r e ( a r g s ) ; g r a p h . r e n d e r ( ) } ) ; g r a p h . r e n d e r ( ) } ; v a r   g r a p h C o n t a i n e r = d 3 . s e l e c t ( t h i s . e l e m e n t ) . s e l e c t A l l ( " d i v . r i c k s h a w _ r a n g e _ s l i d e r _ p r e v i e w _ c o n t a i n e r " ) . d a t a ( t h i s . g r a p h s ) ; v a r   t r a n s l a t e C o m m a n d = " t r a n s l a t e ( " + t h i s . c o n f i g . f r a m e H a n d l e T h i c k n e s s + " p x ,   " + t h i s . c o n f i g . f r a m e T o p T h i c k n e s s + " p x ) " ; g r a p h C o n t a i n e r . e n t e r ( ) . a p p e n d ( " d i v " ) . c l a s s e d ( " r i c k s h a w _ r a n g e _ s l i d e r _ p r e v i e w _ c o n t a i n e r " , t r u e ) . s t y l e ( " - w e b k i t - t r a n s f o r m " , t r a n s l a t e C o m m a n d ) . s t y l e ( " - m o z - t r a n s f o r m " , t r a n s l a t e C o m m a n d ) . s t y l e ( " - m s - t r a n s f o r m " , t r a n s l a t e C o m m a n d ) . s t y l e ( " t r a n s f o r m " , t r a n s l a t e C o m m a n d ) . e a c h ( b u i l d G r a p h ) ; g r a p h C o n t a i n e r . e x i t ( ) . r e m o v e ( ) ; v a r   m a s t e r G r a p h = t h i s . g r a p h s [ 0 ] ; v a r   d o m a i n S c a l e = d 3 . s c a l e . l i n e a r ( ) . d o m a i n ( [ 0 , t h i s . p r e v i e w W i d t h ] ) . r a n g e ( m a s t e r G r a p h . d a t a D o m a i n ( ) ) ; v a r   c u r r e n t W i n d o w = [ m a s t e r G r a p h . w i n d o w . x M i n , m a s t e r G r a p h . w i n d o w . x M a x ] ; t h i s . c u r r e n t F r a m e [ 0 ] = c u r r e n t W i n d o w [ 0 ] = = = u n d e f i n e d ? 0 : M a t h . r o u n d ( d o m a i n S c a l e . i n v e r t ( c u r r e n t W i n d o w [ 0 ] ) ) ; i f ( t h i s . c u r r e n t F r a m e [ 0 ] < 0 ) t h i s . c u r r e n t F r a m e [ 0 ] = 0 ; t h i s . c u r r e n t F r a m e [ 1 ] = c u r r e n t W i n d o w [ 1 ] = = = u n d e f i n e d ? t h i s . p r e v i e w W i d t h : d o m a i n S c a l e . i n v e r t ( c u r r e n t W i n d o w [ 1 ] ) ; i f ( t h i s . c u r r e n t F r a m e [ 1 ] - t h i s . c u r r e n t F r a m e [ 0 ] < s e l f . c o n f i g . m i n i m u m F r a m e W i d t h ) { t h i s . c u r r e n t F r a m e [ 1 ] = ( t h i s . c u r r e n t F r a m e [ 0 ] | | 0 ) + s e l f . c o n f i g . m i n i m u m F r a m e W i d t h } t h i s . s v g . e n t e r ( ) . a p p e n d ( " s v g " ) . c l a s s e d ( " r i c k s h a w _ r a n g e _ s l i d e r _ p r e v i e w " , t r u e ) . s t y l e ( " h e i g h t " , t h i s . c o n f i g . h e i g h t + " p x " ) . s t y l e ( " w i d t h " , t h i s . c o n f i g . w i d t h + " p x " ) . s t y l e ( " p o s i t i o n " , " a b s o l u t e " ) . s t y l e ( " t o p " , 0 ) ; t h i s . _ r e n d e r D i m m i n g ( ) ; t h i s . _ r e n d e r F r a m e ( ) ; t h i s . _ r e n d e r G r i p p e r s ( ) ; t h i s . _ r e n d e r H a n d l e s ( ) ; t h i s . _ r e n d e r M i d d l e ( ) ; t h i s . _ r e g i s t e r M o u s e E v e n t s ( ) } , _ r e n d e r D i m m i n g : f u n c t i o n ( ) { v a r   e l e m e n t = t h i s . s v g . s e l e c t A l l ( " p a t h . d i m m i n g " ) . d a t a ( [ n u l l ] ) ; e l e m e n t . e n t e r ( ) . a p p e n d ( " p a t h " ) . a t t r ( " f i l l " , " w h i t e " ) . a t t r ( " f i l l - o p a c i t y " , " 0 . 7 " ) . a t t r ( " f i l l - r u l e " , " e v e n o d d " ) . c l a s s e d ( " d i m m i n g " , t r u e ) ; v a r   p a t h = " " ; p a t h + = "   M   " + t h i s . c o n f i g . f r a m e H a n d l e T h i c k n e s s + "   " + t h i s . c o n f i g . f r a m e T o p T h i c k n e s s ; p a t h + = "   h   " + t h i s . p r e v i e w W i d t h ; p a t h + = "   v   " + t h i s . p r e v i e w H e i g h t ; p a t h + = "   h   " + - t h i s . p r e v i e w W i d t h ; p a t h + = "   z   " ; p a t h + = "   M   " + M a t h . m a x ( t h i s . c u r r e n t F r a m e [ 0 ] , t h i s . c o n f i g . f r a m e H a n d l e T h i c k n e s s ) + "   " + t h i s . c o n f i g . f r a m e T o p T h i c k n e s s ; p a t h + = "   H   " + M a t h . m i n ( t h i s . c u r r e n t F r a m e [ 1 ] + t h i s . c o n f i g . f r a m e H a n d l e T h i c k n e s s * 2 , t h i s . p r e v i e w W i d t h + t h i s . c o n f i g . f r a m e H a n d l e T h i c k n e s s ) ; p a t h + = "   v   " + t h i s . p r e v i e w H e i g h t ; p a t h + = "   H   " + M a t h . m a x ( t h i s . c u r r e n t F r a m e [ 0 ] , t h i s . c o n f i g . f r a m e H a n d l e T h i c k n e s s ) ; p a t h + = "   z " ; e l e m e n t . a t t r ( " d " , p a t h ) } , _ r e n d e r F r a m e : f u n c t i o n ( ) { v a r   e l e m e n t = t h i s . s v g . s e l e c t A l l ( " p a t h . f r a m e " ) . d a t a ( [ n u l l ] ) ; e l e m e n t . e n t e r ( ) . a p p e n d ( " p a t h " ) . a t t r ( " s t r o k e " , " w h i t e " ) . a t t r ( " s t r o k e - w i d t h " , " 1 p x " ) . a t t r ( " s t r o k e - l i n e j o i n " , " r o u n d " ) . a t t r ( " f i l l " , t h i s . c o n f i g . f r a m e C o l o r ) . a t t r ( " f i l l - o p a c i t y " , t h i s . c o n f i g . f r a m e O p a c i t y ) . a t t r ( " f i l l - r u l e " , " e v e n o d d " ) . c l a s s e d ( " f r a m e " , t r u e ) ; v a r   p a t h = " " ; p a t h + = "   M   " + t h i s . c u r r e n t F r a m e [ 0 ] + "   0 " ; p a t h + = "   H   " + ( t h i s . c u r r e n t F r a m e [ 1 ] + t h i s . c o n f i g . f r a m e H a n d l e T h i c k n e s s * 2 ) ; p a t h + = "   V   " + t h i s . c o n f i g . h e i g h t ; p a t h + = "   H   " + t h i s . c u r r e n t F r a m e [ 0 ] ; p a t h + = "   z " ; p a t h + = "   M   " + ( t h i s . c u r r e n t F r a m e [ 0 ] + t h i s . c o n f i g . f r a m e H a n d l e T h i c k n e s s ) + "   " + t h i s . c o n f i g . f r a m e T o p T h i c k n e s s ; p a t h + = "   H   " + ( t h i s . c u r r e n t F r a m e [ 1 ] + t h i s . c o n f i g . f r a m e H a n d l e T h i c k n e s s ) ; p a t h + = "   v   " + t h i s . p r e v i e w H e i g h t ; p a t h + = "   H   " + ( t h i s . c u r r e n t F r a m e [ 0 ] + t h i s . c o n f i g . f r a m e H a n d l e T h i c k n e s s ) ; p a t h + = "   z " ; e l e m e n t . a t t r ( " d " , p a t h ) } , _ r e n d e r G r i p p e r s : f u n c t i o n ( ) { v a r   g r i p p e r = t h i s . s v g . s e l e c t A l l ( " p a t h . g r i p p e r " ) . d a t a ( [ n u l l ] ) ; g r i p p e r . e n t e r ( ) . a p p e n d ( " p a t h " ) . a t t r ( " s t r o k e " , t h i s . c o n f i g . g r i p p e r C o l o r ) . c l a s s e d ( " g r i p p e r " , t r u e ) ; v a r   p a t h = " " ; [ . 4 , . 6 ] . f o r E a c h ( f u n c t i o n ( s p a c i n g ) { p a t h + = "   M   " + M a t h . r o u n d ( t h i s . c u r r e n t F r a m e [ 0 ] + t h i s . c o n f i g . f r a m e H a n d l e T h i c k n e s s * s p a c i n g ) + "   " + M a t h . r o u n d ( t h i s . c o n f i g . h e i g h t * . 3 ) ; p a t h + = "   V   " + M a t h . r o u n d ( t h i s . c o n f i g . h e i g h t * . 7 ) ; p a t h + = "   M   " + M a t h . r o u n d ( t h i s . c u r r e n t F r a m e [ 1 ] + t h i s . c o n f i g . f r a m e H a n d l e T h i c k n e s s * ( 1 + s p a c i n g ) ) + "   " + M a t h . r o u n d ( t h i s . c o n f i g . h e i g h t * . 3 ) ; p a t h + = "   V   " + M a t h . r o u n d ( t h i s . c o n f i g . h e i g h t * . 7 ) } . b i n d ( t h i s ) ) ; g r i p p e r . a t t r ( " d " , p a t h ) } , _ r e n d e r H a n d l e s : f u n c t i o n ( ) { v a r   l e f t H a n d l e = t h i s . s v g . s e l e c t A l l ( " r e c t . l e f t _ h a n d l e " ) . d a t a ( [ n u l l ] ) ; l e f t H a n d l e . e n t e r ( ) . a p p e n d ( " r e c t " ) . a t t r ( " w i d t h " , t h i s . c o n f i g . f r a m e H a n d l e T h i c k n e s s ) . s t y l e ( " c u r s o r " , " e w - r e s i z e " ) . s t y l e ( " f i l l - o p a c i t y " , " 0 " ) . c l a s s e d ( " l e f t _ h a n d l e " , t r u e ) ; l e f t H a n d l e . a t t r ( " x " , t h i s . c u r r e n t F r a m e [ 0 ] ) . a t t r ( " h e i g h t " , t h i s . c o n f i g . h e i g h t ) ; v a r   r i g h t H a n d l e = t h i s . s v g . s e l e c t A l l ( " r e c t . r i g h t _ h a n d l e " ) . d a t a ( [ n u l l ] ) ; r i g h t H a n d l e . e n t e r ( ) . a p p e n d ( " r e c t " ) . a t t r ( " w i d t h " , t h i s . c o n f i g . f r a m e H a n d l e T h i c k n e s s ) . s t y l e ( " c u r s o r " , " e w - r e s i z e " ) . s t y l e ( " f i l l - o p a c i t y " , " 0 " ) . c l a s s e d ( " r i g h t _ h a n d l e " , t r u e ) ; r i g h t H a n d l e . a t t r ( " x " , t h i s . c u r r e n t F r a m e [ 1 ] + t h i s . c o n f i g . f r a m e H a n d l e T h i c k n e s s ) . a t t r ( " h e i g h t " , t h i s . c o n f i g . h e i g h t ) } , _ r e n d e r M i d d l e : f u n c t i o n ( ) { v a r   m i d d l e H a n d l e = t h i s . s v g . s e l e c t A l l ( " r e c t . m i d d l e _ h a n d l e " ) . d a t a ( [ n u l l ] ) ; m i d d l e H a n d l e . e n t e r ( ) . a p p e n d ( " r e c t " ) . s t y l e ( " c u r s o r " , " m o v e " ) . s t y l e ( " f i l l - o p a c i t y " , " 0 " ) . c l a s s e d ( " m i d d l e _ h a n d l e " , t r u e ) ; m i d d l e H a n d l e . a t t r ( " w i d t h " , M a t h . m a x ( 0 , t h i s . c u r r e n t F r a m e [ 1 ] - t h i s . c u r r e n t F r a m e [ 0 ] ) ) . a t t r ( " x " , t h i s . c u r r e n t F r a m e [ 0 ] + t h i s . c o n f i g . f r a m e H a n d l e T h i c k n e s s ) . a t t r ( " h e i g h t " , t h i s . c o n f i g . h e i g h t ) } , _ r e g i s t e r M o u s e E v e n t s : f u n c t i o n ( ) { v a r   e l e m e n t = d 3 . s e l e c t ( t h i s . e l e m e n t ) ; v a r   d r a g = { t a r g e t : n u l l , s t a r t : n u l l , s t o p : n u l l , l e f t : f a l s e , r i g h t : f a l s e , r i g i d : f a l s e } ; v a r   s e l f = t h i s ; f u n c t i o n   o n M o u s e m o v e ( d a t u m , i n d e x ) { d r a g . s t o p = s e l f . _ g e t C l i e n t X F r o m E v e n t ( d 3 . e v e n t , d r a g ) ; v a r   d i s t a n c e T r a v e l e d = d r a g . s t o p - d r a g . s t a r t ; v a r   f r a m e A f t e r D r a g = s e l f . f r a m e B e f o r e D r a g . s l i c e ( 0 ) ; v a r   m i n i m u m F r a m e W i d t h = s e l f . c o n f i g . m i n i m u m F r a m e W i d t h ; i f ( d r a g . r i g i d ) { m i n i m u m F r a m e W i d t h = s e l f . f r a m e B e f o r e D r a g [ 1 ] - s e l f . f r a m e B e f o r e D r a g [ 0 ] } i f ( d r a g . l e f t ) { f r a m e A f t e r D r a g [ 0 ] = M a t h . m a x ( f r a m e A f t e r D r a g [ 0 ] + d i s t a n c e T r a v e l e d , 0 ) } i f ( d r a g . r i g h t ) { f r a m e A f t e r D r a g [ 1 ] = M a t h . m i n ( f r a m e A f t e r D r a g [ 1 ] + d i s t a n c e T r a v e l e d , s e l f . p r e v i e w W i d t h ) } v a r   c u r r e n t F r a m e W i d t h = f r a m e A f t e r D r a g [ 1 ] - f r a m e A f t e r D r a g [ 0 ] ; i f ( c u r r e n t F r a m e W i d t h < = m i n i m u m F r a m e W i d t h ) { i f ( d r a g . l e f t ) { f r a m e A f t e r D r a g [ 0 ] = f r a m e A f t e r D r a g [ 1 ] - m i n i m u m F r a m e W i d t h } i f ( d r a g . r i g h t ) { f r a m e A f t e r D r a g [ 1 ] = f r a m e A f t e r D r a g [ 0 ] + m i n i m u m F r a m e W i d t h } i f ( f r a m e A f t e r D r a g [ 0 ] < = 0 ) { f r a m e A f t e r D r a g [ 1 ] - = f r a m e A f t e r D r a g [ 0 ] ; f r a m e A f t e r D r a g [ 0 ] = 0 } i f ( f r a m e A f t e r D r a g [ 1 ] > = s e l f . p r e v i e w W i d t h ) { f r a m e A f t e r D r a g [ 0 ] - = f r a m e A f t e r D r a g [ 1 ] - s e l f . p r e v i e w W i d t h ; f r a m e A f t e r D r a g [ 1 ] = s e l f . p r e v i e w W i d t h } } s e l f . g r a p h s . f o r E a c h ( f u n c t i o n ( g r a p h ) { v a r   d o m a i n S c a l e = d 3 . s c a l e . l i n e a r ( ) . i n t e r p o l a t e ( d 3 . i n t e r p o l a t e N u m b e r ) . d o m a i n ( [ 0 , s e l f . p r e v i e w W i d t h ] ) . r a n g e ( g r a p h . d a t a D o m a i n ( ) ) ; v a r   w i n d o w A f t e r D r a g = [ d o m a i n S c a l e ( f r a m e A f t e r D r a g [ 0 ] ) , d o m a i n S c a l e ( f r a m e A f t e r D r a g [ 1 ] ) ] ; s e l f . s l i d e C a l l b a c k s . f o r E a c h ( f u n c t i o n ( c a l l b a c k ) { c a l l b a c k ( g r a p h , w i n d o w A f t e r D r a g [ 0 ] , w i n d o w A f t e r D r a g [ 1 ] ) } ) ; i f ( f r a m e A f t e r D r a g [ 0 ] = = = 0 ) { w i n d o w A f t e r D r a g [ 0 ] = u n d e f i n e d } i f ( f r a m e A f t e r D r a g [ 1 ] = = = s e l f . p r e v i e w W i d t h ) { w i n d o w A f t e r D r a g [ 1 ] = u n d e f i n e d } g r a p h . w i n d o w . x M i n = w i n d o w A f t e r D r a g [ 0 ] ; g r a p h . w i n d o w . x M a x = w i n d o w A f t e r D r a g [ 1 ] ; g r a p h . u p d a t e ( ) } ) } f u n c t i o n   o n M o u s e d o w n ( ) { d r a g . t a r g e t = d 3 . e v e n t . t a r g e t ; d r a g . s t a r t = s e l f . _ g e t C l i e n t X F r o m E v e n t ( d 3 . e v e n t , d r a g ) ; s e l f . f r a m e B e f o r e D r a g = s e l f . c u r r e n t F r a m e . s l i c e ( ) ; d 3 . e v e n t . p r e v e n t D e f a u l t ? d 3 . e v e n t . p r e v e n t D e f a u l t ( ) : d 3 . e v e n t . r e t u r n V a l u e = f a l s e ; d 3 . s e l e c t ( d o c u m e n t ) . o n ( " m o u s e m o v e . r i c k s h a w _ r a n g e _ s l i d e r _ p r e v i e w " , o n M o u s e m o v e ) ; d 3 . s e l e c t ( d o c u m e n t ) . o n ( " m o u s e u p . r i c k s h a w _ r a n g e _ s l i d e r _ p r e v i e w " , o n M o u s e u p ) ; d 3 . s e l e c t ( d o c u m e n t ) . o n ( " t o u c h m o v e . r i c k s h a w _ r a n g e _ s l i d e r _ p r e v i e w " , o n M o u s e m o v e ) ; d 3 . s e l e c t ( d o c u m e n t ) . o n ( " t o u c h e n d . r i c k s h a w _ r a n g e _ s l i d e r _ p r e v i e w " , o n M o u s e u p ) ; d 3 . s e l e c t ( d o c u m e n t ) . o n ( " t o u c h c a n c e l . r i c k s h a w _ r a n g e _ s l i d e r _ p r e v i e w " , o n M o u s e u p ) } f u n c t i o n   o n M o u s e d o w n L e f t H a n d l e ( d a t u m , i n d e x ) { d r a g . l e f t = t r u e ; o n M o u s e d o w n ( ) } f u n c t i o n   o n M o u s e d o w n R i g h t H a n d l e ( d a t u m , i n d e x ) { d r a g . r i g h t = t r u e ; o n M o u s e d o w n ( ) } f u n c t i o n   o n M o u s e d o w n M i d d l e H a n d l e ( d a t u m , i n d e x ) { d r a g . l e f t = t r u e ; d r a g . r i g h t = t r u e ; d r a g . r i g i d = t r u e ; o n M o u s e d o w n ( ) } f u n c t i o n   o n M o u s e u p ( d a t u m , i n d e x ) { d 3 . s e l e c t ( d o c u m e n t ) . o n ( " m o u s e m o v e . r i c k s h a w _ r a n g e _ s l i d e r _ p r e v i e w " , n u l l ) ; d 3 . s e l e c t ( d o c u m e n t ) . o n ( " m o u s e u p . r i c k s h a w _ r a n g e _ s l i d e r _ p r e v i e w " , n u l l ) ; d 3 . s e l e c t ( d o c u m e n t ) . o n ( " t o u c h m o v e . r i c k s h a w _ r a n g e _ s l i d e r _ p r e v i e w " , n u l l ) ; d 3 . s e l e c t ( d o c u m e n t ) . o n ( " t o u c h e n d . r i c k s h a w _ r a n g e _ s l i d e r _ p r e v i e w " , n u l l ) ; d 3 . s e l e c t ( d o c u m e n t ) . o n ( " t o u c h c a n c e l . r i c k s h a w _ r a n g e _ s l i d e r _ p r e v i e w " , n u l l ) ; d e l e t e   s e l f . f r a m e B e f o r e D r a g ; d r a g . l e f t = f a l s e ; d r a g . r i g h t = f a l s e ; d r a g . r i g i d = f a l s e } e l e m e n t . s e l e c t ( " r e c t . l e f t _ h a n d l e " ) . o n ( " m o u s e d o w n " , o n M o u s e d o w n L e f t H a n d l e ) ; e l e m e n t . s e l e c t ( " r e c t . r i g h t _ h a n d l e " ) . o n ( " m o u s e d o w n " , o n M o u s e d o w n R i g h t H a n d l e ) ; e l e m e n t . s e l e c t ( " r e c t . m i d d l e _ h a n d l e " ) . o n ( " m o u s e d o w n " , o n M o u s e d o w n M i d d l e H a n d l e ) ; e l e m e n t . s e l e c t ( " r e c t . l e f t _ h a n d l e " ) . o n ( " t o u c h s t a r t " , o n M o u s e d o w n L e f t H a n d l e ) ; e l e m e n t . s e l e c t ( " r e c t . r i g h t _ h a n d l e " ) . o n ( " t o u c h s t a r t " , o n M o u s e d o w n R i g h t H a n d l e ) ; e l e m e n t . s e l e c t ( " r e c t . m i d d l e _ h a n d l e " ) . o n ( " t o u c h s t a r t " , o n M o u s e d o w n M i d d l e H a n d l e ) } , _ g e t C l i e n t X F r o m E v e n t : f u n c t i o n ( e v e n t , d r a g ) { s w i t c h ( e v e n t . t y p e ) { c a s e " t o u c h s t a r t " : c a s e " t o u c h m o v e " : v a r   t o u c h L i s t = e v e n t . c h a n g e d T o u c h e s ; v a r   t o u c h = n u l l ; f o r ( v a r   t o u c h I n d e x = 0 ; t o u c h I n d e x < t o u c h L i s t . l e n g t h ; t o u c h I n d e x + + ) { i f ( t o u c h L i s t [ t o u c h I n d e x ] . t a r g e t = = = d r a g . t a r g e t ) { t o u c h = t o u c h L i s t [ t o u c h I n d e x ] ; b r e a k } } r e t u r n   t o u c h ! = = n u l l ? t o u c h . c l i e n t X : u n d e f i n e d ; d e f a u l t : r e t u r n   e v e n t . c l i e n t X } } } ) ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . G r a p h . R e n d e r e r " ) ; R i c k s h a w . G r a p h . R e n d e r e r = R i c k s h a w . C l a s s . c r e a t e ( { i n i t i a l i z e : f u n c t i o n ( a r g s ) { t h i s . g r a p h = a r g s . g r a p h ; t h i s . t e n s i o n = a r g s . t e n s i o n | | t h i s . t e n s i o n ; t h i s . c o n f i g u r e ( a r g s ) } , s e r i e s P a t h F a c t o r y : f u n c t i o n ( ) { } , s e r i e s S t r o k e F a c t o r y : f u n c t i o n ( ) { } , d e f a u l t s : f u n c t i o n ( ) { r e t u r n { t e n s i o n : . 8 , s t r o k e W i d t h : 2 , u n s t a c k : t r u e , p a d d i n g : { t o p : . 0 1 , r i g h t : 0 , b o t t o m : . 0 1 , l e f t : 0 } , s t r o k e : f a l s e , f i l l : f a l s e } } , d o m a i n : f u n c t i o n ( d a t a ) { v a r   s t a c k e d D a t a = d a t a | | t h i s . g r a p h . s t a c k e d D a t a | | t h i s . g r a p h . s t a c k D a t a ( ) ; v a r   x M i n = + I n f i n i t y ; v a r   x M a x = - I n f i n i t y ; v a r   y M i n = + I n f i n i t y ; v a r   y M a x = - I n f i n i t y ; s t a c k e d D a t a . f o r E a c h ( f u n c t i o n ( s e r i e s ) { s e r i e s . f o r E a c h ( f u n c t i o n ( d ) { i f ( d . y = = n u l l ) r e t u r n ; v a r   y = d . y + d . y 0 ; i f ( y < y M i n ) y M i n = y ; i f ( y > y M a x ) y M a x = y } ) ; i f ( ! s e r i e s . l e n g t h ) r e t u r n ; i f ( s e r i e s [ 0 ] . x < x M i n ) x M i n = s e r i e s [ 0 ] . x ; i f ( s e r i e s [ s e r i e s . l e n g t h - 1 ] . x > x M a x ) x M a x = s e r i e s [ s e r i e s . l e n g t h - 1 ] . x } ) ; x M i n - = ( x M a x - x M i n ) * t h i s . p a d d i n g . l e f t ; x M a x + = ( x M a x - x M i n ) * t h i s . p a d d i n g . r i g h t ; y M i n = t h i s . g r a p h . m i n = = = " a u t o " ? y M i n : t h i s . g r a p h . m i n | | 0 ; y M a x = t h i s . g r a p h . m a x = = = u n d e f i n e d ? y M a x : t h i s . g r a p h . m a x ; i f ( t h i s . g r a p h . m i n = = = " a u t o " | | y M i n < 0 ) { y M i n - = ( y M a x - y M i n ) * t h i s . p a d d i n g . b o t t o m } i f ( t h i s . g r a p h . m a x = = = u n d e f i n e d ) { y M a x + = ( y M a x - y M i n ) * t h i s . p a d d i n g . t o p } r e t u r n { x : [ x M i n , x M a x ] , y : [ y M i n , y M a x ] } } , r e n d e r : f u n c t i o n ( a r g s ) { a r g s = a r g s | | { } ; v a r   g r a p h = t h i s . g r a p h ; v a r   s e r i e s = a r g s . s e r i e s | | g r a p h . s e r i e s ; v a r   v i s = a r g s . v i s | | g r a p h . v i s ; v i s . s e l e c t A l l ( " * " ) . r e m o v e ( ) ; v a r   d a t a = s e r i e s . f i l t e r ( f u n c t i o n ( s ) { r e t u r n ! s . d i s a b l e d } ) . m a p ( f u n c t i o n ( s ) { r e t u r n   s . s t a c k } ) ; v a r   p a t h N o d e s = v i s . s e l e c t A l l ( " p a t h . p a t h " ) . d a t a ( d a t a ) . e n t e r ( ) . a p p e n d ( " s v g : p a t h " ) . c l a s s e d ( " p a t h " , t r u e ) . a t t r ( " d " , t h i s . s e r i e s P a t h F a c t o r y ( ) ) ; i f ( t h i s . s t r o k e ) { v a r   s t r o k e N o d e s = v i s . s e l e c t A l l ( " p a t h . s t r o k e " ) . d a t a ( d a t a ) . e n t e r ( ) . a p p e n d ( " s v g : p a t h " ) . c l a s s e d ( " s t r o k e " , t r u e ) . a t t r ( " d " , t h i s . s e r i e s S t r o k e F a c t o r y ( ) ) } v a r   i = 0 ; s e r i e s . f o r E a c h ( f u n c t i o n ( s e r i e s ) { i f ( s e r i e s . d i s a b l e d ) r e t u r n ; s e r i e s . p a t h = p a t h N o d e s [ 0 ] [ i ] ; i f ( t h i s . s t r o k e ) s e r i e s . s t r o k e = s t r o k e N o d e s [ 0 ] [ i ] ; t h i s . _ s t y l e S e r i e s ( s e r i e s ) ; i + + } , t h i s ) } , _ s t y l e S e r i e s : f u n c t i o n ( s e r i e s ) { v a r   f i l l = t h i s . f i l l ? s e r i e s . c o l o r : " n o n e " ; v a r   s t r o k e = t h i s . s t r o k e ? s e r i e s . c o l o r : " n o n e " ; s e r i e s . p a t h . s e t A t t r i b u t e ( " f i l l " , f i l l ) ; s e r i e s . p a t h . s e t A t t r i b u t e ( " s t r o k e " , s t r o k e ) ; s e r i e s . p a t h . s e t A t t r i b u t e ( " s t r o k e - w i d t h " , t h i s . s t r o k e W i d t h ) ; i f ( s e r i e s . c l a s s N a m e ) { d 3 . s e l e c t ( s e r i e s . p a t h ) . c l a s s e d ( s e r i e s . c l a s s N a m e , t r u e ) } i f ( s e r i e s . c l a s s N a m e & & t h i s . s t r o k e ) { d 3 . s e l e c t ( s e r i e s . s t r o k e ) . c l a s s e d ( s e r i e s . c l a s s N a m e , t r u e ) } } , c o n f i g u r e : f u n c t i o n ( a r g s ) { a r g s = a r g s | | { } ; R i c k s h a w . k e y s ( t h i s . d e f a u l t s ( ) ) . f o r E a c h ( f u n c t i o n ( k e y ) { i f ( ! a r g s . h a s O w n P r o p e r t y ( k e y ) ) { t h i s [ k e y ] = t h i s [ k e y ] | | t h i s . g r a p h [ k e y ] | | t h i s . d e f a u l t s ( ) [ k e y ] ; r e t u r n } i f ( t y p e o f   t h i s . d e f a u l t s ( ) [ k e y ] = = " o b j e c t " ) { R i c k s h a w . k e y s ( t h i s . d e f a u l t s ( ) [ k e y ] ) . f o r E a c h ( f u n c t i o n ( k ) { t h i s [ k e y ] [ k ] = a r g s [ k e y ] [ k ] ! = = u n d e f i n e d ? a r g s [ k e y ] [ k ] : t h i s [ k e y ] [ k ] ! = = u n d e f i n e d ? t h i s [ k e y ] [ k ] : t h i s . d e f a u l t s ( ) [ k e y ] [ k ] } , t h i s ) } e l s e { t h i s [ k e y ] = a r g s [ k e y ] ! = = u n d e f i n e d ? a r g s [ k e y ] : t h i s [ k e y ] ! = = u n d e f i n e d ? t h i s [ k e y ] : t h i s . g r a p h [ k e y ] ! = = u n d e f i n e d ? t h i s . g r a p h [ k e y ] : t h i s . d e f a u l t s ( ) [ k e y ] } } , t h i s ) } , s e t S t r o k e W i d t h : f u n c t i o n ( s t r o k e W i d t h ) { i f ( s t r o k e W i d t h ! = = u n d e f i n e d ) { t h i s . s t r o k e W i d t h = s t r o k e W i d t h } } , s e t T e n s i o n : f u n c t i o n ( t e n s i o n ) { i f ( t e n s i o n ! = = u n d e f i n e d ) { t h i s . t e n s i o n = t e n s i o n } } } ) ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . G r a p h . R e n d e r e r . L i n e " ) ; R i c k s h a w . G r a p h . R e n d e r e r . L i n e = R i c k s h a w . C l a s s . c r e a t e ( R i c k s h a w . G r a p h . R e n d e r e r , { n a m e : " l i n e " , d e f a u l t s : f u n c t i o n ( $ s u p e r ) { r e t u r n   R i c k s h a w . e x t e n d ( $ s u p e r ( ) , { u n s t a c k : t r u e , f i l l : f a l s e , s t r o k e : t r u e } ) } , s e r i e s P a t h F a c t o r y : f u n c t i o n ( ) { v a r   g r a p h = t h i s . g r a p h ; v a r   f a c t o r y = d 3 . s v g . l i n e ( ) . x ( f u n c t i o n ( d ) { r e t u r n   g r a p h . x ( d . x ) } ) . y ( f u n c t i o n ( d ) { r e t u r n   g r a p h . y ( d . y ) } ) . i n t e r p o l a t e ( t h i s . g r a p h . i n t e r p o l a t i o n ) . t e n s i o n ( t h i s . t e n s i o n ) ; f a c t o r y . d e f i n e d & & f a c t o r y . d e f i n e d ( f u n c t i o n ( d ) { r e t u r n   d . y ! = = n u l l } ) ; r e t u r n   f a c t o r y } } ) ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . G r a p h . R e n d e r e r . S t a c k " ) ; R i c k s h a w . G r a p h . R e n d e r e r . S t a c k = R i c k s h a w . C l a s s . c r e a t e ( R i c k s h a w . G r a p h . R e n d e r e r , { n a m e : " s t a c k " , d e f a u l t s : f u n c t i o n ( $ s u p e r ) { r e t u r n   R i c k s h a w . e x t e n d ( $ s u p e r ( ) , { f i l l : t r u e , s t r o k e : f a l s e , u n s t a c k : f a l s e } ) } , s e r i e s P a t h F a c t o r y : f u n c t i o n ( ) { v a r   g r a p h = t h i s . g r a p h ; v a r   f a c t o r y = d 3 . s v g . a r e a ( ) . x ( f u n c t i o n ( d ) { r e t u r n   g r a p h . x ( d . x ) } ) . y 0 ( f u n c t i o n ( d ) { r e t u r n   g r a p h . y ( d . y 0 ) } ) . y 1 ( f u n c t i o n ( d ) { r e t u r n   g r a p h . y ( d . y + d . y 0 ) } ) . i n t e r p o l a t e ( t h i s . g r a p h . i n t e r p o l a t i o n ) . t e n s i o n ( t h i s . t e n s i o n ) ; f a c t o r y . d e f i n e d & & f a c t o r y . d e f i n e d ( f u n c t i o n ( d ) { r e t u r n   d . y ! = = n u l l } ) ; r e t u r n   f a c t o r y } } ) ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . G r a p h . R e n d e r e r . B a r " ) ; R i c k s h a w . G r a p h . R e n d e r e r . B a r = R i c k s h a w . C l a s s . c r e a t e ( R i c k s h a w . G r a p h . R e n d e r e r , { n a m e : " b a r " , d e f a u l t s : f u n c t i o n ( $ s u p e r ) { v a r   d e f a u l t s = R i c k s h a w . e x t e n d ( $ s u p e r ( ) , { g a p S i z e : . 0 5 , u n s t a c k : f a l s e } ) ; d e l e t e   d e f a u l t s . t e n s i o n ; r e t u r n   d e f a u l t s } , i n i t i a l i z e : f u n c t i o n ( $ s u p e r , a r g s ) { a r g s = a r g s | | { } ; t h i s . g a p S i z e = a r g s . g a p S i z e | | t h i s . g a p S i z e ; $ s u p e r ( a r g s ) } , d o m a i n : f u n c t i o n ( $ s u p e r ) { v a r   d o m a i n = $ s u p e r ( ) ; v a r   f r e q u e n t I n t e r v a l = t h i s . _ f r e q u e n t I n t e r v a l ( t h i s . g r a p h . s t a c k e d D a t a . s l i c e ( - 1 ) . s h i f t ( ) ) ; d o m a i n . x [ 1 ] + = N u m b e r ( f r e q u e n t I n t e r v a l . m a g n i t u d e ) ; r e t u r n   d o m a i n } , b a r W i d t h : f u n c t i o n ( s e r i e s ) { v a r   f r e q u e n t I n t e r v a l = t h i s . _ f r e q u e n t I n t e r v a l ( s e r i e s . s t a c k ) ; v a r   b a r W i d t h = t h i s . g r a p h . x . m a g n i t u d e ( f r e q u e n t I n t e r v a l . m a g n i t u d e ) * ( 1 - t h i s . g a p S i z e ) ; r e t u r n   b a r W i d t h } , r e n d e r : f u n c t i o n ( a r g s ) { a r g s = a r g s | | { } ; v a r   g r a p h = t h i s . g r a p h ; v a r   s e r i e s = a r g s . s e r i e s | | g r a p h . s e r i e s ; v a r   v i s = a r g s . v i s | | g r a p h . v i s ; v i s . s e l e c t A l l ( " * " ) . r e m o v e ( ) ; v a r   b a r W i d t h = t h i s . b a r W i d t h ( s e r i e s . a c t i v e ( ) [ 0 ] ) ; v a r   b a r X O f f s e t = 0 ; v a r   a c t i v e S e r i e s C o u n t = s e r i e s . f i l t e r ( f u n c t i o n ( s ) { r e t u r n ! s . d i s a b l e d } ) . l e n g t h ; v a r   s e r i e s B a r W i d t h = t h i s . u n s t a c k ? b a r W i d t h / a c t i v e S e r i e s C o u n t : b a r W i d t h ; v a r   t r a n s f o r m = f u n c t i o n ( d ) { v a r   m a t r i x = [ 1 , 0 , 0 , d . y < 0 ? - 1 : 1 , 0 , d . y < 0 ? g r a p h . y . m a g n i t u d e ( M a t h . a b s ( d . y ) ) * 2 : 0 ] ; r e t u r n " m a t r i x ( " + m a t r i x . j o i n ( " , " ) + " ) " } ; s e r i e s . f o r E a c h ( f u n c t i o n ( s e r i e s ) { i f ( s e r i e s . d i s a b l e d ) r e t u r n ; v a r   b a r W i d t h = t h i s . b a r W i d t h ( s e r i e s ) ; v a r   n o d e s = v i s . s e l e c t A l l ( " p a t h " ) . d a t a ( s e r i e s . s t a c k . f i l t e r ( f u n c t i o n ( d ) { r e t u r n   d . y ! = = n u l l } ) ) . e n t e r ( ) . a p p e n d ( " s v g : r e c t " ) . a t t r ( " x " , f u n c t i o n ( d ) { r e t u r n   g r a p h . x ( d . x ) + b a r X O f f s e t } ) . a t t r ( " y " , f u n c t i o n ( d ) { r e t u r n   g r a p h . y ( d . y 0 + M a t h . a b s ( d . y ) ) * ( d . y < 0 ? - 1 : 1 ) } ) . a t t r ( " w i d t h " , s e r i e s B a r W i d t h ) . a t t r ( " h e i g h t " , f u n c t i o n ( d ) { r e t u r n   g r a p h . y . m a g n i t u d e ( M a t h . a b s ( d . y ) ) } ) . a t t r ( " t r a n s f o r m " , t r a n s f o r m ) ; A r r a y . p r o t o t y p e . f o r E a c h . c a l l ( n o d e s [ 0 ] , f u n c t i o n ( n ) { n . s e t A t t r i b u t e ( " f i l l " , s e r i e s . c o l o r ) } ) ; i f ( t h i s . u n s t a c k ) b a r X O f f s e t + = s e r i e s B a r W i d t h } , t h i s ) } , _ f r e q u e n t I n t e r v a l : f u n c t i o n ( d a t a ) { v a r   i n t e r v a l C o u n t s = { } ; f o r ( v a r   i = 0 ; i < d a t a . l e n g t h - 1 ; i + + ) { v a r   i n t e r v a l = d a t a [ i + 1 ] . x - d a t a [ i ] . x ; i n t e r v a l C o u n t s [ i n t e r v a l ] = i n t e r v a l C o u n t s [ i n t e r v a l ] | | 0 ; i n t e r v a l C o u n t s [ i n t e r v a l ] + + } v a r   f r e q u e n t I n t e r v a l = { c o u n t : 0 , m a g n i t u d e : 1 } ; R i c k s h a w . k e y s ( i n t e r v a l C o u n t s ) . f o r E a c h ( f u n c t i o n ( i ) { i f ( f r e q u e n t I n t e r v a l . c o u n t < i n t e r v a l C o u n t s [ i ] ) { f r e q u e n t I n t e r v a l = { c o u n t : i n t e r v a l C o u n t s [ i ] , m a g n i t u d e : i } } } ) ; r e t u r n   f r e q u e n t I n t e r v a l } } ) ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . G r a p h . R e n d e r e r . A r e a " ) ; R i c k s h a w . G r a p h . R e n d e r e r . A r e a = R i c k s h a w . C l a s s . c r e a t e ( R i c k s h a w . G r a p h . R e n d e r e r , { n a m e : " a r e a " , d e f a u l t s : f u n c t i o n ( $ s u p e r ) { r e t u r n   R i c k s h a w . e x t e n d ( $ s u p e r ( ) , { u n s t a c k : f a l s e , f i l l : f a l s e , s t r o k e : f a l s e } ) } , s e r i e s P a t h F a c t o r y : f u n c t i o n ( ) { v a r   g r a p h = t h i s . g r a p h ; v a r   f a c t o r y = d 3 . s v g . a r e a ( ) . x ( f u n c t i o n ( d ) { r e t u r n   g r a p h . x ( d . x ) } ) . y 0 ( f u n c t i o n ( d ) { r e t u r n   g r a p h . y ( d . y 0 ) } ) . y 1 ( f u n c t i o n ( d ) { r e t u r n   g r a p h . y ( d . y + d . y 0 ) } ) . i n t e r p o l a t e ( g r a p h . i n t e r p o l a t i o n ) . t e n s i o n ( t h i s . t e n s i o n ) ; 
 f a c t o r y . d e f i n e d & & f a c t o r y . d e f i n e d ( f u n c t i o n ( d ) { r e t u r n   d . y ! = = n u l l } ) ; r e t u r n   f a c t o r y } , s e r i e s S t r o k e F a c t o r y : f u n c t i o n ( ) { v a r   g r a p h = t h i s . g r a p h ; v a r   f a c t o r y = d 3 . s v g . l i n e ( ) . x ( f u n c t i o n ( d ) { r e t u r n   g r a p h . x ( d . x ) } ) . y ( f u n c t i o n ( d ) { r e t u r n   g r a p h . y ( d . y + d . y 0 ) } ) . i n t e r p o l a t e ( g r a p h . i n t e r p o l a t i o n ) . t e n s i o n ( t h i s . t e n s i o n ) ; f a c t o r y . d e f i n e d & & f a c t o r y . d e f i n e d ( f u n c t i o n ( d ) { r e t u r n   d . y ! = = n u l l } ) ; r e t u r n   f a c t o r y } , r e n d e r : f u n c t i o n ( a r g s ) { a r g s = a r g s | | { } ; v a r   g r a p h = t h i s . g r a p h ; v a r   s e r i e s = a r g s . s e r i e s | | g r a p h . s e r i e s ; v a r   v i s = a r g s . v i s | | g r a p h . v i s ; v i s . s e l e c t A l l ( " * " ) . r e m o v e ( ) ; v a r   m e t h o d = t h i s . u n s t a c k ? " a p p e n d " : " i n s e r t " ; v a r   d a t a = s e r i e s . f i l t e r ( f u n c t i o n ( s ) { r e t u r n ! s . d i s a b l e d } ) . m a p ( f u n c t i o n ( s ) { r e t u r n   s . s t a c k } ) ; v a r   n o d e s = v i s . s e l e c t A l l ( " p a t h " ) . d a t a ( d a t a ) . e n t e r ( ) [ m e t h o d ] ( " s v g : g " , " g " ) ; n o d e s . a p p e n d ( " s v g : p a t h " ) . a t t r ( " d " , t h i s . s e r i e s P a t h F a c t o r y ( ) ) . a t t r ( " c l a s s " , " a r e a " ) ; i f ( t h i s . s t r o k e ) { n o d e s . a p p e n d ( " s v g : p a t h " ) . a t t r ( " d " , t h i s . s e r i e s S t r o k e F a c t o r y ( ) ) . a t t r ( " c l a s s " , " l i n e " ) } v a r   i = 0 ; s e r i e s . f o r E a c h ( f u n c t i o n ( s e r i e s ) { i f ( s e r i e s . d i s a b l e d ) r e t u r n ; s e r i e s . p a t h = n o d e s [ 0 ] [ i + + ] ; t h i s . _ s t y l e S e r i e s ( s e r i e s ) } , t h i s ) } , _ s t y l e S e r i e s : f u n c t i o n ( s e r i e s ) { i f ( ! s e r i e s . p a t h ) r e t u r n ; d 3 . s e l e c t ( s e r i e s . p a t h ) . s e l e c t ( " . a r e a " ) . a t t r ( " f i l l " , s e r i e s . c o l o r ) ; i f ( t h i s . s t r o k e ) { d 3 . s e l e c t ( s e r i e s . p a t h ) . s e l e c t ( " . l i n e " ) . a t t r ( " f i l l " , " n o n e " ) . a t t r ( " s t r o k e " , s e r i e s . s t r o k e | | d 3 . i n t e r p o l a t e R g b ( s e r i e s . c o l o r , " b l a c k " ) ( . 1 2 5 ) ) . a t t r ( " s t r o k e - w i d t h " , t h i s . s t r o k e W i d t h ) } i f ( s e r i e s . c l a s s N a m e ) { s e r i e s . p a t h . s e t A t t r i b u t e ( " c l a s s " , s e r i e s . c l a s s N a m e ) } } } ) ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . G r a p h . R e n d e r e r . S c a t t e r P l o t " ) ; R i c k s h a w . G r a p h . R e n d e r e r . S c a t t e r P l o t = R i c k s h a w . C l a s s . c r e a t e ( R i c k s h a w . G r a p h . R e n d e r e r , { n a m e : " s c a t t e r p l o t " , d e f a u l t s : f u n c t i o n ( $ s u p e r ) { r e t u r n   R i c k s h a w . e x t e n d ( $ s u p e r ( ) , { u n s t a c k : t r u e , f i l l : t r u e , s t r o k e : f a l s e , p a d d i n g : { t o p : . 0 1 , r i g h t : . 0 1 , b o t t o m : . 0 1 , l e f t : . 0 1 } , d o t S i z e : 4 } ) } , i n i t i a l i z e : f u n c t i o n ( $ s u p e r , a r g s ) { $ s u p e r ( a r g s ) } , r e n d e r : f u n c t i o n ( a r g s ) { a r g s = a r g s | | { } ; v a r   g r a p h = t h i s . g r a p h ; v a r   s e r i e s = a r g s . s e r i e s | | g r a p h . s e r i e s ; v a r   v i s = a r g s . v i s | | g r a p h . v i s ; v a r   d o t S i z e = t h i s . d o t S i z e ; v i s . s e l e c t A l l ( " * " ) . r e m o v e ( ) ; s e r i e s . f o r E a c h ( f u n c t i o n ( s e r i e s ) { i f ( s e r i e s . d i s a b l e d ) r e t u r n ; v a r   n o d e s = v i s . s e l e c t A l l ( " p a t h " ) . d a t a ( s e r i e s . s t a c k . f i l t e r ( f u n c t i o n ( d ) { r e t u r n   d . y ! = = n u l l } ) ) . e n t e r ( ) . a p p e n d ( " s v g : c i r c l e " ) . a t t r ( " c x " , f u n c t i o n ( d ) { r e t u r n   g r a p h . x ( d . x ) } ) . a t t r ( " c y " , f u n c t i o n ( d ) { r e t u r n   g r a p h . y ( d . y ) } ) . a t t r ( " r " , f u n c t i o n ( d ) { r e t u r n " r " i n   d ? d . r : d o t S i z e } ) ; i f ( s e r i e s . c l a s s N a m e ) { n o d e s . c l a s s e d ( s e r i e s . c l a s s N a m e , t r u e ) } A r r a y . p r o t o t y p e . f o r E a c h . c a l l ( n o d e s [ 0 ] , f u n c t i o n ( n ) { n . s e t A t t r i b u t e ( " f i l l " , s e r i e s . c o l o r ) } ) } , t h i s ) } } ) ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . G r a p h . R e n d e r e r . M u l t i " ) ; R i c k s h a w . G r a p h . R e n d e r e r . M u l t i = R i c k s h a w . C l a s s . c r e a t e ( R i c k s h a w . G r a p h . R e n d e r e r , { n a m e : " m u l t i " , i n i t i a l i z e : f u n c t i o n ( $ s u p e r , a r g s ) { $ s u p e r ( a r g s ) } , d e f a u l t s : f u n c t i o n ( $ s u p e r ) { r e t u r n   R i c k s h a w . e x t e n d ( $ s u p e r ( ) , { u n s t a c k : t r u e , f i l l : f a l s e , s t r o k e : t r u e } ) } , c o n f i g u r e : f u n c t i o n ( $ s u p e r , a r g s ) { a r g s = a r g s | | { } ; t h i s . c o n f i g = a r g s ; $ s u p e r ( a r g s ) } , d o m a i n : f u n c t i o n ( $ s u p e r ) { t h i s . g r a p h . s t a c k D a t a ( ) ; v a r   d o m a i n s = [ ] ; v a r   g r o u p s = t h i s . _ g r o u p s ( ) ; t h i s . _ s t a c k ( g r o u p s ) ; g r o u p s . f o r E a c h ( f u n c t i o n ( g r o u p ) { v a r   d a t a = g r o u p . s e r i e s . f i l t e r ( f u n c t i o n ( s ) { r e t u r n ! s . d i s a b l e d } ) . m a p ( f u n c t i o n ( s ) { r e t u r n   s . s t a c k } ) ; i f ( ! d a t a . l e n g t h ) r e t u r n ; v a r   d o m a i n = n u l l ; i f ( g r o u p . r e n d e r e r & & g r o u p . r e n d e r e r . d o m a i n ) { d o m a i n = g r o u p . r e n d e r e r . d o m a i n ( d a t a ) } e l s e { d o m a i n = $ s u p e r ( d a t a ) } d o m a i n s . p u s h ( d o m a i n ) } ) ; v a r   x M i n = d 3 . m i n ( d o m a i n s . m a p ( f u n c t i o n ( d ) { r e t u r n   d . x [ 0 ] } ) ) ; v a r   x M a x = d 3 . m a x ( d o m a i n s . m a p ( f u n c t i o n ( d ) { r e t u r n   d . x [ 1 ] } ) ) ; v a r   y M i n = d 3 . m i n ( d o m a i n s . m a p ( f u n c t i o n ( d ) { r e t u r n   d . y [ 0 ] } ) ) ; v a r   y M a x = d 3 . m a x ( d o m a i n s . m a p ( f u n c t i o n ( d ) { r e t u r n   d . y [ 1 ] } ) ) ; r e t u r n { x : [ x M i n , x M a x ] , y : [ y M i n , y M a x ] } } , _ g r o u p s : f u n c t i o n ( ) { v a r   g r a p h = t h i s . g r a p h ; v a r   r e n d e r G r o u p s = { } ; g r a p h . s e r i e s . f o r E a c h ( f u n c t i o n ( s e r i e s ) { i f ( s e r i e s . d i s a b l e d ) r e t u r n ; i f ( ! r e n d e r G r o u p s [ s e r i e s . r e n d e r e r ] ) { v a r   n s = " h t t p : / / w w w . w 3 . o r g / 2 0 0 0 / s v g " ; v a r   v i s = d o c u m e n t . c r e a t e E l e m e n t N S ( n s , " g " ) ; g r a p h . v i s [ 0 ] [ 0 ] . a p p e n d C h i l d ( v i s ) ; v a r   r e n d e r e r = g r a p h . _ r e n d e r e r s [ s e r i e s . r e n d e r e r ] ; v a r   c o n f i g = { } ; v a r   d e f a u l t s = [ t h i s . d e f a u l t s ( ) , r e n d e r e r . d e f a u l t s ( ) , t h i s . c o n f i g , t h i s . g r a p h ] ; d e f a u l t s . f o r E a c h ( f u n c t i o n ( d ) { R i c k s h a w . e x t e n d ( c o n f i g , d ) } ) ; r e n d e r e r . c o n f i g u r e ( c o n f i g ) ; r e n d e r G r o u p s [ s e r i e s . r e n d e r e r ] = { r e n d e r e r : r e n d e r e r , s e r i e s : [ ] , v i s : d 3 . s e l e c t ( v i s ) } } r e n d e r G r o u p s [ s e r i e s . r e n d e r e r ] . s e r i e s . p u s h ( s e r i e s ) } , t h i s ) ; v a r   g r o u p s = [ ] ; O b j e c t . k e y s ( r e n d e r G r o u p s ) . f o r E a c h ( f u n c t i o n ( k e y ) { v a r   g r o u p = r e n d e r G r o u p s [ k e y ] ; g r o u p s . p u s h ( g r o u p ) } ) ; r e t u r n   g r o u p s } , _ s t a c k : f u n c t i o n ( g r o u p s ) { g r o u p s . f o r E a c h ( f u n c t i o n ( g r o u p ) { v a r   s e r i e s = g r o u p . s e r i e s . f i l t e r ( f u n c t i o n ( s e r i e s ) { r e t u r n ! s e r i e s . d i s a b l e d } ) ; v a r   d a t a = s e r i e s . m a p ( f u n c t i o n ( s e r i e s ) { r e t u r n   s e r i e s . s t a c k } ) ; i f ( ! g r o u p . r e n d e r e r . u n s t a c k ) { v a r   l a y o u t = d 3 . l a y o u t . s t a c k ( ) ; v a r   s t a c k e d D a t a = R i c k s h a w . c l o n e ( l a y o u t ( d a t a ) ) ; s e r i e s . f o r E a c h ( f u n c t i o n ( s e r i e s , i n d e x ) { s e r i e s . _ s t a c k = R i c k s h a w . c l o n e ( s t a c k e d D a t a [ i n d e x ] ) } ) } } , t h i s ) ; r e t u r n   g r o u p s } , r e n d e r : f u n c t i o n ( ) { t h i s . g r a p h . s e r i e s . f o r E a c h ( f u n c t i o n ( s e r i e s ) { i f ( ! s e r i e s . r e n d e r e r ) { t h r o w   n e w   E r r o r ( " E a c h   s e r i e s   n e e d s   a   r e n d e r e r   f o r   g r a p h   ' m u l t i '   r e n d e r e r " ) } } ) ; t h i s . g r a p h . v i s . s e l e c t A l l ( " * " ) . r e m o v e ( ) ; v a r   g r o u p s = t h i s . _ g r o u p s ( ) ; g r o u p s = t h i s . _ s t a c k ( g r o u p s ) ; g r o u p s . f o r E a c h ( f u n c t i o n ( g r o u p ) { v a r   s e r i e s = g r o u p . s e r i e s . f i l t e r ( f u n c t i o n ( s e r i e s ) { r e t u r n ! s e r i e s . d i s a b l e d } ) ; s e r i e s . a c t i v e = f u n c t i o n ( ) { r e t u r n   s e r i e s } ; g r o u p . r e n d e r e r . r e n d e r ( { s e r i e s : s e r i e s , v i s : g r o u p . v i s } ) ; s e r i e s . f o r E a c h ( f u n c t i o n ( s ) { s . s t a c k = s . _ s t a c k | | s . s t a c k | | s . d a t a } ) } ) } } ) ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . G r a p h . R e n d e r e r . L i n e P l o t " ) ; R i c k s h a w . G r a p h . R e n d e r e r . L i n e P l o t = R i c k s h a w . C l a s s . c r e a t e ( R i c k s h a w . G r a p h . R e n d e r e r , { n a m e : " l i n e p l o t " , d e f a u l t s : f u n c t i o n ( $ s u p e r ) { r e t u r n   R i c k s h a w . e x t e n d ( $ s u p e r ( ) , { u n s t a c k : t r u e , f i l l : f a l s e , s t r o k e : t r u e , p a d d i n g : { t o p : . 0 1 , r i g h t : . 0 1 , b o t t o m : . 0 1 , l e f t : . 0 1 } , d o t S i z e : 3 , s t r o k e W i d t h : 2 } ) } , s e r i e s P a t h F a c t o r y : f u n c t i o n ( ) { v a r   g r a p h = t h i s . g r a p h ; v a r   f a c t o r y = d 3 . s v g . l i n e ( ) . x ( f u n c t i o n ( d ) { r e t u r n   g r a p h . x ( d . x ) } ) . y ( f u n c t i o n ( d ) { r e t u r n   g r a p h . y ( d . y ) } ) . i n t e r p o l a t e ( t h i s . g r a p h . i n t e r p o l a t i o n ) . t e n s i o n ( t h i s . t e n s i o n ) ; f a c t o r y . d e f i n e d & & f a c t o r y . d e f i n e d ( f u n c t i o n ( d ) { r e t u r n   d . y ! = = n u l l } ) ; r e t u r n   f a c t o r y } , r e n d e r : f u n c t i o n ( a r g s ) { a r g s = a r g s | | { } ; v a r   g r a p h = t h i s . g r a p h ; v a r   s e r i e s = a r g s . s e r i e s | | g r a p h . s e r i e s ; v a r   v i s = a r g s . v i s | | g r a p h . v i s ; v a r   d o t S i z e = t h i s . d o t S i z e ; v i s . s e l e c t A l l ( " * " ) . r e m o v e ( ) ; v a r   d a t a = s e r i e s . f i l t e r ( f u n c t i o n ( s ) { r e t u r n ! s . d i s a b l e d } ) . m a p ( f u n c t i o n ( s ) { r e t u r n   s . s t a c k } ) ; v a r   n o d e s = v i s . s e l e c t A l l ( " p a t h " ) . d a t a ( d a t a ) . e n t e r ( ) . a p p e n d ( " s v g : p a t h " ) . a t t r ( " d " , t h i s . s e r i e s P a t h F a c t o r y ( ) ) ; v a r   i = 0 ; s e r i e s . f o r E a c h ( f u n c t i o n ( s e r i e s ) { i f ( s e r i e s . d i s a b l e d ) r e t u r n ; s e r i e s . p a t h = n o d e s [ 0 ] [ i + + ] ; t h i s . _ s t y l e S e r i e s ( s e r i e s ) } , t h i s ) ; s e r i e s . f o r E a c h ( f u n c t i o n ( s e r i e s ) { i f ( s e r i e s . d i s a b l e d ) r e t u r n ; v a r   n o d e s = v i s . s e l e c t A l l ( " x " ) . d a t a ( s e r i e s . s t a c k . f i l t e r ( f u n c t i o n ( d ) { r e t u r n   d . y ! = = n u l l } ) ) . e n t e r ( ) . a p p e n d ( " s v g : c i r c l e " ) . a t t r ( " c x " , f u n c t i o n ( d ) { r e t u r n   g r a p h . x ( d . x ) } ) . a t t r ( " c y " , f u n c t i o n ( d ) { r e t u r n   g r a p h . y ( d . y ) } ) . a t t r ( " r " , f u n c t i o n ( d ) { r e t u r n " r " i n   d ? d . r : d o t S i z e } ) ; A r r a y . p r o t o t y p e . f o r E a c h . c a l l ( n o d e s [ 0 ] , f u n c t i o n ( n ) { i f ( ! n ) r e t u r n ; n . s e t A t t r i b u t e ( " d a t a - c o l o r " , s e r i e s . c o l o r ) ; n . s e t A t t r i b u t e ( " f i l l " , " w h i t e " ) ; n . s e t A t t r i b u t e ( " s t r o k e " , s e r i e s . c o l o r ) ; n . s e t A t t r i b u t e ( " s t r o k e - w i d t h " , t h i s . s t r o k e W i d t h ) } . b i n d ( t h i s ) ) } , t h i s ) } } ) ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . G r a p h . S m o o t h e r " ) ; R i c k s h a w . G r a p h . S m o o t h e r = R i c k s h a w . C l a s s . c r e a t e ( { i n i t i a l i z e : f u n c t i o n ( a r g s ) { t h i s . g r a p h = a r g s . g r a p h ; t h i s . e l e m e n t = a r g s . e l e m e n t ; t h i s . a g g r e g a t i o n S c a l e = 1 ; t h i s . b u i l d ( ) ; t h i s . g r a p h . s t a c k D a t a . h o o k s . d a t a . p u s h ( { n a m e : " s m o o t h e r " , o r d e r P o s i t i o n : 5 0 , f : t h i s . t r a n s f o r m e r . b i n d ( t h i s ) } ) } , b u i l d : f u n c t i o n ( ) { v a r   s e l f = t h i s ; v a r   $ = j Q u e r y ; i f ( t h i s . e l e m e n t ) { $ ( f u n c t i o n ( ) { $ ( s e l f . e l e m e n t ) . s l i d e r ( { m i n : 1 , m a x : 1 0 0 , s l i d e : f u n c t i o n ( e v e n t , u i ) { s e l f . s e t S c a l e ( u i . v a l u e ) } } ) } ) } } , s e t S c a l e : f u n c t i o n ( s c a l e ) { i f ( s c a l e < 1 ) { t h r o w " s c a l e   o u t   o f   r a n g e :   " + s c a l e } t h i s . a g g r e g a t i o n S c a l e = s c a l e ; t h i s . g r a p h . u p d a t e ( ) } , t r a n s f o r m e r : f u n c t i o n ( d a t a ) { i f ( t h i s . a g g r e g a t i o n S c a l e = = 1 ) r e t u r n   d a t a ; v a r   a g g r e g a t e d D a t a = [ ] ; d a t a . f o r E a c h ( f u n c t i o n ( s e r i e s D a t a ) { v a r   a g g r e g a t e d S e r i e s D a t a = [ ] ; w h i l e ( s e r i e s D a t a . l e n g t h ) { v a r   a v g X = 0 , a v g Y = 0 ; v a r   s l i c e = s e r i e s D a t a . s p l i c e ( 0 , t h i s . a g g r e g a t i o n S c a l e ) ; s l i c e . f o r E a c h ( f u n c t i o n ( d ) { a v g X + = d . x / s l i c e . l e n g t h ; a v g Y + = d . y / s l i c e . l e n g t h } ) ; a g g r e g a t e d S e r i e s D a t a . p u s h ( { x : a v g X , y : a v g Y } ) } a g g r e g a t e d D a t a . p u s h ( a g g r e g a t e d S e r i e s D a t a ) } . b i n d ( t h i s ) ) ; r e t u r n   a g g r e g a t e d D a t a } } ) ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . G r a p h . S o c k e t i o " ) ; R i c k s h a w . G r a p h . S o c k e t i o = R i c k s h a w . C l a s s . c r e a t e ( R i c k s h a w . G r a p h . A j a x , { r e q u e s t : f u n c t i o n ( ) { v a r   s o c k e t = i o . c o n n e c t ( t h i s . d a t a U R L ) ; v a r   s e l f = t h i s ; s o c k e t . o n ( " r i c k s h a w " , f u n c t i o n ( d a t a ) { s e l f . s u c c e s s ( d a t a ) } ) } } ) ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . S e r i e s " ) ; R i c k s h a w . S e r i e s = R i c k s h a w . C l a s s . c r e a t e ( A r r a y , { i n i t i a l i z e : f u n c t i o n ( d a t a , p a l e t t e , o p t i o n s ) { o p t i o n s = o p t i o n s | | { } ; t h i s . p a l e t t e = n e w   R i c k s h a w . C o l o r . P a l e t t e ( p a l e t t e ) ; t h i s . t i m e B a s e = t y p e o f   o p t i o n s . t i m e B a s e = = = " u n d e f i n e d " ? M a t h . f l o o r ( ( n e w   D a t e ) . g e t T i m e ( ) / 1 e 3 ) : o p t i o n s . t i m e B a s e ; v a r   t i m e I n t e r v a l = t y p e o f   o p t i o n s . t i m e I n t e r v a l = = " u n d e f i n e d " ? 1 e 3 : o p t i o n s . t i m e I n t e r v a l ; t h i s . s e t T i m e I n t e r v a l ( t i m e I n t e r v a l ) ; i f ( d a t a & & t y p e o f   d a t a = = " o b j e c t " & & A r r a y . i s A r r a y ( d a t a ) ) { d a t a . f o r E a c h ( f u n c t i o n ( i t e m ) { t h i s . a d d I t e m ( i t e m ) } , t h i s ) } } , a d d I t e m : f u n c t i o n ( i t e m ) { i f ( t y p e o f   i t e m . n a m e = = = " u n d e f i n e d " ) { t h r o w " a d d I t e m ( )   n e e d s   a   n a m e " } i t e m . c o l o r = i t e m . c o l o r | | t h i s . p a l e t t e . c o l o r ( i t e m . n a m e ) ; i t e m . d a t a = i t e m . d a t a | | [ ] ; i f ( i t e m . d a t a . l e n g t h = = = 0 & & t h i s . l e n g t h & & t h i s . g e t I n d e x ( ) > 0 ) { t h i s [ 0 ] . d a t a . f o r E a c h ( f u n c t i o n ( p l o t ) { i t e m . d a t a . p u s h ( { x : p l o t . x , y : 0 } ) } ) } e l s e   i f ( i t e m . d a t a . l e n g t h = = = 0 ) { i t e m . d a t a . p u s h ( { x : t h i s . t i m e B a s e - ( t h i s . t i m e I n t e r v a l | | 0 ) , y : 0 } ) } t h i s . p u s h ( i t e m ) ; i f ( t h i s . l e g e n d ) { t h i s . l e g e n d . a d d L i n e ( t h i s . i t e m B y N a m e ( i t e m . n a m e ) ) } } , a d d D a t a : f u n c t i o n ( d a t a , x ) { v a r   i n d e x = t h i s . g e t I n d e x ( ) ; R i c k s h a w . k e y s ( d a t a ) . f o r E a c h ( f u n c t i o n ( n a m e ) { i f ( ! t h i s . i t e m B y N a m e ( n a m e ) ) { t h i s . a d d I t e m ( { n a m e : n a m e } ) } } , t h i s ) ; t h i s . f o r E a c h ( f u n c t i o n ( i t e m ) { i t e m . d a t a . p u s h ( { x : x | | ( i n d e x * t h i s . t i m e I n t e r v a l | | 1 ) + t h i s . t i m e B a s e , y : d a t a [ i t e m . n a m e ] | | 0 } ) } , t h i s ) } , g e t I n d e x : f u n c t i o n ( ) { r e t u r n   t h i s [ 0 ] & & t h i s [ 0 ] . d a t a & & t h i s [ 0 ] . d a t a . l e n g t h ? t h i s [ 0 ] . d a t a . l e n g t h : 0 } , i t e m B y N a m e : f u n c t i o n ( n a m e ) { f o r ( v a r   i = 0 ; i < t h i s . l e n g t h ; i + + ) { i f ( t h i s [ i ] . n a m e = = n a m e ) r e t u r n   t h i s [ i ] } } , s e t T i m e I n t e r v a l : f u n c t i o n ( i v ) { t h i s . t i m e I n t e r v a l = i v / 1 e 3 } , s e t T i m e B a s e : f u n c t i o n ( t ) { t h i s . t i m e B a s e = t } , d u m p : f u n c t i o n ( ) { v a r   d a t a = { t i m e B a s e : t h i s . t i m e B a s e , t i m e I n t e r v a l : t h i s . t i m e I n t e r v a l , i t e m s : [ ] } ; t h i s . f o r E a c h ( f u n c t i o n ( i t e m ) { v a r   n e w I t e m = { c o l o r : i t e m . c o l o r , n a m e : i t e m . n a m e , d a t a : [ ] } ; i t e m . d a t a . f o r E a c h ( f u n c t i o n ( p l o t ) { n e w I t e m . d a t a . p u s h ( { x : p l o t . x , y : p l o t . y } ) } ) ; d a t a . i t e m s . p u s h ( n e w I t e m ) } ) ; r e t u r n   d a t a } , l o a d : f u n c t i o n ( d a t a ) { i f ( d a t a . t i m e I n t e r v a l ) { t h i s . t i m e I n t e r v a l = d a t a . t i m e I n t e r v a l } i f ( d a t a . t i m e B a s e ) { t h i s . t i m e B a s e = d a t a . t i m e B a s e } i f ( d a t a . i t e m s ) { d a t a . i t e m s . f o r E a c h ( f u n c t i o n ( i t e m ) { t h i s . p u s h ( i t e m ) ; i f ( t h i s . l e g e n d ) { t h i s . l e g e n d . a d d L i n e ( t h i s . i t e m B y N a m e ( i t e m . n a m e ) ) } } , t h i s ) } } } ) ; R i c k s h a w . S e r i e s . z e r o F i l l = f u n c t i o n ( s e r i e s ) { R i c k s h a w . S e r i e s . f i l l ( s e r i e s , 0 ) } ; R i c k s h a w . S e r i e s . f i l l = f u n c t i o n ( s e r i e s , f i l l ) { v a r   x ; v a r   i = 0 ; v a r   d a t a = s e r i e s . m a p ( f u n c t i o n ( s ) { r e t u r n   s . d a t a } ) ; w h i l e ( i < M a t h . m a x . a p p l y ( n u l l , d a t a . m a p ( f u n c t i o n ( d ) { r e t u r n   d . l e n g t h } ) ) ) { x = M a t h . m i n . a p p l y ( n u l l , d a t a . f i l t e r ( f u n c t i o n ( d ) { r e t u r n   d [ i ] } ) . m a p ( f u n c t i o n ( d ) { r e t u r n   d [ i ] . x } ) ) ; d a t a . f o r E a c h ( f u n c t i o n ( d ) { i f ( ! d [ i ] | | d [ i ] . x ! = x ) { d . s p l i c e ( i , 0 , { x : x , y : f i l l } ) } } ) ; i + + } } ; R i c k s h a w . n a m e s p a c e ( " R i c k s h a w . S e r i e s . F i x e d D u r a t i o n " ) ; R i c k s h a w . S e r i e s . F i x e d D u r a t i o n = R i c k s h a w . C l a s s . c r e a t e ( R i c k s h a w . S e r i e s , { i n i t i a l i z e : f u n c t i o n ( d a t a , p a l e t t e , o p t i o n s ) { o p t i o n s = o p t i o n s | | { } ; i f ( t y p e o f   o p t i o n s . t i m e I n t e r v a l = = = " u n d e f i n e d " ) { t h r o w   n e w   E r r o r ( " F i x e d D u r a t i o n   s e r i e s   r e q u i r e s   t i m e I n t e r v a l " ) } i f ( t y p e o f   o p t i o n s . m a x D a t a P o i n t s = = = " u n d e f i n e d " ) { t h r o w   n e w   E r r o r ( " F i x e d D u r a t i o n   s e r i e s   r e q u i r e s   m a x D a t a P o i n t s " ) } t h i s . p a l e t t e = n e w   R i c k s h a w . C o l o r . P a l e t t e ( p a l e t t e ) ; t h i s . t i m e B a s e = t y p e o f   o p t i o n s . t i m e B a s e = = = " u n d e f i n e d " ? M a t h . f l o o r ( ( n e w   D a t e ) . g e t T i m e ( ) / 1 e 3 ) : o p t i o n s . t i m e B a s e ; t h i s . s e t T i m e I n t e r v a l ( o p t i o n s . t i m e I n t e r v a l ) ; i f ( t h i s [ 0 ] & & t h i s [ 0 ] . d a t a & & t h i s [ 0 ] . d a t a . l e n g t h ) { t h i s . c u r r e n t S i z e = t h i s [ 0 ] . d a t a . l e n g t h ; t h i s . c u r r e n t I n d e x = t h i s [ 0 ] . d a t a . l e n g t h } e l s e { t h i s . c u r r e n t S i z e = 0 ; t h i s . c u r r e n t I n d e x = 0 } t h i s . m a x D a t a P o i n t s = o p t i o n s . m a x D a t a P o i n t s ; i f ( d a t a & & t y p e o f   d a t a = = " o b j e c t " & & A r r a y . i s A r r a y ( d a t a ) ) { d a t a . f o r E a c h ( f u n c t i o n ( i t e m ) { t h i s . a d d I t e m ( i t e m ) } , t h i s ) ; t h i s . c u r r e n t S i z e + = 1 ; t h i s . c u r r e n t I n d e x + = 1 } t h i s . t i m e B a s e - = ( t h i s . m a x D a t a P o i n t s - t h i s . c u r r e n t S i z e ) * t h i s . t i m e I n t e r v a l ; i f ( t y p e o f   t h i s . m a x D a t a P o i n t s ! = = " u n d e f i n e d " & & t h i s . c u r r e n t S i z e < t h i s . m a x D a t a P o i n t s ) { f o r ( v a r   i = t h i s . m a x D a t a P o i n t s - t h i s . c u r r e n t S i z e - 1 ; i > 1 ; i - - ) { t h i s . c u r r e n t S i z e + = 1 ; t h i s . c u r r e n t I n d e x + = 1 ; t h i s . f o r E a c h ( f u n c t i o n ( i t e m ) { i t e m . d a t a . u n s h i f t ( { x : ( ( i - 1 ) * t h i s . t i m e I n t e r v a l | | 1 ) + t h i s . t i m e B a s e , y : 0 , i : i } ) } , t h i s ) } } } , a d d D a t a : f u n c t i o n ( $ s u p e r , d a t a , x ) { $ s u p e r ( d a t a , x ) ; t h i s . c u r r e n t S i z e + = 1 ; t h i s . c u r r e n t I n d e x + = 1 ; i f ( t h i s . m a x D a t a P o i n t s ! = = u n d e f i n e d ) { w h i l e ( t h i s . c u r r e n t S i z e > t h i s . m a x D a t a P o i n t s ) { t h i s . d r o p D a t a ( ) } } } , d r o p D a t a : f u n c t i o n ( ) { t h i s . f o r E a c h ( f u n c t i o n ( i t e m ) { i t e m . d a t a . s p l i c e ( 0 , 1 ) } ) ; t h i s . c u r r e n t S i z e - = 1 } , g e t I n d e x : f u n c t i o n ( ) { r e t u r n   t h i s . c u r r e n t I n d e x } } ) ; r e t u r n   R i c k s h a w } ) ;   j       http://172.17.0.26:9090/static/vendor/rickshaw/rickshaw.min.js?v=ecee9c8abfd118f139014cb1b174b08db3f342cf                       !!            +H!!       C                         	                                   !!   	   root   factory        +H!!       B Y      Q         Y              5;	      8                           '=   HE      Q    5   	   1   
           Z   =   `         Qi         '=   H5                  =   : : 6   Q#               : 6   Q   (F    define   function   amd   d3   exports   object   module   require   Rickshaw5!!       C                             *     *                         !!      d3   Rickshaw        +H!!          namespaceC             	                                       !!      namespace   obj   parts   parent   i   length   currentPart        +H!!            ;       ;   o         I          	            T      
=   : W   Q   W  Q?W  QV      W  Q `   m   V   V  7W  QV  V  V  V  7D   
   Q[       8QV  V  7W  Q   V  W  QQ   V  V     V   8
	 `No	,n    split   .   length       5!!    	   	   keysB   K    K                  5!!    	      extendB [    S       [             5!!    	      cloneB                         5!!       !!   namespace!!!!	   keys!!!!   extend!!!!   clone!!    !!        C                           ,    ,                          !!      globalContext   _toString   NULL_TYPE   UNDEFINED_TYPE   BOOLEAN_TYPE   NUMBER_TYPE   STRING_TYPE   OBJECT_TYPE   FUNCTION_CLASS   isFunction   extend	   keys	   Type   isUndefined   slice   argumentNames	   wrap   update   merge	   bind   emptyFunction   Class        +H!!          isFunction                        5    5                            !!      object         +H;                                    
T  l  	  H  	   call       5!!          extend     D                D    5                             !!      destination   source   property        +H;      
   O      _   ,                      T K@   m   W   T     
V   :       T  V   T V   78Q	   	   QLM   QNT   m=Ie    hasOwnProperty       5!!       	   keys                                                      !!      object   results   property        +H;      C   Q         E                     	    T  :    I          A,  R  p	   Z    W   QT  KB   m   W  T     
V  :       V      
V   Q      QLM   QNV    =KX    TypeError   hasOwnProperty	   push       5!!       	   Type                       |    |                            !!      o	   type        +H;      f                      T  x@Hy      >(Hy      z                  T  'W   QV   x=    Hy1      =   Hy+   	   =   Hy%   
   z&   
                         s7|#{   W  vtZxxx fE%    boolean   number   string       5!!    	      isUndefined     |                    5!!          argumentNames                                                      !!      fn   names        +H!!A   ^[\s\(]*function[^(]*\(([^)]*)\) !!I   \/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\/!!   \s+;      *                      T      
:     
    : ?7   
   =   :    
   =   :    
=   : W   QV      ?E      QV   >7          Z          V       -4    toString   match   replace      split   ,   length       5!!       	   wrap                           A    A                          !!      fn   wrapper   __method        +H!!    	      wrap/<b    @    @                5;                               T     Q     ] 5!!    	      update P    A       P             5!!    	      merge   	    	                  5!!       	   bind                       ,	  	  	  	                          !!      fn   context   __method	   args   arguments   .this       +H!!    	      bind/<b  	  	  	  	     	            5;   v   1                     	W   QW  QV       E      Q  V   >7: 	      
   V  
   T     Q     
V   l    Q     	<  O    length	   call5!!    	      emptyFunctionB  
  
  
  
     
             5!!          Class<c                         $
    
                            !!   #   IS_DONTENUM_BUGGY   subclass   create   addMethods         +H!!          subclass      
                  
  
  
  
                            !!               +H;                                  
        5!!          create                        
    
                           !!      parent   properties   klass   i   length   arguments          !!          e         +H!!          klass      1               1  Z  #  Z   
"                        !!      arguments   .this          +H;   )                         	W   QW  QV  5       
V  V   O Q 4    initialize   apply    5;                     $  C                                 -      	W  Q    W  Q@W   QZ    5       
V  O W  Q
  V  >7:    	   V     
:  W   Q     V    5    QV  V   6   QV  Z    6   QV   h         V   5   6   QV     A,  R  6   QV   5      
V   Q        Qv  Q    >W  QV     W  Q 4   m   V  	   
V  V  7 Q    V  W  QQ!   V  V  $   V  5   5
       (   V  5     6
   Q+   V  5   V  6   QV   
	?$	 4"C0)"    slice   apply   shift   Methods   superclass   subclasses   prototype	   push   length   addMethods   initialize   constructor5!!          addMethods                                                      !!	      source   ancestor   properties   i   length   property   value   method   .this       +H!!       #   addMethods/value<c                                                         !!      m        +H!!    	   '   addMethods/value</<b                        5;                                    ; 5;                                  8    % W  QV  5    E      QV  5    5         Q  T  : W   Q  {   
   T  5      5   5         V      
=    Q   T  5      5   5         V      
=    Q   >W  QV      W  Q   m   V   V  7W  QT  V  7W  Q   E8      Q
  V  : E    "   Q  V  : >7=   &   r   '   V  W  Q      V  : V  : W  QV    V  5   V  : 6   QV    V  5   V  : 6   Q2   V  5   V  V  8Q4   V  W  QQ5   V  V  8   V   6+)	      
.S` o    superclass   prototype   toString   Object	   push   valueOf   length   $super5!!       3   Class</IS_DONTENUM_BUGGY<c      E
                E
  
  =
  
                          !!      p          +H!!       !!   toString!!    ;         <      R   .                        [    ?]    K-   m   W   V   =    H      BQN      QLM   QNC 
T869    toString       5!!       !!   addMethods!!    !!       !!   create!!!!   Methods!!    ;   Q                                 Q   W   Q   W  Q   :     Q[   V   ]    [   V  ]   ]    
=P 
	    create   addMethods   Methods5;   B  ]                            
  Q      Q      Q      Q      Q      Q      Q      Q      Q	      Q    5   5      Q=      Q=      Q=      Q=      Q=      Q=       Q=    	  Q	   5   5
      Q
      Q   :     QT  5   "      T  5      6   Q      T     6   Q    +$  ? '    Object   prototype   toString	   Null   Undefined   Boolean   Number   String#   [object Function]   Array   slice   exports   Class5!!       3   Rickshaw.Compat.ClassListc                            p    p                           !!               +H!!    	   7   Rickshaw.Compat.ClassList/<b   e    e                    strTrim    arrIndexOf    DOMEx +   checkTokenAndGetIndex    ClassList   B                        5   B   S    S                5   B b    Z       b           5   B                        5   B                       	   elem   B                        55   B    &     &                5   B e  ~  ]  ~     e           5   B                       5   B   b    b                5   B     y                  5   B                       5   B                        55;   V   !                            '=   IE&      Q=          
=   : q 
                 Q     	    document   undefined   classList   createElement   a   window5!!    	      Rickshaw.Graphb 5  1  -  1     5            	   self   B b    Z       b              B  y    q       y               B                         555   B                          5   B   "    "                   B   !    !                  55   B  "  "  "  "     "              B A"  S"  9"  S"     A"             5   B u"  "  m"  "     u"             5   B "  "  "  "     "             55   B  "  $  "  $     "            5   B  $  O%  $  O%     $              B 7%  M%  /%  M%     7%             55   B  %  )  w%  )     %            	   data    preserve    stackedData    i   B %  %  %  %     %             5   B %  	&  %  	&     %              B %  &  %  &     %            55   B U&  ~&  M&  ~&     U&             5   B &  P'  &  P'     &                series   B 2'  L'  *'  L'     2'             55   B |'  '  t'  '     |'             5   B (  (  (  (     (               B (  (  (  (     (             55   B )  7)   )  7)     )             5   B ])  )  U)  )     ])             55   B  )  +  )  +     )               pointsCount   B 2*  
+  **  
+     2*             55   B N+  ,  F+  ,     N+            5   B 4,  c,  ,,  c,     4,            5   B },  ,  u,  ,     },            5   B ,  %-  ,  %-     ,            5   B =-  ./  5-  ./     =-            	   args   B -  .  -  .     -            5   B 6.  Q.  ..  Q.     6.            5   B /  ,/  
/  ,/     /             55   B H/  I0  @/  I0     H/            5   B _0  1  W0  1     _0            55!!    	   /   Rickshaw.Fixtures.Colorb  G2  8  ?2  8     G2            5!!    	   9   Rickshaw.Fixtures.RandomDatab 8  r;  8  r;     8               timeInterval    lastRandomValue    timeBase   B 9  ;  9  ;     9                randomValue    index    counter   B :  :  9  :     :             55   B $;  q;  ;  q;     $;               B @;  X;  8;  X;     @;             555!!    	   -   Rickshaw.Fixtures.Timeb  ;  C  ;  C     ;            	   self   B k<  <  c<  <     k<             5   B <  <  <  <     <             5   B %=  M=  =  M=     %=             5   B ~=  =  v=  =     ~=             5   B =  =  =  =     =             5   B >  4>  >  4>     >             5   B b>  >  Z>  >     b>             5   B >  >  >  >     >             5   B  ?  ?  >  ?      ?             5   B N?  o?  F?  o?     N?             5   B ?  ?  ?  ?     ?             5   B ?  @  ?  @     ?             5   B N@  u@  F@  u@     N@             5   B @  @  @  @     @               unitName   B @  @  @  @     @             55   B @  !A  @  !A     @             5   B :A  lA  2A  lA     :A             5   B A  C  wA  C     A             55!!    	   9   Rickshaw.Fixtures.Time.Localb  C  M  C  M     C            	   self   B D  D  D  D     D             5   B D  E  D  E     D             5   B GE  lE  ?E  lE     GE             5   B E  E  E  E     E             5   B E   F  E   F     E             5   B 2F  PF  *F  PF     2F             5   B ~F  F  vF  F     ~F             5   B F  F  F  F     F             5   B G  6G  G  6G     G             5   B gG  G  _G  G     gG             5   B G  G  G  G     G             5   B H  (H  G  (H     H             5   B ^H  H  VH  H     ^H             5   B H  H  H  H     H               unitName   B H  H  H  H     H             55   B I  .I   I  .I     I             5   B GI  vI  ?I  vI     GI             5   B I  M  I  M     I             55!!    	   G   Rickshaw.Fixtures.Number.formatKMBTb aM  aN  YM  aN     aM             5!!    	   Y   Rickshaw.Fixtures.Number.formatBase1024KMGTPb N  O  N  O     N      	       5!!    	   -   Rickshaw.Color.Paletteb KP  T  CP  T     KP              B R  S  R  S     R            5   B  :S  T  2S  T     :S            55!!    	      initializeB U  U  U  U     U              B _U  lU  WU  lU     _U             5   B  U  U  U  U     U             5   B  U  U  U  U     U             55!!    	      requestB  U  aV  U  aV     U            5!!    	      errorB  pV  V  hV  V     pV            5!!    	      successB V  W  V  W     V            5!!    	      _spliceB W  >Y  W  >Y     W             	   data   B X  .Y  W  .Y     X                s    seriesKey   B nX  ,Y  fX  ,Y     nX                d   B Y  )Y  Y  )Y     Y             5555!!       !!   initialize!!!!   request!!!!   error!!!!   success!!!!   _splice!!    !!    	   /   Rickshaw.Graph.Annotateb Y  b  Y  b     Y            	   self   B MZ  Z  EZ  Z     MZ             5   B  Z  b  Z  b     Z              B [  b  [  b     [               annotation 	   left    element   B \  I\  [  I\     \             5   B  ]  ]  ]  ]      ]               B ]  ]  ]  ]     ]             55   B U^  b  M^  b     U^             555   B  b  b  b  b     b             55!!    	   1   Rickshaw.Graph.Axis.Timeb c  h  c  h     c            	   self 	   time   B  c  d  c  d     c            	   unit    rangeSeconds   B nd  d  fd  d     nd             55   B  d  Qf  d  Qf     d            5   B  ff  h  ^f  h     ff              B f  f  f  f     f             5   B f  h  f  h     f             55   B  h  h  h  h     h             55!!    	   +   Rickshaw.Graph.Axis.Xb )i  Fs  !i  Fs     )i            	   args 	   self    berthRate   B gi  (l  _i  (l     gi              B  l  &l  l  &l     l             55   B >l  :m  6l  :m     >l            5   B  Om  q  Gm  q     Om              B  n  -n  n  -n      n             5   B  Mq  q  Eq  q     Mq            55   B q  /s  q  /s     q            55!!    	      initializeB s  pv  s  pv     s            	   self   B t  u  t  u     t             5   B  ]v  nv  Uv  nv     ]v             55!!    	      setSizeB v  x  yv  x     v            5!!    	      renderB  x  y  x  y     x            5!!    	      _drawAxisB z  |  z  |     z            5!!    	      _drawGridB  |  @}  |  @}      |              B  |  >}  |  >}     |            55!!       !!   initialize!!!!   setSize!!!!   render!!!!   _drawAxis!!!!   _drawGrid!!    !!          initializeC                    }  ~  }  ~   
                         !!      $super	   args   .this        +H;      2                     W   QT 5    =   H         A=   ,  R p	   V   T 5    6    QT 5   =   H      V   C6   Q      V   T 5   6   Q   T  T  Q  !#     scale   undefined   Error+   Scaled requires scale	   grid      5!!          _drawAxisC    r               ~    ~     
                         !!
      $super   scale   domain   renderDomain   extents   extentMap   adjExtents   adjustment   adjustedScale   .this        +H;                     >    2 W  QV  5       
:  W   QV  5   5      
:  5   W  QZ      5      
   V   O `       5      
   V   O `   W  Q   5    	   
:     
Z   >`    ?`   : 
   
V  : W  QZ   V  V  >7: `    V  V  ?7: `   W  Q   5    	   
:     
V  : 
   
V  : W  QV  5       
:     
V      
V  : : 
   
T 
   
:  : W  QT  V  :  		"	+		$+    scale   domain   graph   renderer   y	   Math   min   apply   max   linear   range	   copy   map      5!!          _drawGridC    e                        
                         !!      $super	   axis   .this        +H;   *                        W   QV   5          T  T  Q    v 	   grid      5!!       !!   initialize!!!!   _drawAxis!!!!   _drawGrid!!    !!    	   Q   Rickshaw.Graph.Behavior.Series.Highlightb ?  u  7  u                 	   self    colorSafe    activeLine    disabledColor   B   *    *                  5   B K     C                        l   B ~    v       A               B   i    i                  55   B            x               B                         555   B S  r  K  r     	             55!!    	   I   Rickshaw.Graph.Behavior.Series.Orderb            	            	   self   B    \    \     
               B =  -  5  -                      series   B            J             555   B  z    r       =             55!!    	   K   Rickshaw.Graph.Behavior.Series.Toggleb G  o  ?  o     
            	   self   B            d            	   line   B [  Z  S  Z                   B                         55   B            v               B   |    |                  5   B            h             555   B {    s       >               B            k             55   B                            ui   B                          55   B @  V  8  V                  5   B  r  %  j  %     5              B   #    #     Z                s   B             p             5   B    "    "                  555   B  W  n  O  n                 55!!    	      initializeB                          B 6  _  .  _                  5   B            L             55!!    	      formatterB   7    7                  5!!    	      updateB G  R  ?  R     
               graph    eventX    eventY    j    points    nearestPoint   B a    Y       $            55!!    	   	   hideB  `    X       #            5!!    	   	   showB    N    N                 5!!    	      renderB ^  I  V  I     !              B            t             5   B            R#             5   B    [    [     #             5   B            $             55!!    	   !   _calcLayoutErrorB c    [       &%               parentRect    error   B            %             55!!    	      _addListenersB    J    J     &              B 	  .    .     &            5   B  ]  n  U  n      '            5   B   7    7     u'            55!!       !!   initialize!!!!   formatter!!!!   update!!!!	   hide!!!!	   show!!!!   render!!!!!   _calcLayoutError!!!!   _addListeners!!    !!          requestC     (                 8    8   
                        !!      .this          +H!!       !!   url!!!!   dataType!!!!   success!!!!   error!!    ;	   l   &                     
 W   Q       
[    V   5   ]   =   ]   V   5      
V   : ]   V   5      
V   : ]    Q (e    jQuery	   ajax   dataURL   url   jsonp   dataType   success	   bind   error      5!!       !!   request!!    !!    	      initializeB            )              B             *             55!!    	      renderB             *            	   self   B d  q  \  q     '+             5   B            |+             55!!    	      addLineB            +            5!!       !!   className!!!!   initialize!!!!   render!!!!   addLine!!    !!    	      initializeB E    =       /              B             /            55!!    	      buildB    v    v     /               element    graph    $    domain 	   self   B  n  I  f  I     10               B   F    F     0               B   D    D     1             5555!!    	      updateB      ~       I2            5!!    	      onSlideB   5    5     3            5!!       !!   initialize!!!!   build!!!!   update!!!!   onSlide!!    !!    	      initializeB            4            	   args   B  -  S  %  S     7            55!!    	      onSlideB +  Y  #  Y     8            5!!    	      onConfigureB n    f       19            5!!    	      configureB   7    7     v9            	   args   B            9             5   B G    ?       
:            5   B   /    /     a;            55!!    	      renderB  G    ?       
=            	   self   B     y       D>               graph   B    /    /     ?             5   B L    D       @             555!!    	      _renderDimmingB             mF            5!!    	      _renderFrameB             I            5!!    	      _renderGrippersB    F    F     L            	   path   B   "    "     M            55!!    	      _renderHandlesB  ^    V       !O            5!!    	      _renderMiddleB    r    r     Q            5!!    	   )   _registerMouseEventsB             SS            	   drag 	   self    onMousemove    onMousedown    onMouseup	      onMousemove (           S      
          frameAfterDrag   B            W                graph    windowAfterDrag   B            X             555	      onMousedown    Q    Q     Y             5	   +   onMousedownLeftHandle o    Q       2\             5	   -   onMousedownRightHandle            |\             5	   /   onMousedownMiddleHandle   P    P     \             5	      onMouseup b     P        %]             55!!    	   )   _getClientXFromEventB   Q    Q     `             5!!       !!   initialize!!!!   onSlide!!!!   onConfigure!!!!   configure!!!!   render!!!!   _renderDimming!!!!   _renderFrame!!!!   _renderGrippers!!!!   _renderHandles!!!!   _renderMiddle!!!!)   _registerMouseEvents!!!!)   _getClientXFromEvent!!    !!    	      initializeB            b            5!!    	   #   seriesPathFactoryB  9  =  1  =     b             5!!    	   '   seriesStrokeFactoryB  Z  ^  R  ^     c             5!!    	      defaultsB  p    h       3c             5!!    	      domainB            c            	   xMin 	   xMax 	   yMin 	   yMax   B            ld               B            d             555!!    	      renderB            f               pathNodes    strokeNodes    i   B            og             5   B            g             5   B *    "       h            55!!    	      _styleSeriesB   ^    ^     i            5!!    	      configureB q    i       4k            	   args   B            xk               key   B y    q       <l            555!!    	      setStrokeWidthB            hm            5!!    	      setTensionB   9    9     m            5!!    
   !!   initialize!!!!#   seriesPathFactory!!!!'   seriesStrokeFactory!!!!   defaults!!!!   domain!!!!   render!!!!   _styleSeries!!!!   configure!!!!   setStrokeWidth!!!!   setTension!!    !!          defaultsC    n                   (    (                           !!      $super         +H!!       !!   unstack!!!!	   fill!!!!   stroke!!    ;   /                     
            
T  :  [    C]   B]   C]   :  n
6    extend   unstack	   fill   stroke       5!!       #   seriesPathFactoryC                       C  I  ;  I                          !!      graph   factory   .this         +H!!    	   5   seriesPathFactory/factory<b     w       Bo             5!!    	   5   seriesPathFactory/factory<b            fo             5!!    	   '   seriesPathFactory/<b "  8    8     o             5;	      2                      W  QV  5       Q  5      
:     
    :    
   :    
V  5    5   :    
V  5   : W   QV   5   E      QV      
   :    QV    o$$&(    graph   svg	   line   x   y   interpolate   interpolation   tension   defined5!!       !!	   name!!!!   defaults!!!!#   seriesPathFactory!!    !!          defaultsC    p                   <    <                           !!      $super         +H!!       !!	   fill!!!!   stroke!!!!   unstack!!    ;   /                     
            
T  :  [    C]   B]   B]   :  p

7    extend	   fill   stroke   unstack       5!!       #   seriesPathFactoryC                       W    O                            !!      graph   factory   .this         +H!!    	   5   seriesPathFactory/factory<b            Vq             5!!    	   5   seriesPathFactory/factory<b            {q             5!!    	   5   seriesPathFactory/factory<b            q             5!!    	   '   seriesPathFactory/<b b  x  Z  x     %r             5;
      6                      W  QV  5       Q  5      
:     
    :    
   :    
   :    
V  5    5   :    
V  5   : W   QV   5	   E      QV   	   
   :    QV    q'$&*&(    graph   svg	   area   x   y0   y1   interpolate   interpolation   tension   defined5!!       !!	   name!!!!   defaults!!!!#   seriesPathFactory!!    !!          defaultsC    r                %                                 !!      $super   defaults        +H!!       !!   gapSize!!!!   unstack!!    ;   D   %                 	            
T  :  [    <?]   B]   : W   QV   %   QV    r
-    extend   gapSize   unstack   tension       5!!          initializeC    ps                        
                        !!      $super	   args   .this        +H!!            ;   Y                   
     W   QT D      Q[       U QV   T 5    D      QV   5       6    QT  T  Q s~(    gapSize      5!!          domainC    s        	                
                         !!      $super   domain!   frequentInterval   .this        +H;   u   ,         	            W  QT  :  W   QV      
V  5   5      
:    
:  : W  QV   5   ?7      V  5   : 8QV    s.
<# #   _frequentInterval   graph   stackedData   slice   shift   x   Number   magnitude      5!!          barWidthC    t                 u    u   
                         !!      series!   frequentInterval   barWidth   .this        +H;   Y                       	 W  QV      
T  5   : W   QV  5   5      
V   5   : ?V  5   W  QV   t-7 #   _frequentInterval   stack   graph   x   magnitude   gapSize      5!!          renderC                          }                            !!
   	   args   graph   series   vis   barWidth   barXOffset#   activeSeriesCount   seriesBarWidth   transform   .this       +H!!            !!    	   3   render/activeSeriesCount<b x    p       ;v             5!!    	      transformB   e    e     v             5!!    	      render/<b }    u       @w               series   B            w             5   B I  l  A  l     x             5   B     w       Bx             5   B            x             5   B `    X       #y             55;   ?  Z                     W  QT  D      Q[       U  QV  5       QT  5   D      Q   5   	   W   QT  5   D      Q   5         Q      
=   :    
  QV     
V      
:  >7: W  Q>   QV      
   : 	   W  QV  5
         V  V        V        Q      QV      
   V   Q uO",A?} N    graph   series   vis   selectAll   *   remove   barWidth   active   filter   length   unstack   forEach5!!       #   _frequentIntervalC                         d    d                         !!   	   data   intervalCounts   i   interval!   frequentInterval       +H!!            !!       !!   count!!!!   magnitude!!    !!    	   '   _frequentInterval/<b   J    J     z             5;                   V                 "     [       Q>W   Q }   m   T  V   ?75    T  V   75    W  Q   V     V  7D      Q>   8Q   V  78QQ   V   W   QQ   V   T     ?s   [   >]   ?]      Q     
   :    
    Q    y&}k  5  	{    x   length   count   magnitude	   keys   forEach5!!       !!	   name!!!!   defaults!!!!   initialize!!!!   domain!!!!   barWidth!!!!   render!!!!#   _frequentInterval!!    !!          defaultsC    {                   U    U                           !!      $super         +H!!       !!   unstack!!!!	   fill!!!!   stroke!!    ;   /                     
            
T  :  [    B]   B]   B]   :  {
8    extend   unstack	   fill   stroke       5!!       #   seriesPathFactoryC                       p    h                            !!      graph   factory   .this         +H!!    	   5   seriesPathFactory/factory<b            o|             5!!    	   5   seriesPathFactory/factory<b            |             5!!    	   5   seriesPathFactory/factory<b            |             5!!    	   '   seriesPathFactory/<b w    o       )              5;
      5                      W  QV  5       Q  5      
:     
    :    
   :    
   :    
   5   :    
V  5   : W   QV   5	   E      QV   	   
   :    QV    |@$&*!(    graph   svg	   area   x   y0   y1   interpolate   interpolation   tension   defined5!!       '   seriesStrokeFactoryC                                                       !!      graph   factory   .this         +H!!    	   9   seriesStrokeFactory/factory<b                          5!!    	   9   seriesStrokeFactory/factory<b   8    8                   5!!    	   +   seriesStrokeFactory/<b            L             5;	      /                      W  QV  5       Q  5      
:     
    :    
   :    
   5   :    
V  5   : W   QV   5   E      QV      
   :    QV   z$)!(    graph   svg	   line   x   y   interpolate   interpolation   tension   defined5!!          renderC                        S    S                          !!	   	   args   graph   series   vis   method	   data   nodes   i   .this       +H!!            !!    	      render/data<b            S             5!!    	      render/data<b            w             5!!    	      render/<b   L    L                 5;                     3    + W  QT  D      Q[       U  QV  5    W   QT  5   D      QV   5      W  QT  5   D   
   QV   5      W  QV     
=   :    
  QV  5         =         =      W  QV  	   
   : 
   
   : W  QV     
=   :    
V  :    
:  V  
=   =   :    Q      
=   :    
=   V     
:  :    
=   =    QV  5   P   (         
=   :    
=   V     
:  :    
=   =    Q1   >   QV     
   V   Q "('+!#!%m    graph   series   vis   selectAll   *   remove   unstack   append   insert   filter   map	   path	   data   enter   svg:g   g   svg:path	   attr   d#   seriesPathFactory   class	   area   stroke'   seriesStrokeFactory	   line   forEach5!!          _styleSeriesC                   i    a     
                         !!      series   .this        +H;   Q  e                *    # W   QT  5                    
T  5    :    
=   :    
=   T  5    QV   5               
T  5    :    
=   :    
=   =   :    
=   T  5   D4      Q   	   
T  5   =
   : <      ?:     :    
=   V   5    Q$   T  5   *   &   T  5       
=   T  5    Q*    ' M4$L)' 	   path   select   .area	   attr	   fill   color   stroke   .line	   none   interpolateRgb   black   stroke-width   strokeWidth   className   setAttribute   class      5!!       !!	   name!!!!   defaults!!!!#   seriesPathFactory!!!!'   seriesStrokeFactory!!!!   render!!!!   _styleSeries!!    !!          defaultsC    6                    |                            !!      $super         +H!!       !!   top!!!!   right!!!!   bottom!!!!	   left!!    !!       !!   unstack!!!!	   fill!!!!   stroke!!!!   padding!!!!   dotSize!!    ;
   x   ,                              
T  :  [   C]   C]   B]   [    <{Gz?]   <{Gz?]   <{Gz?]   <{Gz?]   ]   ]	   :  ?

	

p    extend   unstack	   fill   stroke   top   right   bottom	   left   padding   dotSize       5!!          initializeC                     " =  =                           !!      $super	   args         +H;                              T  T  Q         5!!          renderC                      M  E                          !!   	   args   graph   series   vis   dotSize   .this       +H!!            !!    	      render/<b                        series   B h ~ ` ~                 5   B        b             5   B                     5   B  %  %                 5   B        A	             55;      7                     W  QT  D      Q[       U  QV  5       QT  5   D      Q   5   	   W   QT  5   D      Q   5         QV  5      Q      
=   :    
  QV      
   V   Q " 	     graph   series   vis   dotSize   selectAll   *   remove   forEach5!!       !!	   name!!!!   defaults!!!!   initialize!!!!   render!!    !!          initializeC    
                 d  \                            !!      $super	   args         +H;                              T  T  Q 
$        5!!          defaultsC    C
                                              !!      $super         +H!!       !!   unstack!!!!	   fill!!!!   stroke!!    ;   /                     
            
T  :  [    C]   B]   C]   :  
L
6    extend   unstack	   fill   stroke       5!!          configureC    
                .  .  
                        !!      $super	   args   .this        +H!!            ;   ;                        W   QT D      Q[       U QV   T 6    QT  T  Q 
    config      5!!          domainC                      >  6                          !!      $super   domains   groups	   xMin	   xMax	   yMin	   yMax   .this       +H!!    	      domain/<b        d               B                     5   B                     55!!    	      domain/xMin<b                     5!!    	      domain/xMax<b  +  +                 5!!    	      domain/yMin<b R d J d                 5!!    	      domain/yMax<b        =             5!!       !!   x!!!!   y!!    ;
   >                  -    ! W  QV  5       
  QZ       QV     
:  W   QV     
V    QV      
     Q     
      
   : : W  Q     
      
   : : W  Q     
      
   : : W  Q     
      
   : : W  Q[   Z   V  `    V  `   ]   Z   V  `    V  `   ]	    

 #666-    graph   stackData   _groups   _stack   forEach   min   map   max   x   y5!!          _groupsC                        
  
                         !!      graph   renderGroups   groups   .this         +H!!            !!    	      _groups/<b  .
  .
                   config   B r	 	 j	 	    $             55!!    	      _groups/<b m
 
 e
 
                 5;   t   1                      W   QV   5       Q[       Q   5      
   V    QZ       Q      
   :    
    Q     2G    graph   series   forEach   Object	   keys5!!          _stackC                      
 C 
 C                          !!      groups   .this        +H!!    	      _stack/<b 
 . 
 .                    stackedData   B  1 	 1                 5   B O l G l                 5   B  +  +                 55;   "                        W   QT      
    V    QT   } c    forEach5!!          renderC                       S F K F                          !!      groups   .this          +H!!    	      render/<b x  p     *             5!!    	      render/<b W D O D    	                series   B   ~     8             5   B         p             5   B  B  B                 55;	      8                      W  QV  5    5      
     QV  5    5      
=   :    
  QV     
:  W   QV     
V   : W   QV      
    Q |
      graph   series   forEach   vis   selectAll   *   remove   _groups   _stack5!!       !!	   name!!!!   initialize!!!!   defaults!!!!   configure!!!!   domain!!!!   _groups!!!!   _stack!!!!   render!!    !!          defaultsC                                                  !!      $super         +H!!       !!   top!!!!   right!!!!   bottom!!!!	   left!!    !!       !!   unstack!!!!	   fill!!!!   stroke!!!!   padding!!!!   dotSize!!!!   strokeWidth!!    ;      .                              
T  :  [   C]   B]   C]   [    <{Gz?]   <{Gz?]   <{Gz?]   <{Gz?]   ]   ]	   ]
   :  
	


~    extend   unstack	   fill   stroke   top   right   bottom	   left   padding   dotSize   strokeWidth       5!!       #   seriesPathFactoryC                                                   !!      graph   factory   .this         +H!!    	   5   seriesPathFactory/factory<b                     5!!    	   5   seriesPathFactory/factory<b                     5!!    	   '   seriesPathFactory/<b   {     5             5;	      2                      W  QV  5       Q  5      
:     
    :    
   :    
V  5    5   :    
V  5   : W   QV   5   E      QV      
   :    QV    c$$&(    graph   svg	   line   x   y   interpolate   interpolation   tension   defined5!!          renderC                                                  !!	   	   args   graph   series   vis   dotSize	   data   nodes   i   .this       +H!!            !!    	      render/data<b y  q     +             5!!    	      render/data<b        O             5!!    	      render/<b :  2                 5!!    	      render/<b        a               series   B  &  &                 5   B X p P p    
             5   B   |     6             5   B        a             5   B                    55;   k  o                (    " W  QT  D      Q[       U  QV  5       QT  5   D      Q   5   	   W   QT  5   D      Q   5         QV  5      Q      
=   :    
  QV      
   :    
   : W  Q      
=	   : 
   
V  :    
:     
=   :    
=   V     
:  :    Q>   QV      
   V   QV      
   V   Q s" '+!)n !    graph   series   vis   dotSize   selectAll   *   remove   filter   map	   path	   data   enter   append   svg:path	   attr   d#   seriesPathFactory   forEach5!!       !!	   name!!!!   defaults!!!!#   seriesPathFactory!!!!   render!!    !!    	      initializeB 4  ,                 5!!    	      buildB                     	   self    $   B  ?  7                    B v  n     (             555!!    	      setScaleB        c            5!!    	      transformerB ,  $                    aggregatedData   B   ~     8            	   avgX 	   avgY    slice   B % W  W                 555!!       !!   initialize!!!!   build!!!!   setScale!!!!   transformer!!    !!          requestC                       U  M                          !!      socket	   self   .this         +H!!    	      request/<b        Y             5;   G                         W  Q       
V  5   : W   QV     QV      
=        Q 1    io   connect   dataURL   on   rickshaw5!!       !!   request!!    !!          initializeC                      ,  $                           !!   	   data   palette   options   timeInterval   .this        +H!!            !!    	      initialize/<b        d!            5;   V  R                *     W  QT D      Q[       U QV     5    5   AT ,  R 6   QV  T 5   =   H9            
   A,  R     
:  X:       T 5      6   QT 5	   =         X      T 5	      W   QV  
   
V    QT  E2   !   QT  '=   E   $   Q      
T  : '   !   (   T     
   V   Q*    $2
BB!1    Color   Palette   palette   timeBase   undefined	   Math   floor	   Date   getTime   timeInterval   setTimeInterval   object   Array   isArray   forEach5!!          addItemC                                                  !!   	   item   .this       +H!!    	      addItem/<b        "             5!!       !!   x!!!!   y!!    ;     k                B    + W   Q   5    =   H      =   p         5   D(      QV   5      
   5    :    6   Q      5   D      QZ       6   Q   5      >HE/      QV      E      QV      
:  >!   *   "   V   >75      
     Qn   &      5      >HS   +      5   	   
[   V   5
   V   5   D   2   Q>2   ]   >]    Q6   V   	   
    QV   5   6   ;   V   5      
V      
   5    :  QB    ! $(@'3$ 	   name   undefined-   addItem() needs a name   color   palette	   data   length   getIndex   forEach	   push   timeBase   timeInterval   x   y   legend   addLine   itemByName5!!          addDataC                                                  !!   	   data   x   index   .this       +H!!    	      addData/<b  9  9    #            5!!    	      addData/<b U  M     $            5;   [   $                    
 W   QV       
:     Q     
   :    
    V    QV      
   V    Q #z	Tt    getIndex	   keys   forEach5!!          getIndexC     ~$                    
                         !!      .this          +H;   n                        	 W   QV   >7E1      QV   >75    E      QV   >75       	      
   V   >75             >    $G 	   data   length      5!!          itemByNameC    $               + w # w  
                        !!   	   name   i   .this        +H;          V      n   1                     W  Q>W   Q B   m   V  V   75    T        V  V   7   V   W   QQ   V   V         $&B0V8 	   name   length      5!!          setTimeIntervalC    B%                    
                         !!      iv   .this        +H;                            W   QV   T  X6    Q %G    timeInterval      5!!          setTimeBaseC    u%                    
                         !!      t   .this        +H;                            W   QV   T  6    Q %y    timeBase      5!!       	   dumpC                                                     !!   	   data   .this         +H!!       !!   timeBase!!!!   timeInterval!!!!   items!!    !!    	      dump/<b G    ?       %                newItem   B            P&             55;   R   #                      W   Q[    V   5    ]    V   5   ]   Z    ]      QV      
    Q    %
      timeBase   timeInterval   items   forEach5!!       	   loadC                      ! !   !                          !!   	   data   .this        +H!!    	      load/<b ! ! ! !    N'            5;      /                     W   QT  5          V   T  5    6    Q   T  5         V   T  5   6   Q
   T  5   &      T  5      
    V    Q    &'o    timeInterval   timeBase   items   forEach5!!    	   !!   initialize!!!!   addItem!!!!   addData!!!!   getIndex!!!!   itemByName!!!!   setTimeInterval!!!!   setTimeBase!!!!	   dump!!!!	   load!!    !!    	   1   Rickshaw.Series.zeroFillb  " H" " H"    '             5!!    	   )   Rickshaw.Series.fillb f" # ^" #    (             	   fill    x    i   B " " " "    P(             5   B " " " "    (             5   B !# 1# # 1#    (             5   B ?# Q# 7# Q#    (             5   B i# # a# #    )             55!!          initializeC                      2$ ( *$ (                        !!   	   data   palette   options   i   .this       +H!!            !!    	      initialize/<b ' 0' ' 0'    ,            5!!    	      initialize/<b o( ( g( (    !.            5;         g      Q                  o    9 W   QT D      Q[       U QT 5    =   H   
      A=   ,  R p   T 5   =   H         A=   ,  R p   V     5   5   AT ,  R 6   QV   T 5	   =   H9      
      
   A,  R     
:  X:    #   T 5	   $   6	   QV      
T 5     QV   >7E1   *   QV   >75   E   -   QV   >75      0   C   1   V   V   >75      6   QV   V   >75      6   Q    9   V   >6   QV   >6   Q;   V   T 5   6   QT  E2   >   QT  '=   E   A   Q      
T  : D   E   E   T     
   V    QV   5   ?6   QV   5   ?6   QM   V   5	   V   5   V   5   V   5    6	   QV   5   =   IE   Y   QV   5   V   5   \      ]   V   5   V   5   ?   Q Z   ma   V   5   ?6   QV   5   ?6   QV      
   V    Qi         QQk      ?o    )+;,9$2
1),%+,1JR ZFg/      timeInterval   undefined   ErrorU   FixedDuration series requires timeInterval   maxDataPointsW   FixedDuration series requires maxDataPoints   Color   Palette   palette   timeBase	   Math   floor	   Date   getTime   setTimeInterval	   data   length   currentSize   currentIndex   object   Array   isArray   forEach5!!          addDataC    .               ( ) ( )  
                        !!      $super	   data   x   .this        +H;       V   2         3                    	 W   QT  T T  QV   5    ?6    QV   5   ?6   QV   5      IA         m   V      
  Q   V   5    V   5       . (2+6    currentSize   currentIndex   maxDataPoints   undefined   dropData      5!!          dropDataC                       ) ) ) )                          !!      .this          +H!!    	      dropData/<b ) ) ) )    ^/             5;   -                         W   QV       
     QV   5   ?6   Q /I/    forEach   currentSize5!!          getIndexC     /               ) * ) *  
                         !!      .this          +H;                            W   QV   5     /    currentIndex      5!!       !!   initialize!!!!   addData!!!!   dropData!!!!   getIndex!!    ;   9                      @[       ]       ]      ]      ]      Q       Q       
=    Q   5      6   Q   '=   IE      Q       D      Q   '=   H   "         5   5   A,  R  Q          
=	    Q      6
   Q       
=    Q   5      6   Q       
=    Q   5   	   6   Q       
=    Q   5   
   6   Q       
=    Q   5   5      6   Q       
=    Q   5   5      6   Q   5   5      6   Q       
=    Q   5      6   Q       
=    Q   5
      5      
[      ]      ]      ]      ]       ]!   : 6"   Q       
=#    Q   5
      6$   Q       
=%    Q   5
   5&      6   Q       
='    Q   5
   5&      6(   Q       
=)    Q   5
   5&      5      
[      ]      ]*      ]+      ],      ]-   : 6.   Q       
=/    Q   5
   5&   5.      5      
   5
   5&   5.   [!      ]      ],       ]-   : 60   Q       
=1    Q   5
   52   53   "   64   Q       
=5    Q   5
   52   53   #   66   Q       
=7    Q   5
   52   53   $   68   Q       
=9    Q   5
      5      
[-   %   ]   &   ]:   '   ];   (   ]<   )   ]=   *   ]+   +   ]>   ,   ]?   : 6@   Q       
=A    Q   5
      5      
   5
   5"   [/   .   ]   : 6B   Q       
=C    Q   5
      5      
[3   =D   ]E   0   ]   1   ]+   2   ]F   : 6G   Q       
=H    Q   5
      5      
[8   4   ]   5   ]I   6   ];   7   ]J   : 6K   Q       
=L    Q   5
   5K      5      
[E   9   ]   :   ]J   ;   ]M   <   ]N   =   ]+   >   ]O   ?   ]P   @   ]Q   A   ]R   B   ]S   C   ]T   D   ]U   : 6V   Q       
=W    Q   5
      5      
[P   F   ]   G   ]X   H   ]Y   I   ]Z   J   ][   K   ]+   L   ]\   M   ]N   N   ]]   O   ]^   : 6_   Q       
=`    Q   5
   5_      5      
   5
   5_   [S   =a   ]b   Q   ]Z   R   ]X   : 6c   Q       
=d    Q   5
   5_      5      
   5
   5_   [V   =e   ]b   T   ]Z   U   ]X   : 6f   Q       
=g    Q   5
   5_      5      
   5
   5_   []   =h   ]b   W   ]Z   X   ]   Y   ][   Z   ]i   [   ]+   \   ]j   : 6k   Q       
=l    Q   5
   5_      5      
   5
   5_   [c   =m   ]b   ^   ]Z   _   ]X   `   ]Y   a   ]+   b   ]\   : 6n   Q       
=o    Q   5
   5_      5      
   5
   5_   [g   =p   ]b   d   ]Z   e   ]   f   ]+   : 6q   Q       
=r    Q   5
   5_      5      
   5
   5_   [o   =s   ]b   h   ]   i   ]Z   j   ]N   k   ][   l   ]t   m   ]u   n   ]+   : 6v   Q       
=w    Q   5
   5_      5      
   5
   5_   [s   =x   ]b   p   ]Z   q   ]X   r   ]+   : 6y   Q       
=z    Q   5
      5      
[x   t   ]   u   ]I   v   ]{   w   ]|   : 6}   Q       
=~    Q   5
      5      
   5
   5"   [z   y   ]   : 6   Q       
=    Q      5      
   [   {   ]   |   ]   }   ]   ~   ]      ]      ]      ]      ]      ]   : 63   Q   53      6   Q   53      6   Q       
=    Q   53      5      
   53   [      ]      ]      ]      ]   : 6   Q      N{> (	' 	))	 	% w	* 	$ 	* 	D	& - 	$ 	!+    Y  o ?	% 	M	& 	# 
<	#-  c % 	*J    -	6 h	2 ,	3 W	(2 ` }  n 	"@  	#-   C	(2    3 	0: p?G  	[  : a   s -	%/n!      /` 	*Lbr 	+Mcp 	)K  e     G, ~	*LdQ #  { 	1S  / 	+M/bM    
%	.P   ! 	%/    x 	%C  	-   ]`7)  J ]	+E   ]' 	    namespace	   keys   extend   clone3   Rickshaw.Compat.ClassList   Compat   ClassList%   RICKSHAW_NO_COMPAT   undefined   Rickshaw.Graph   Graph/   Rickshaw.Fixtures.Color   Fixtures   Color9   Rickshaw.Fixtures.RandomData   RandomData-   Rickshaw.Fixtures.Time	   Time9   Rickshaw.Fixtures.Time.Local   Local1   Rickshaw.Fixtures.Number   Number   formatKMBT'   formatBase1024KMGTP-   Rickshaw.Color.Palette   Palette'   Rickshaw.Graph.Ajax   Class   create   initialize   request   error   success   _splice	   Ajax/   Rickshaw.Graph.Annotate   Annotate1   Rickshaw.Graph.Axis.Time	   Axis+   Rickshaw.Graph.Axis.X   X+   Rickshaw.Graph.Axis.Y   setSize   render   _drawAxis   _drawGrid   Y9   Rickshaw.Graph.Axis.Y.Scaled   ScaledQ   Rickshaw.Graph.Behavior.Series.Highlight   Behavior   Series   HighlightI   Rickshaw.Graph.Behavior.Series.Order   OrderK   Rickshaw.Graph.Behavior.Series.Toggle   Toggle5   Rickshaw.Graph.HoverDetail   formatter   update	   hide	   show!   _calcLayoutError   _addListeners   HoverDetail)   Rickshaw.Graph.JSONP   JSONP+   Rickshaw.Graph.Legend   rickshaw_legend   className   addLine   Legend5   Rickshaw.Graph.RangeSlider   build   onSlide   RangeSliderE   Rickshaw.Graph.RangeSlider.Preview   onConfigure   configure   _renderDimming   _renderFrame   _renderGrippers   _renderHandles   _renderMiddle)   _registerMouseEvents)   _getClientXFromEvent   Preview/   Rickshaw.Graph.Renderer#   seriesPathFactory'   seriesStrokeFactory   defaults   domain   _styleSeries   setStrokeWidth   setTension   Renderer9   Rickshaw.Graph.Renderer.Line	   line	   name	   Line;   Rickshaw.Graph.Renderer.Stack   stack   Stack7   Rickshaw.Graph.Renderer.Bar   bar   barWidth#   _frequentInterval   Bar9   Rickshaw.Graph.Renderer.Area	   area	   AreaG   Rickshaw.Graph.Renderer.ScatterPlot   scatterplot   ScatterPlot;   Rickshaw.Graph.Renderer.Multi   multi   _groups   _stack   MultiA   Rickshaw.Graph.Renderer.LinePlot   lineplot   LinePlot/   Rickshaw.Graph.Smoother   setScale   transformer   Smoother/   Rickshaw.Graph.Socketio   Socketio   Rickshaw.Series   Array   addItem   addData   getIndex   itemByName   setTimeInterval   setTimeBase	   dump	   load   zeroFill	   fill;   Rickshaw.Series.FixedDuration   dropData   FixedDuration5;                                       Q   / gtJ/      ^^A^]   j    :http://172.17.0.26:9090/static/vendor/rickshaw/rickshaw.min.js?v=ecee9c8abfd118f139014cb1b174b08db3f342cf necko:classified 1 strongly-framed 1 request-method GET response-head HTTP/1.1 200 OK
Accept-Ranges: bytes
Content-Length: 76322
Content-Type: application/javascript
Last-Modified: Thu, 01 Jan 1970 00:00:01 GMT
Date: Sat, 16 May 2020 08:10:05 GMT
 original-response-headers Accept-Ranges: bytes
Content-Length: 76322
Content-Type: application/javascript
Last-Modified: Thu, 01 Jan 1970 00:00:01 GMT
Date: Sat, 16 May 2020 08:10:05 GMT
 ctid 2 uncompressed-len 0 net-response-time-onstart 149 net-response-time-onstop 167 alt-data 1;76322,javascript/moz-bytecode-20200321005938 alt-data-from-child 1  